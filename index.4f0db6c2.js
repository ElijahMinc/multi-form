let e,t;var i,s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},r=s.parcelRequiref4c7;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var i={id:e,exports:{}};return n[e]=i,t.call(i.exports,i,i.exports),i.exports}var s=Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},s.parcelRequiref4c7=r),r.register("3HEWM",function(e,t){var i;i=function(e){return function(){for(var t=[["Afghanistan (‫افغانستان‬‎)","af","93"],["Albania (Shqip\xebri)","al","355"],["Algeria (‫الجزائر‬‎)","dz","213"],["American Samoa","as","1",5,["684"]],["Andorra","ad","376"],["Angola","ao","244"],["Anguilla","ai","1",6,["264"]],["Antigua and Barbuda","ag","1",7,["268"]],["Argentina","ar","54"],["Armenia (Հայաստան)","am","374"],["Aruba","aw","297"],["Ascension Island","ac","247"],["Australia","au","61",0],["Austria (\xd6sterreich)","at","43"],["Azerbaijan (Azərbaycan)","az","994"],["Bahamas","bs","1",8,["242"]],["Bahrain (‫البحرين‬‎)","bh","973"],["Bangladesh (বাংলাদেশ)","bd","880"],["Barbados","bb","1",9,["246"]],["Belarus (Беларусь)","by","375"],["Belgium (Belgi\xeb)","be","32"],["Belize","bz","501"],["Benin (B\xe9nin)","bj","229"],["Bermuda","bm","1",10,["441"]],["Bhutan (འབྲུག)","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina (Босна и Херцеговина)","ba","387"],["Botswana","bw","267"],["Brazil (Brasil)","br","55"],["British Indian Ocean Territory","io","246"],["British Virgin Islands","vg","1",11,["284"]],["Brunei","bn","673"],["Bulgaria (България)","bg","359"],["Burkina Faso","bf","226"],["Burundi (Uburundi)","bi","257"],["Cambodia (កម្ពុជា)","kh","855"],["Cameroon (Cameroun)","cm","237"],["Canada","ca","1",1,["204","226","236","249","250","263","289","306","343","354","365","367","368","382","387","403","416","418","428","431","437","438","450","584","468","474","506","514","519","548","579","581","584","587","604","613","639","647","672","683","705","709","742","753","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde (Kabu Verdi)","cv","238"],["Caribbean Netherlands","bq","599",1,["3","4","7"]],["Cayman Islands","ky","1",12,["345"]],["Central African Republic (R\xe9publique centrafricaine)","cf","236"],["Chad (Tchad)","td","235"],["Chile","cl","56"],["China (中国)","cn","86"],["Christmas Island","cx","61",2,["89164"]],["Cocos (Keeling) Islands","cc","61",1,["89162"]],["Colombia","co","57"],["Comoros (‫جزر القمر‬‎)","km","269"],["Congo (DRC) (Jamhuri ya Kidemokrasia ya Kongo)","cd","243"],["Congo (Republic) (Congo-Brazzaville)","cg","242"],["Cook Islands","ck","682"],["Costa Rica","cr","506"],["C\xf4te d’Ivoire","ci","225"],["Croatia (Hrvatska)","hr","385"],["Cuba","cu","53"],["Cura\xe7ao","cw","599",0],["Cyprus (Κύπρος)","cy","357"],["Czech Republic (Česk\xe1 republika)","cz","420"],["Denmark (Danmark)","dk","45"],["Djibouti","dj","253"],["Dominica","dm","1",13,["767"]],["Dominican Republic (Rep\xfablica Dominicana)","do","1",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt (‫مصر‬‎)","eg","20"],["El Salvador","sv","503"],["Equatorial Guinea (Guinea Ecuatorial)","gq","240"],["Eritrea","er","291"],["Estonia (Eesti)","ee","372"],["Eswatini","sz","268"],["Ethiopia","et","251"],["Falkland Islands (Islas Malvinas)","fk","500"],["Faroe Islands (F\xf8royar)","fo","298"],["Fiji","fj","679"],["Finland (Suomi)","fi","358",0],["France","fr","33"],["French Guiana (Guyane fran\xe7aise)","gf","594"],["French Polynesia (Polyn\xe9sie fran\xe7aise)","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia (საქართველო)","ge","995"],["Germany (Deutschland)","de","49"],["Ghana (Gaana)","gh","233"],["Gibraltar","gi","350"],["Greece (Ελλάδα)","gr","30"],["Greenland (Kalaallit Nunaat)","gl","299"],["Grenada","gd","1",14,["473"]],["Guadeloupe","gp","590",0],["Guam","gu","1",15,["671"]],["Guatemala","gt","502"],["Guernsey","gg","44",1,["1481","7781","7839","7911"]],["Guinea (Guin\xe9e)","gn","224"],["Guinea-Bissau (Guin\xe9 Bissau)","gw","245"],["Guyana","gy","592"],["Haiti","ht","509"],["Honduras","hn","504"],["Hong Kong (香港)","hk","852"],["Hungary (Magyarorsz\xe1g)","hu","36"],["Iceland (\xcdsland)","is","354"],["India (भारत)","in","91"],["Indonesia","id","62"],["Iran (‫ایران‬‎)","ir","98"],["Iraq (‫العراق‬‎)","iq","964"],["Ireland","ie","353"],["Isle of Man","im","44",2,["1624","74576","7524","7924","7624"]],["Israel (‫ישראל‬‎)","il","972"],["Italy (Italia)","it","39",0],["Jamaica","jm","1",4,["876","658"]],["Japan (日本)","jp","81"],["Jersey","je","44",3,["1534","7509","7700","7797","7829","7937"]],["Jordan (‫الأردن‬‎)","jo","962"],["Kazakhstan (Казахстан)","kz","7",1,["33","7"]],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait (‫الكويت‬‎)","kw","965"],["Kyrgyzstan (Кыргызстан)","kg","996"],["Laos (ລາວ)","la","856"],["Latvia (Latvija)","lv","371"],["Lebanon (‫لبنان‬‎)","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya (‫ليبيا‬‎)","ly","218"],["Liechtenstein","li","423"],["Lithuania (Lietuva)","lt","370"],["Luxembourg","lu","352"],["Macau (澳門)","mo","853"],["Madagascar (Madagasikara)","mg","261"],["Malawi","mw","265"],["Malaysia","my","60"],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania (‫موريتانيا‬‎)","mr","222"],["Mauritius (Moris)","mu","230"],["Mayotte","yt","262",1,["269","639"]],["Mexico (M\xe9xico)","mx","52"],["Micronesia","fm","691"],["Moldova (Republica Moldova)","md","373"],["Monaco","mc","377"],["Mongolia (Монгол)","mn","976"],["Montenegro (Crna Gora)","me","382"],["Montserrat","ms","1",16,["664"]],["Morocco (‫المغرب‬‎)","ma","212",0],["Mozambique (Mo\xe7ambique)","mz","258"],["Myanmar (Burma) (မြန်မာ)","mm","95"],["Namibia (Namibi\xeb)","na","264"],["Nauru","nr","674"],["Nepal (नेपाल)","np","977"],["Netherlands (Nederland)","nl","31"],["New Caledonia (Nouvelle-Cal\xe9donie)","nc","687"],["New Zealand","nz","64"],["Nicaragua","ni","505"],["Niger (Nijar)","ne","227"],["Nigeria","ng","234"],["Niue","nu","683"],["Norfolk Island","nf","672"],["North Korea (조선 민주주의 인민 공화국)","kp","850"],["North Macedonia (Северна Македонија)","mk","389"],["Northern Mariana Islands","mp","1",17,["670"]],["Norway (Norge)","no","47",0],["Oman (‫عُمان‬‎)","om","968"],["Pakistan (‫پاکستان‬‎)","pk","92"],["Palau","pw","680"],["Palestine (‫فلسطين‬‎)","ps","970"],["Panama (Panam\xe1)","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru (Per\xfa)","pe","51"],["Philippines","ph","63"],["Poland (Polska)","pl","48"],["Portugal","pt","351"],["Puerto Rico","pr","1",3,["787","939"]],["Qatar (‫قطر‬‎)","qa","974"],["R\xe9union (La R\xe9union)","re","262",0],["Romania (Rom\xe2nia)","ro","40"],["Russia (Россия)","ru","7",0],["Rwanda","rw","250"],["Saint Barth\xe9lemy","bl","590",1],["Saint Helena","sh","290"],["Saint Kitts and Nevis","kn","1",18,["869"]],["Saint Lucia","lc","1",19,["758"]],["Saint Martin (Saint-Martin (partie fran\xe7aise))","mf","590",2],["Saint Pierre and Miquelon (Saint-Pierre-et-Miquelon)","pm","508"],["Saint Vincent and the Grenadines","vc","1",20,["784"]],["Samoa","ws","685"],["San Marino","sm","378"],["S\xe3o Tom\xe9 and Pr\xedncipe (S\xe3o Tom\xe9 e Pr\xedncipe)","st","239"],["Saudi Arabia (‫المملكة العربية السعودية‬‎)","sa","966"],["Senegal (S\xe9n\xe9gal)","sn","221"],["Serbia (Србија)","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65"],["Sint Maarten","sx","1",21,["721"]],["Slovakia (Slovensko)","sk","421"],["Slovenia (Slovenija)","si","386"],["Solomon Islands","sb","677"],["Somalia (Soomaaliya)","so","252"],["South Africa","za","27"],["South Korea (대한민국)","kr","82"],["South Sudan (‫جنوب السودان‬‎)","ss","211"],["Spain (Espa\xf1a)","es","34"],["Sri Lanka (ශ්‍රී ලංකාව)","lk","94"],["Sudan (‫السودان‬‎)","sd","249"],["Suriname","sr","597"],["Svalbard and Jan Mayen","sj","47",1,["79"]],["Sweden (Sverige)","se","46"],["Switzerland (Schweiz)","ch","41"],["Syria (‫سوريا‬‎)","sy","963"],["Taiwan (台灣)","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand (ไทย)","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tokelau","tk","690"],["Tonga","to","676"],["Trinidad and Tobago","tt","1",22,["868"]],["Tunisia (‫تونس‬‎)","tn","216"],["Turkey (T\xfcrkiye)","tr","90"],["Turkmenistan","tm","993"],["Turks and Caicos Islands","tc","1",23,["649"]],["Tuvalu","tv","688"],["U.S. Virgin Islands","vi","1",24,["340"]],["Uganda","ug","256"],["Ukraine (Україна)","ua","380"],["United Arab Emirates (‫الإمارات العربية المتحدة‬‎)","ae","971"],["United Kingdom","gb","44",0],["United States","us","1",0],["Uruguay","uy","598"],["Uzbekistan (Oʻzbekiston)","uz","998"],["Vanuatu","vu","678"],["Vatican City (Citt\xe0 del Vaticano)","va","39",1,["06698"]],["Venezuela","ve","58"],["Vietnam (Việt Nam)","vn","84"],["Wallis and Futuna (Wallis-et-Futuna)","wf","681"],["Western Sahara (‫الصحراء الغربية‬‎)","eh","212",1,["5288","5289"]],["Yemen (‫اليمن‬‎)","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"],["\xc5land Islands","ax","358",1,["18"]]],i=0;i<t.length;i++){var s=t[i];t[i]={name:s[0],iso2:s[1],dialCode:s[2],priority:s[3]||0,areaCodes:s[4]||null}}function n(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,o(s.key),s)}}function o(t){var i=function(t,i){if("object"!=typeof t||null===t)return t;var s=t[Symbol.toPrimitive];if(s!==e){var n=s.call(t,i||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(t)}(t,"string");return"symbol"==typeof i?i:String(i)}var r={getInstance:function(e){var t=e.getAttribute("data-intl-tel-input-id");return window.intlTelInputGlobals.instances[t]},instances:{},documentReady:function(){return"complete"===document.readyState}};"object"==typeof window&&(window.intlTelInputGlobals=r);var a=0,l={allowDropdown:!0,autoInsertDialCode:!1,autoPlaceholder:"polite",customContainer:"",customPlaceholder:null,dropdownContainer:null,excludeCountries:[],formatOnDisplay:!0,geoIpLookup:null,hiddenInput:"",initialCountry:"",localizedCountries:null,nationalMode:!0,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["us","gb"],separateDialCode:!1,showFlags:!0,utilsScript:""},u=["800","822","833","844","855","866","877","880","881","882","883","884","885","886","887","888","889"],h=function(e,t){for(var i=Object.keys(e),s=0;s<i.length;s++)t(i[s],e[i[s]])},c=function(e){h(window.intlTelInputGlobals.instances,function(t){window.intlTelInputGlobals.instances[t][e]()})},p=function(){var i,s;function r(e,t){var i=this;(function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")})(this,r),this.id=a++,this.telInput=e,this.activeItem=null,this.highlightedItem=null;var s=t||{};this.options={},h(l,function(e,t){i.options[e]=s.hasOwnProperty(e)?s[e]:t}),this.hadInitialPlaceholder=!!e.getAttribute("placeholder")}return i=[{key:"_init",value:function(){var e=this;this.options.nationalMode&&(this.options.autoInsertDialCode=!1),this.options.separateDialCode&&(this.options.autoInsertDialCode=!1);var t=this.options.allowDropdown&&!this.options.separateDialCode;if(!this.options.showFlags&&t&&(this.options.showFlags=!0),this.isMobile=/Android.+Mobile|webOS|iPhone|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),this.isMobile&&(document.body.classList.add("iti-mobile"),this.options.dropdownContainer||(this.options.dropdownContainer=document.body)),"undefined"!=typeof Promise){var i=new Promise(function(t,i){e.resolveAutoCountryPromise=t,e.rejectAutoCountryPromise=i}),s=new Promise(function(t,i){e.resolveUtilsScriptPromise=t,e.rejectUtilsScriptPromise=i});this.promise=Promise.all([i,s])}else this.resolveAutoCountryPromise=this.rejectAutoCountryPromise=function(){},this.resolveUtilsScriptPromise=this.rejectUtilsScriptPromise=function(){};this.selectedCountryData={},this._processCountryData(),this._generateMarkup(),this._setInitialState(),this._initListeners(),this._initRequests()}},{key:"_processCountryData",value:function(){this._processAllCountries(),this._processCountryCodes(),this._processPreferredCountries(),this.options.localizedCountries&&this._translateCountriesByLocale(),(this.options.onlyCountries.length||this.options.localizedCountries)&&this.countries.sort(this._countryNameSort)}},{key:"_addCountryCode",value:function(t,i,s){i.length>this.countryCodeMaxLen&&(this.countryCodeMaxLen=i.length),this.countryCodes.hasOwnProperty(i)||(this.countryCodes[i]=[]);for(var n=0;n<this.countryCodes[i].length;n++)if(this.countryCodes[i][n]===t)return;var o=s!==e?s:this.countryCodes[i].length;this.countryCodes[i][o]=t}},{key:"_processAllCountries",value:function(){if(this.options.onlyCountries.length){var e=this.options.onlyCountries.map(function(e){return e.toLowerCase()});this.countries=t.filter(function(t){return e.indexOf(t.iso2)>-1})}else if(this.options.excludeCountries.length){var i=this.options.excludeCountries.map(function(e){return e.toLowerCase()});this.countries=t.filter(function(e){return -1===i.indexOf(e.iso2)})}else this.countries=t}},{key:"_translateCountriesByLocale",value:function(){for(var e=0;e<this.countries.length;e++){var t=this.countries[e].iso2.toLowerCase();this.options.localizedCountries.hasOwnProperty(t)&&(this.countries[e].name=this.options.localizedCountries[t])}}},{key:"_countryNameSort",value:function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}},{key:"_processCountryCodes",value:function(){this.countryCodeMaxLen=0,this.dialCodes={},this.countryCodes={};for(var e=0;e<this.countries.length;e++){var t=this.countries[e];this.dialCodes[t.dialCode]||(this.dialCodes[t.dialCode]=!0),this._addCountryCode(t.iso2,t.dialCode,t.priority)}for(var i=0;i<this.countries.length;i++){var s=this.countries[i];if(s.areaCodes)for(var n=this.countryCodes[s.dialCode][0],o=0;o<s.areaCodes.length;o++){for(var r=s.areaCodes[o],a=1;a<r.length;a++){var l=s.dialCode+r.substr(0,a);this._addCountryCode(n,l),this._addCountryCode(s.iso2,l)}this._addCountryCode(s.iso2,s.dialCode+r)}}}},{key:"_processPreferredCountries",value:function(){this.preferredCountries=[];for(var e=0;e<this.options.preferredCountries.length;e++){var t=this.options.preferredCountries[e].toLowerCase(),i=this._getCountryData(t,!1,!0);i&&this.preferredCountries.push(i)}}},{key:"_createEl",value:function(e,t,i){var s=document.createElement(e);return t&&h(t,function(e,t){return s.setAttribute(e,t)}),i&&i.appendChild(s),s}},{key:"_generateMarkup",value:function(){this.telInput.hasAttribute("autocomplete")||this.telInput.form&&this.telInput.form.hasAttribute("autocomplete")||this.telInput.setAttribute("autocomplete","off");var e=this.options,t=e.allowDropdown,i=e.separateDialCode,s=e.showFlags,n=e.customContainer,r=e.hiddenInput,a=e.dropdownContainer,l="iti";t&&(l+=" iti--allow-dropdown"),i&&(l+=" iti--separate-dial-code"),s&&(l+=" iti--show-flags"),n&&(l+=" ".concat(n));var u=this._createEl("div",{class:l});this.telInput.parentNode.insertBefore(u,this.telInput);var h=t||s||i;if(h&&(this.flagsContainer=this._createEl("div",{class:"iti__flag-container"},u)),u.appendChild(this.telInput),h&&(this.selectedFlag=this._createEl("div",function(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?Object(arguments[t]):{},s=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&s.push.apply(s,Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable})),s.forEach(function(t){var s,n;s=t,n=i[t],(s=o(s))in e?Object.defineProperty(e,s,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[s]=n})}return e}({class:"iti__selected-flag"},t&&{role:"combobox","aria-haspopup":"listbox","aria-controls":"iti-".concat(this.id,"__country-listbox"),"aria-expanded":"false","aria-label":"Telephone country code"}),this.flagsContainer)),s&&(this.selectedFlagInner=this._createEl("div",{class:"iti__flag"},this.selectedFlag)),this.selectedFlag&&this.telInput.disabled&&this.selectedFlag.setAttribute("aria-disabled","true"),i&&(this.selectedDialCode=this._createEl("div",{class:"iti__selected-dial-code"},this.selectedFlag)),t&&(this.telInput.disabled||this.selectedFlag.setAttribute("tabindex","0"),this.dropdownArrow=this._createEl("div",{class:"iti__arrow"},this.selectedFlag),this.countryList=this._createEl("ul",{class:"iti__country-list iti__hide",id:"iti-".concat(this.id,"__country-listbox"),role:"listbox","aria-label":"List of countries"}),this.preferredCountries.length&&(this._appendListItems(this.preferredCountries,"iti__preferred",!0),this._createEl("li",{class:"iti__divider",role:"separator","aria-disabled":"true"},this.countryList)),this._appendListItems(this.countries,"iti__standard"),a?(this.dropdown=this._createEl("div",{class:"iti iti--container"}),this.dropdown.appendChild(this.countryList)):this.flagsContainer.appendChild(this.countryList)),r){var c=r,p=this.telInput.getAttribute("name");if(p){var d=p.lastIndexOf("[");-1!==d&&(c="".concat(p.substr(0,d),"[").concat(c,"]"))}this.hiddenInput=this._createEl("input",{type:"hidden",name:c}),u.appendChild(this.hiddenInput)}}},{key:"_appendListItems",value:function(e,t,i){for(var s="",n=0;n<e.length;n++){var o=e[n],r=i?"-preferred":"";s+="<li class='iti__country ".concat(t,"' tabIndex='-1' id='iti-").concat(this.id,"__item-").concat(o.iso2).concat(r,"' role='option' data-dial-code='").concat(o.dialCode,"' data-country-code='").concat(o.iso2,"' aria-selected='false'>"),this.options.showFlags&&(s+="<div class='iti__flag-box'><div class='iti__flag iti__".concat(o.iso2,"'></div></div>")),s+="<span class='iti__country-name'>".concat(o.name,"</span>")+"<span class='iti__dial-code'>+".concat(o.dialCode,"</span>")+"</li>"}this.countryList.insertAdjacentHTML("beforeend",s)}},{key:"_setInitialState",value:function(){var e=this.telInput.getAttribute("value"),t=this.telInput.value,i=e&&"+"===e.charAt(0)&&(!t||"+"!==t.charAt(0))?e:t,s=this._getDialCode(i),n=this._isRegionlessNanp(i),o=this.options,r=o.initialCountry,a=o.autoInsertDialCode;s&&!n?this._updateFlagFromNumber(i):"auto"!==r&&(r?this._setFlag(r.toLowerCase()):s&&n?this._setFlag("us"):(this.defaultCountry=this.preferredCountries.length?this.preferredCountries[0].iso2:this.countries[0].iso2,i||this._setFlag(this.defaultCountry)),!i&&a&&(this.telInput.value="+".concat(this.selectedCountryData.dialCode))),i&&this._updateValFromNumber(i)}},{key:"_initListeners",value:function(){this._initKeyListeners(),this.options.autoInsertDialCode&&this._initBlurListeners(),this.options.allowDropdown&&this._initDropdownListeners(),this.hiddenInput&&this._initHiddenInputListener()}},{key:"_initHiddenInputListener",value:function(){var e=this;this._handleHiddenInputSubmit=function(){e.hiddenInput.value=e.getNumber()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleHiddenInputSubmit)}},{key:"_getClosestLabel",value:function(){for(var e=this.telInput;e&&"LABEL"!==e.tagName;)e=e.parentNode;return e}},{key:"_initDropdownListeners",value:function(){var e=this;this._handleLabelClick=function(t){e.countryList.classList.contains("iti__hide")?e.telInput.focus():t.preventDefault()};var t=this._getClosestLabel();t&&t.addEventListener("click",this._handleLabelClick),this._handleClickSelectedFlag=function(){!e.countryList.classList.contains("iti__hide")||e.telInput.disabled||e.telInput.readOnly||e._showDropdown()},this.selectedFlag.addEventListener("click",this._handleClickSelectedFlag),this._handleFlagsContainerKeydown=function(t){e.countryList.classList.contains("iti__hide")&&-1!==["ArrowUp","Up","ArrowDown","Down"," ","Enter"].indexOf(t.key)&&(t.preventDefault(),t.stopPropagation(),e._showDropdown()),"Tab"===t.key&&e._closeDropdown()},this.flagsContainer.addEventListener("keydown",this._handleFlagsContainerKeydown)}},{key:"_initRequests",value:function(){var e=this;this.options.utilsScript&&!window.intlTelInputUtils?window.intlTelInputGlobals.documentReady()?window.intlTelInputGlobals.loadUtils(this.options.utilsScript):window.addEventListener("load",function(){window.intlTelInputGlobals.loadUtils(e.options.utilsScript)}):this.resolveUtilsScriptPromise(),"auto"===this.options.initialCountry?this._loadAutoCountry():this.resolveAutoCountryPromise()}},{key:"_loadAutoCountry",value:function(){window.intlTelInputGlobals.autoCountry?this.handleAutoCountry():window.intlTelInputGlobals.startedLoadingAutoCountry||(window.intlTelInputGlobals.startedLoadingAutoCountry=!0,"function"==typeof this.options.geoIpLookup&&this.options.geoIpLookup(function(e){window.intlTelInputGlobals.autoCountry=e.toLowerCase(),setTimeout(function(){return c("handleAutoCountry")})},function(){return c("rejectAutoCountryPromise")}))}},{key:"_initKeyListeners",value:function(){var e=this;this._handleKeyupEvent=function(){e._updateFlagFromNumber(e.telInput.value)&&e._triggerCountryChange()},this.telInput.addEventListener("keyup",this._handleKeyupEvent),this._handleClipboardEvent=function(){setTimeout(e._handleKeyupEvent)},this.telInput.addEventListener("cut",this._handleClipboardEvent),this.telInput.addEventListener("paste",this._handleClipboardEvent)}},{key:"_cap",value:function(e){var t=this.telInput.getAttribute("maxlength");return t&&e.length>t?e.substr(0,t):e}},{key:"_initBlurListeners",value:function(){var e=this;this._handleSubmitOrBlurEvent=function(){e._removeEmptyDialCode()},this.telInput.form&&this.telInput.form.addEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.addEventListener("blur",this._handleSubmitOrBlurEvent)}},{key:"_removeEmptyDialCode",value:function(){if("+"===this.telInput.value.charAt(0)){var e=this._getNumeric(this.telInput.value);e&&this.selectedCountryData.dialCode!==e||(this.telInput.value="")}}},{key:"_getNumeric",value:function(e){return e.replace(/\D/g,"")}},{key:"_trigger",value:function(e){var t=document.createEvent("Event");t.initEvent(e,!0,!0),this.telInput.dispatchEvent(t)}},{key:"_showDropdown",value:function(){this.countryList.classList.remove("iti__hide"),this.selectedFlag.setAttribute("aria-expanded","true"),this._setDropdownPosition(),this.activeItem&&(this._highlightListItem(this.activeItem,!1),this._scrollTo(this.activeItem,!0)),this._bindDropdownListeners(),this.dropdownArrow.classList.add("iti__arrow--up"),this._trigger("open:countrydropdown")}},{key:"_toggleClass",value:function(e,t,i){i&&!e.classList.contains(t)?e.classList.add(t):!i&&e.classList.contains(t)&&e.classList.remove(t)}},{key:"_setDropdownPosition",value:function(){var e=this;if(this.options.dropdownContainer&&this.options.dropdownContainer.appendChild(this.dropdown),!this.isMobile){var t=this.telInput.getBoundingClientRect(),i=window.pageYOffset||document.documentElement.scrollTop,s=t.top+i,n=this.countryList.offsetHeight,o=s+this.telInput.offsetHeight+n<i+window.innerHeight,r=s-n>i;if(this._toggleClass(this.countryList,"iti__country-list--dropup",!o&&r),this.options.dropdownContainer){var a=!o&&r?0:this.telInput.offsetHeight;this.dropdown.style.top="".concat(s+a,"px"),this.dropdown.style.left="".concat(t.left+document.body.scrollLeft,"px"),this._handleWindowScroll=function(){return e._closeDropdown()},window.addEventListener("scroll",this._handleWindowScroll)}}}},{key:"_getClosestListItem",value:function(e){for(var t=e;t&&t!==this.countryList&&!t.classList.contains("iti__country");)t=t.parentNode;return t===this.countryList?null:t}},{key:"_bindDropdownListeners",value:function(){var e=this;this._handleMouseoverCountryList=function(t){var i=e._getClosestListItem(t.target);i&&e._highlightListItem(i,!1)},this.countryList.addEventListener("mouseover",this._handleMouseoverCountryList),this._handleClickCountryList=function(t){var i=e._getClosestListItem(t.target);i&&e._selectListItem(i)},this.countryList.addEventListener("click",this._handleClickCountryList);var t=!0;this._handleClickOffToClose=function(){t||e._closeDropdown(),t=!1},document.documentElement.addEventListener("click",this._handleClickOffToClose);var i="",s=null;this._handleKeydownOnDropdown=function(t){t.preventDefault(),"ArrowUp"===t.key||"Up"===t.key||"ArrowDown"===t.key||"Down"===t.key?e._handleUpDownKey(t.key):"Enter"===t.key?e._handleEnterKey():"Escape"===t.key?e._closeDropdown():/^[a-zA-ZÀ-ÿа-яА-Я ]$/.test(t.key)&&(s&&clearTimeout(s),i+=t.key.toLowerCase(),e._searchForCountry(i),s=setTimeout(function(){i=""},1e3))},document.addEventListener("keydown",this._handleKeydownOnDropdown)}},{key:"_handleUpDownKey",value:function(e){var t="ArrowUp"===e||"Up"===e?this.highlightedItem.previousElementSibling:this.highlightedItem.nextElementSibling;t&&(t.classList.contains("iti__divider")&&(t="ArrowUp"===e||"Up"===e?t.previousElementSibling:t.nextElementSibling),this._highlightListItem(t,!0))}},{key:"_handleEnterKey",value:function(){this.highlightedItem&&this._selectListItem(this.highlightedItem)}},{key:"_searchForCountry",value:function(e){for(var t=0;t<this.countries.length;t++)if(this._startsWith(this.countries[t].name,e)){var i=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(this.countries[t].iso2));this._highlightListItem(i,!1),this._scrollTo(i,!0);break}}},{key:"_startsWith",value:function(e,t){return e.substr(0,t.length).toLowerCase()===t}},{key:"_updateValFromNumber",value:function(e){var t=e;if(this.options.formatOnDisplay&&window.intlTelInputUtils&&this.selectedCountryData){var i=this.options.nationalMode||"+"!==t.charAt(0)&&!this.options.separateDialCode,s=intlTelInputUtils.numberFormat,n=s.NATIONAL,o=s.INTERNATIONAL,r=i?n:o;t=intlTelInputUtils.formatNumber(t,this.selectedCountryData.iso2,r)}t=this._beforeSetNumber(t),this.telInput.value=t}},{key:"_updateFlagFromNumber",value:function(e){var t=e,i=this.selectedCountryData.dialCode;t&&"1"===i&&"+"!==t.charAt(0)&&("1"!==t.charAt(0)&&(t="1".concat(t)),t="+".concat(t)),this.options.separateDialCode&&i&&"+"!==t.charAt(0)&&(t="+".concat(i).concat(t));var s=this._getDialCode(t,!0),n=this._getNumeric(t),o=null;if(s){var r=this.countryCodes[this._getNumeric(s)],a=-1!==r.indexOf(this.selectedCountryData.iso2)&&n.length<=s.length-1;if(!("1"===i&&this._isRegionlessNanp(n))&&!a){for(var l=0;l<r.length;l++)if(r[l]){o=r[l];break}}}else"+"===t.charAt(0)&&n.length?o="":t&&"+"!==t||(o=this.defaultCountry);return null!==o&&this._setFlag(o)}},{key:"_isRegionlessNanp",value:function(e){var t=this._getNumeric(e);if("1"===t.charAt(0)){var i=t.substr(1,3);return -1!==u.indexOf(i)}return!1}},{key:"_highlightListItem",value:function(e,t){var i=this.highlightedItem;i&&i.classList.remove("iti__highlight"),this.highlightedItem=e,this.highlightedItem.classList.add("iti__highlight"),this.selectedFlag.setAttribute("aria-activedescendant",e.getAttribute("id")),t&&this.highlightedItem.focus()}},{key:"_getCountryData",value:function(e,i,s){for(var n=i?t:this.countries,o=0;o<n.length;o++)if(n[o].iso2===e)return n[o];if(s)return null;throw Error("No country data for '".concat(e,"'"))}},{key:"_setFlag",value:function(e){var t=this.options,i=t.allowDropdown,s=t.separateDialCode,n=t.showFlags,o=this.selectedCountryData.iso2?this.selectedCountryData:{};if(this.selectedCountryData=e?this._getCountryData(e,!1,!1):{},this.selectedCountryData.iso2&&(this.defaultCountry=this.selectedCountryData.iso2),n&&this.selectedFlagInner.setAttribute("class","iti__flag iti__".concat(e)),this._setSelectedCountryFlagTitleAttribute(e,s),s){var r=this.selectedCountryData.dialCode?"+".concat(this.selectedCountryData.dialCode):"";this.selectedDialCode.innerHTML=r;var a=this.selectedFlag.offsetWidth||this._getHiddenSelectedFlagWidth();this.telInput.style.paddingLeft="".concat(a+6,"px")}if(this._updatePlaceholder(),i){var l=this.activeItem;if(l&&(l.classList.remove("iti__active"),l.setAttribute("aria-selected","false")),e){var u=this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(e,"-preferred"))||this.countryList.querySelector("#iti-".concat(this.id,"__item-").concat(e));u.setAttribute("aria-selected","true"),u.classList.add("iti__active"),this.activeItem=u}}return o.iso2!==e}},{key:"_setSelectedCountryFlagTitleAttribute",value:function(e,t){var i;this.selectedFlag&&(i=e&&!t?"".concat(this.selectedCountryData.name,": +").concat(this.selectedCountryData.dialCode):e?this.selectedCountryData.name:"Unknown",this.selectedFlag.setAttribute("title",i))}},{key:"_getHiddenSelectedFlagWidth",value:function(){var e=this.telInput.parentNode.cloneNode();e.style.visibility="hidden",document.body.appendChild(e);var t=this.flagsContainer.cloneNode();e.appendChild(t);var i=this.selectedFlag.cloneNode(!0);t.appendChild(i);var s=i.offsetWidth;return e.parentNode.removeChild(e),s}},{key:"_updatePlaceholder",value:function(){var e="aggressive"===this.options.autoPlaceholder||!this.hadInitialPlaceholder&&"polite"===this.options.autoPlaceholder;if(window.intlTelInputUtils&&e){var t=intlTelInputUtils.numberType[this.options.placeholderNumberType],i=this.selectedCountryData.iso2?intlTelInputUtils.getExampleNumber(this.selectedCountryData.iso2,this.options.nationalMode,t):"";i=this._beforeSetNumber(i),"function"==typeof this.options.customPlaceholder&&(i=this.options.customPlaceholder(i,this.selectedCountryData)),this.telInput.setAttribute("placeholder",i)}}},{key:"_selectListItem",value:function(e){var t=this._setFlag(e.getAttribute("data-country-code"));this._closeDropdown(),this._updateDialCode(e.getAttribute("data-dial-code")),this.telInput.focus();var i=this.telInput.value.length;this.telInput.setSelectionRange(i,i),t&&this._triggerCountryChange()}},{key:"_closeDropdown",value:function(){this.countryList.classList.add("iti__hide"),this.selectedFlag.setAttribute("aria-expanded","false"),this.selectedFlag.removeAttribute("aria-activedescendant"),this.dropdownArrow.classList.remove("iti__arrow--up"),document.removeEventListener("keydown",this._handleKeydownOnDropdown),document.documentElement.removeEventListener("click",this._handleClickOffToClose),this.countryList.removeEventListener("mouseover",this._handleMouseoverCountryList),this.countryList.removeEventListener("click",this._handleClickCountryList),this.options.dropdownContainer&&(this.isMobile||window.removeEventListener("scroll",this._handleWindowScroll),this.dropdown.parentNode&&this.dropdown.parentNode.removeChild(this.dropdown)),this._trigger("close:countrydropdown")}},{key:"_scrollTo",value:function(e,t){var i=this.countryList,s=window.pageYOffset||document.documentElement.scrollTop,n=i.offsetHeight,o=i.getBoundingClientRect().top+s,r=e.offsetHeight,a=e.getBoundingClientRect().top+s,l=a-o+i.scrollTop,u=n/2-r/2;a<o?(t&&(l-=u),i.scrollTop=l):a+r>o+n&&(t&&(l+=u),i.scrollTop=l-(n-r))}},{key:"_updateDialCode",value:function(e){var t,i=this.telInput.value,s="+".concat(e);if("+"===i.charAt(0)){var n=this._getDialCode(i);t=n?i.replace(n,s):s,this.telInput.value=t}else this.options.autoInsertDialCode&&(t=i?s+i:s,this.telInput.value=t)}},{key:"_getDialCode",value:function(e,t){var i="";if("+"===e.charAt(0))for(var s="",n=0;n<e.length;n++){var o=e.charAt(n);if(!isNaN(parseInt(o,10))){if(s+=o,t)this.countryCodes[s]&&(i=e.substr(0,n+1));else if(this.dialCodes[s]){i=e.substr(0,n+1);break}if(s.length===this.countryCodeMaxLen)break}}return i}},{key:"_getFullNumber",value:function(){var e=this.telInput.value.trim(),t=this.selectedCountryData.dialCode,i=this._getNumeric(e);return(this.options.separateDialCode&&"+"!==e.charAt(0)&&t&&i?"+".concat(t):"")+e}},{key:"_beforeSetNumber",value:function(e){var t=e;if(this.options.separateDialCode){var i=this._getDialCode(t);if(i){var s=" "===t[(i="+".concat(this.selectedCountryData.dialCode)).length]||"-"===t[i.length]?i.length+1:i.length;t=t.substr(s)}}return this._cap(t)}},{key:"_triggerCountryChange",value:function(){this._trigger("countrychange")}},{key:"handleAutoCountry",value:function(){"auto"===this.options.initialCountry&&(this.defaultCountry=window.intlTelInputGlobals.autoCountry,this.telInput.value||this.setCountry(this.defaultCountry),this.resolveAutoCountryPromise())}},{key:"handleUtils",value:function(){window.intlTelInputUtils&&(this.telInput.value&&this._updateValFromNumber(this.telInput.value),this._updatePlaceholder()),this.resolveUtilsScriptPromise()}},{key:"destroy",value:function(){var e=this.telInput.form;if(this.options.allowDropdown){this._closeDropdown(),this.selectedFlag.removeEventListener("click",this._handleClickSelectedFlag),this.flagsContainer.removeEventListener("keydown",this._handleFlagsContainerKeydown);var t=this._getClosestLabel();t&&t.removeEventListener("click",this._handleLabelClick)}this.hiddenInput&&e&&e.removeEventListener("submit",this._handleHiddenInputSubmit),this.options.autoInsertDialCode&&(e&&e.removeEventListener("submit",this._handleSubmitOrBlurEvent),this.telInput.removeEventListener("blur",this._handleSubmitOrBlurEvent)),this.telInput.removeEventListener("keyup",this._handleKeyupEvent),this.telInput.removeEventListener("cut",this._handleClipboardEvent),this.telInput.removeEventListener("paste",this._handleClipboardEvent),this.telInput.removeAttribute("data-intl-tel-input-id");var i=this.telInput.parentNode;i.parentNode.insertBefore(this.telInput,i),i.parentNode.removeChild(i),delete window.intlTelInputGlobals.instances[this.id]}},{key:"getExtension",value:function(){return window.intlTelInputUtils?intlTelInputUtils.getExtension(this._getFullNumber(),this.selectedCountryData.iso2):""}},{key:"getNumber",value:function(e){if(window.intlTelInputUtils){var t=this.selectedCountryData.iso2;return intlTelInputUtils.formatNumber(this._getFullNumber(),t,e)}return""}},{key:"getNumberType",value:function(){return window.intlTelInputUtils?intlTelInputUtils.getNumberType(this._getFullNumber(),this.selectedCountryData.iso2):-99}},{key:"getSelectedCountryData",value:function(){return this.selectedCountryData}},{key:"getValidationError",value:function(){if(window.intlTelInputUtils){var e=this.selectedCountryData.iso2;return intlTelInputUtils.getValidationError(this._getFullNumber(),e)}return -99}},{key:"isValidNumber",value:function(){var e=this._getFullNumber().trim();return window.intlTelInputUtils?intlTelInputUtils.isValidNumber(e,this.selectedCountryData.iso2):null}},{key:"setCountry",value:function(e){var t=e.toLowerCase();this.selectedCountryData.iso2!==t&&(this._setFlag(t),this._updateDialCode(this.selectedCountryData.dialCode),this._triggerCountryChange())}},{key:"setNumber",value:function(e){var t=this._updateFlagFromNumber(e);this._updateValFromNumber(e),t&&this._triggerCountryChange()}},{key:"setPlaceholderNumberType",value:function(e){this.options.placeholderNumberType=e,this._updatePlaceholder()}}],n(r.prototype,i),s&&n(r,s),Object.defineProperty(r,"prototype",{writable:!1}),r}();r.getCountryData=function(){return t};var d=function(e,t,i){var s=document.createElement("script");s.onload=function(){c("handleUtils"),t&&t()},s.onerror=function(){c("rejectUtilsScriptPromise"),i&&i()},s.className="iti-load-utils",s.async=!0,s.src=e,document.body.appendChild(s)};return r.loadUtils=function(e){if(!window.intlTelInputUtils&&!window.intlTelInputGlobals.startedLoadingUtilsScript){if(window.intlTelInputGlobals.startedLoadingUtilsScript=!0,"undefined"!=typeof Promise)return new Promise(function(t,i){return d(e,t,i)});d(e)}return null},r.defaults=l,r.version="18.1.7",function(e,t){var i=new p(e,t);return i._init(),e.setAttribute("data-intl-tel-input-id",i.id),window.intlTelInputGlobals.instances[i.id]=i,i}}()},e.exports?e.exports=i():window.intlTelInput=i()}),function(){"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}function t(e){return(t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i,s=function(){var i;function s(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,s)}return i=[{key:"getString",value:function(e){return e||0===e?e.toString():""}},{key:"convertToBoolean",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return!0===e||"true"===e||!1!==e&&"false"!==e&&t}},{key:"isEmpty",value:function(e){var i=!1;return e?Array.isArray(e)?0===e.length&&(i=!0):"object"===t(e)&&0===Object.keys(e).length&&(i=!0):i=!0,i}},{key:"isNotEmpty",value:function(e){return!this.isEmpty(e)}},{key:"removeItemFromArray",value:function(t,i){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!Array.isArray(t)||!t.length)return t;var n=s?function(t){if(Array.isArray(t))return e(t)}(t)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||function(t,i){if(t){if("string"==typeof t)return e(t,i);var s=Object.prototype.toString.call(t).slice(8,-1);if("Object"===s&&t.constructor&&(s=t.constructor.name),"Map"===s||"Set"===s)return Array.from(t);if("Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return e(t,i)}}(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}():t,o=n.indexOf(i);return -1!==o&&n.splice(o,1),n}},{key:"removeArrayEmpty",value:function(e){return Array.isArray(e)&&e.length?e.filter(function(e){return!!e}):[]}},{key:"getRandomInt",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=Math.ceil(t);return Math.floor(Math.random()*(Math.floor(e)-i-1))+i}},{key:"regexEscape",value:function(e){return e.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&")}},{key:"normalizeString",value:function(e){return e.normalize("NFD").replace(/[^\w]/g,"")}}],function(e,i){for(var s=0;s<i.length;s++){var n=i[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,function(e){var i=function(e,i){if("object"!==t(e)||null===e)return e;var s=e[Symbol.toPrimitive];if(void 0!==s){var n=s.call(e,i||"default");if("object"!==t(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===i?String:Number)(e)}(e,"string");return"symbol"===t(i)?i:String(i)}(n.key),n)}}(s,i),Object.defineProperty(s,"prototype",{writable:!1}),s}();function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function o(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||r(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){if(e){if("string"==typeof e)return a(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return a(e,t)}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}var l=function(){var e;function t(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t)}return e=[{key:"addClass",value:function(e,i){if(e){var s=i.split(" ");t.getElements(e).forEach(function(e){var t;(t=e.classList).add.apply(t,o(s))})}}},{key:"removeClass",value:function(e,i){if(e){var s=i.split(" ");t.getElements(e).forEach(function(e){var t;(t=e.classList).remove.apply(t,o(s))})}}},{key:"toggleClass",value:function(e,i,s){var n;e&&(void 0!==s&&(n=!!s),t.getElements(e).forEach(function(e){e.classList.toggle(i,n)}))}},{key:"hasClass",value:function(e,t){return!!e&&e.classList.contains(t)}},{key:"hasEllipsis",value:function(e){return!!e&&e.scrollWidth>e.offsetWidth}},{key:"getData",value:function(e,t,i){if(e){var s=e?e.dataset[t]:"";return"number"===i?s=parseFloat(s)||0:"true"===s?s=!0:"false"===s&&(s=!1),s}}},{key:"setData",value:function(e,t,i){e&&(e.dataset[t]=i)}},{key:"setAttr",value:function(e,t,i){e&&e.setAttribute(t,i)}},{key:"setAttrFromEle",value:function(e,t,i,s){var n={};i.forEach(function(t){n[t]=e.getAttribute(t)}),i.forEach(function(e){var i=n[e];(i||-1!==s.indexOf(e)&&""===i)&&t.setAttribute(e,i)})}},{key:"setStyle",value:function(e,t,i){e&&(e.style[t]=i)}},{key:"setStyles",value:function(e,t){e&&t&&Object.keys(t).forEach(function(i){e.style[i]=t[i]})}},{key:"setAria",value:function(e,t,i){var s=t;"role"!==s&&(s="aria-".concat(s)),e.setAttribute(s,i)}},{key:"getElements",value:function(e){return e?void 0===e.forEach?[e]:e:[]}},{key:"addEvent",value:function(e,i,n){e&&s.removeArrayEmpty(i.split(" ")).forEach(function(i){t.getElements(e).forEach(function(e){e.addEventListener(i,n)})})}},{key:"dispatchEvent",value:function(e,i){var s=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e){var n=t.getElements(e);setTimeout(function(){n.forEach(function(e){e.dispatchEvent(new CustomEvent(i,{bubbles:s}))})},0)}}},{key:"getAttributesText",value:function(e){var t="";return e&&Object.entries(e).forEach(function(e){var i=function(e){if(Array.isArray(e))return e}(e)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var s,n,o,r,a=[],l=!0,u=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(s=o.call(i)).done)&&(a.push(s.value),a.length!==t);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(u)throw n}}return a}}(e,2)||r(e,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),s=i[0],n=i[1];void 0!==n&&(t+=" ".concat(s,'="').concat(n,'" '))}),t}},{key:"convertPropToDataAttr",value:function(e){return e?"data-".concat(e).replace(/([A-Z])/g,"-$1").toLowerCase():""}},{key:"changeTabIndex",value:function(e,i){if(!e){console.log(e,"Invalid element provided.");return}t.getElements(e).forEach(function(e){e.tabIndex=i})}}],function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,function(e){var t=function(e,t){if("object"!==n(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!==n(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===n(t)?t:String(t)}(s.key),s)}}(t,e),Object.defineProperty(t,"prototype",{writable:!1}),t}();function u(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),i.push.apply(i,s)}return i}function h(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?u(Object(i),!0).forEach(function(t){c(e,t,i[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):u(Object(i)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))})}return e}function c(e,t,i){return(t=g(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return v(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return v(e,t)}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}function m(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,g(s.key),s)}}function g(e){var t=function(e,t){if("object"!==p(e)||null===e)return e;var i=e[Symbol.toPrimitive];if(void 0!==i){var s=i.call(e,t||"default");if("object"!==p(s))return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===p(t)?t:String(t)}var y={13:"onEnterPress",38:"onUpArrowPress",40:"onDownArrowPress"},b=["autofocus","disabled","multiple","required"],S=["autofocus","class","disabled","id","multiple","name","placeholder","required"],k=["additionalClasses","aliasKey","allOptionsSelectedText","allowNewOption","alwaysShowSelectedOptionsCount","alwaysShowSelectedOptionsLabel","ariaLabelledby","ariaLabelText","autoSelectFirstOption","clearButtonText","descriptionKey","disableAllOptionsSelectedText","disableOptionGroupCheckbox","disableSelectAll","disableValidation","dropboxWidth","dropboxWrapper","emptyValue","enableSecureText","focusSelectedOptionOnOpen","hasOptionDescription","hideClearButton","hideValueTooltipOnSelectAll","keepAlwaysOpen","labelKey","markSearchResults","maxValues","maxWidth","minValues","moreText","noOfDisplayValues","noOptionsText","noSearchResultsText","optionHeight","optionSelectedText","optionsCount","optionsSelectedText","popupDropboxBreakpoint","popupPosition","position","search","searchByStartsWith","searchDelay","searchFormLabel","searchGroup","searchNormalize","searchPlaceholderText","selectAllOnlyVisible","selectAllText","setValueAsArray","showDropboxAsPopup","showOptionsOnlyOnSearch","showSelectedOptionsFirst","showValueAsTags","silentInitialValueSet","textDirection","tooltipAlignment","tooltipFontSize","tooltipMaxWidth","updatePositionThrottle","useGroupValue","valueKey","zIndex"],C=function(){var e,t;function n(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n);try{this.createSecureTextElements(),this.setProps(e),this.setDisabledOptions(e.disabledOptions),this.setOptions(e.options),this.render()}catch(e){console.warn("Couldn't initiate Virtual Select"),console.error(e)}}return e=[{key:"render",value:function(){if(this.$ele){var e=this.uniqueId,t="vscomp-wrapper",i=this.getTooltipAttrText(this.placeholder,!0,!0),s=this.getTooltipAttrText(this.clearButtonText),n=this.ariaLabelledby?'aria-labelledby="'.concat(this.ariaLabelledby,'"'):"",o=this.ariaLabelText?'aria-label="'.concat(this.ariaLabelText,'"'):"",r=!1;this.additionalClasses&&(t+=" ".concat(this.additionalClasses)),this.multiple&&(t+=" multiple",this.disableSelectAll||(t+=" has-select-all")),this.hideClearButton||(t+=" has-clear-button"),this.keepAlwaysOpen?(t+=" keep-always-open",r=!0):t+=" closed",this.showAsPopup&&(t+=" show-as-popup"),this.hasSearch&&(t+=" has-search-input"),this.showValueAsTags&&(t+=" show-value-as-tags"),this.textDirection&&(t+=" text-direction-".concat(this.textDirection)),this.popupPosition&&(t+=" popup-position-".concat(this.popupPosition.toLowerCase()));var a='<div id="vscomp-ele-wrapper-'.concat(e,'" class="vscomp-ele-wrapper ').concat(t,'" tabindex="0"\n        role="combobox" aria-haspopup="listbox" aria-controls="vscomp-dropbox-container-').concat(e,'"\n        aria-expanded="').concat(r,'" ').concat(n," ").concat(o,'\n      >\n        <input type="hidden" name="').concat(this.name,'" class="vscomp-hidden-input">\n\n        <div class="vscomp-toggle-button">\n          <div class="vscomp-value" ').concat(i,">\n            ").concat(this.placeholder,'\n          </div>\n\n          <div class="vscomp-arrow"></div>\n\n          <div class="vscomp-clear-button toggle-button-child" ').concat(s,'>\n            <i class="vscomp-clear-icon"></i>\n          </div>\n        </div>\n\n        <section role="region" class="vscomp-live-region" aria-live="polite">\n          <p class="vscomp-live-region-title"></p>\n        </section>\n\n        ').concat(this.renderDropbox({wrapperClasses:t}),"\n      </div>");this.$ele.innerHTML=a,this.$body=document.querySelector("body"),this.$wrapper=this.$ele.querySelector(".vscomp-wrapper"),this.$ariaLiveElem=this.$ele.querySelector(".vscomp-live-region-title"),this.hasDropboxWrapper?(this.$allWrappers=[this.$wrapper,this.$dropboxWrapper],this.$dropboxContainer=this.$dropboxWrapper.querySelector(".vscomp-dropbox-container"),l.addClass(this.$dropboxContainer,"pop-comp-wrapper")):(this.$allWrappers=[this.$wrapper],this.$dropboxContainer=this.$wrapper.querySelector(".vscomp-dropbox-container")),this.$toggleButton=this.$ele.querySelector(".vscomp-toggle-button"),this.$clearButton=this.$ele.querySelector(".vscomp-clear-button"),this.$valueText=this.$ele.querySelector(".vscomp-value"),this.$hiddenInput=this.$ele.querySelector(".vscomp-hidden-input"),this.$dropbox=this.$dropboxContainer.querySelector(".vscomp-dropbox"),this.$dropboxCloseButton=this.$dropboxContainer.querySelector(".vscomp-dropbox-close-button"),this.$search=this.$dropboxContainer.querySelector(".vscomp-search-wrapper"),this.$optionsContainer=this.$dropboxContainer.querySelector(".vscomp-options-container"),this.$optionsList=this.$dropboxContainer.querySelector(".vscomp-options-list"),this.$options=this.$dropboxContainer.querySelector(".vscomp-options"),this.$noOptions=this.$dropboxContainer.querySelector(".vscomp-no-options"),this.$noSearchResults=this.$dropboxContainer.querySelector(".vscomp-no-search-results"),this.afterRenderWrapper()}}},{key:"renderDropbox",value:function(e){var t=e.wrapperClasses,i="self"!==this.dropboxWrapper?document.querySelector(this.dropboxWrapper):null,s='<div id="vscomp-dropbox-container-'.concat(this.uniqueId,'" role="listbox" class="vscomp-dropbox-container">\n        <div class="vscomp-dropbox">\n          <div class="vscomp-search-wrapper"></div>\n\n          <div class="vscomp-options-container">\n            <div class="vscomp-options-loader"></div>\n\n            <div class="vscomp-options-list">\n              <div class="vscomp-options"></div>\n            </div>\n          </div>\n\n          <div class="vscomp-options-bottom-freezer"></div>\n          <div class="vscomp-no-options">').concat(this.noOptionsText,'</div>\n          <div class="vscomp-no-search-results">').concat(this.noSearchResultsText,'</div>\n\n          <span class="vscomp-dropbox-close-button"><i class="vscomp-clear-icon"></i></span>\n        </div>\n      </div>\n');if(i){var n=document.createElement("div");return this.$dropboxWrapper=n,this.hasDropboxWrapper=!0,n.innerHTML=s,i.appendChild(n),l.addClass(n,"vscomp-dropbox-wrapper ".concat(t)),""}return this.hasDropboxWrapper=!1,s}},{key:"renderOptions",value:function(){var e,t=this,i="",n=this.getVisibleOptions(),o="",r="",a=!!(this.markSearchResults&&this.searchValue),l=this.labelRenderer,u=this.disableOptionGroupCheckbox,h=this.uniqueId,c=this.searchGroup,p="function"==typeof l,d=s.convertToBoolean;if(a&&(e=RegExp("(".concat(s.regexEscape(this.searchValue),")(?!([^<]+)?>)"),"gi")),this.multiple&&(o='<span class="checkbox-icon"></span>'),this.allowNewOption){var f=this.getTooltipAttrText("New Option");r='<span class="vscomp-new-option-icon" '.concat(f,"></span>")}n.forEach(function(s){var n,f=s.index,v="vscomp-option",m=t.getTooltipAttrText("",!0,!0),g=o,y="",b="",S="",k=d(s.isSelected),C="";s.classNames&&(v+=" ".concat(s.classNames)),s.isFocused&&(v+=" focused"),s.isDisabled&&(v+=" disabled",C='aria-disabled="true"'),s.isGroupTitle&&(v+=" group-title",u&&(g="")),k&&(v+=" selected"),s.isGroupOption&&(v+=" group-option",S='data-group-index="'.concat(s.groupIndex,'"')),n=p?l(s):s.label,s.description&&(b='<div class="vscomp-option-description" '.concat(m,">").concat(s.description,"</div>")),s.isCurrentNew?(v+=" current-new",y+=r):a&&(!s.isGroupTitle||c)&&(n=n.replace(e,"<mark>$1</mark>")),i+='<div role="option" aria-selected="'.concat(k,'" id="vscomp-option-').concat(h,"-").concat(f,'"\n          class="').concat(v,'" data-value="').concat(s.value,'" data-index="').concat(f,'" data-visible-index="').concat(s.visibleIndex,'" tabindex="0" ').concat(S," ").concat(C,"\n        >\n          ").concat(g,'\n          <span class="vscomp-option-text" ').concat(m,">\n            ").concat(n,"\n          </span>\n          ").concat(b,"\n          ").concat(y,"\n        </div>")}),this.$options.innerHTML=i,this.$visibleOptions=this.$options.querySelectorAll(".vscomp-option"),this.afterRenderOptions()}},{key:"renderSearch",value:function(){if(this.hasSearchContainer){var e="",t="";this.multiple&&!this.disableSelectAll&&(e='<span class="vscomp-toggle-all-button">\n          <span class="checkbox-icon vscomp-toggle-all-checkbox"></span>\n          <span class="vscomp-toggle-all-label">'.concat(this.selectAllText,"</span>\n        </span>")),this.hasSearch&&(t='<label for="vscomp-search-input-'.concat(this.uniqueId,'" class="vscomp-search-label" id="vscomp-search-label-').concat(this.uniqueId,'">').concat(this.searchFormLabel,'</label>\n      <input type="text" class="vscomp-search-input" placeholder="').concat(this.searchPlaceholderText,'" id="vscomp-search-input-').concat(this.uniqueId,'">\n      <span class="vscomp-search-clear">&times;</span>'));var i='<div class="vscomp-search-container">\n        '.concat(e,"\n        ").concat(t,"\n      </div>");this.$search.innerHTML=i,this.$searchInput=this.$dropboxContainer.querySelector(".vscomp-search-input"),this.$searchClear=this.$dropboxContainer.querySelector(".vscomp-search-clear"),this.$toggleAllButton=this.$dropboxContainer.querySelector(".vscomp-toggle-all-button"),this.$toggleAllCheckbox=this.$dropboxContainer.querySelector(".vscomp-toggle-all-checkbox"),this.addEvent(this.$searchInput,"input","onSearch"),this.addEvent(this.$searchClear,"click","onSearchClear"),this.addEvent(this.$toggleAllButton,"click","onToggleAllOptions")}}},{key:"addEvents",value:function(){this.addEvent(document,"click","onDocumentClick"),this.addEvent(this.$allWrappers,"keydown","onKeyDown"),this.addEvent(this.$toggleButton,"click","onToggleButtonClick"),this.addEvent(this.$clearButton,"click","onClearButtonClick"),this.addEvent(this.$dropboxContainer,"click","onDropboxContainerClick"),this.addEvent(this.$dropboxCloseButton,"click","onDropboxCloseButtonClick"),this.addEvent(this.$optionsContainer,"scroll","onOptionsScroll"),this.addEvent(this.$options,"click","onOptionsClick"),this.addEvent(this.$options,"mouseover","onOptionsMouseOver"),this.addEvent(this.$options,"touchmove","onOptionsTouchMove"),this.addMutationObserver()}},{key:"addEvent",value:function(e,t,i){var n=this;e&&s.removeArrayEmpty(t.split(" ")).forEach(function(t){var s="".concat(i,"-").concat(t),o=n.events[s];o||(o=n[i].bind(n),n.events[s]=o),l.addEvent(e,t,o)})}},{key:"onDocumentClick",value:function(e){var t=e.target.closest(".vscomp-wrapper");t!==this.$wrapper&&t!==this.$dropboxWrapper&&this.isOpened()&&this.closeDropbox()}},{key:"onKeyDown",value:function(e){var t=e.which||e.keyCode,i=y[t];if(document.activeElement===this.$searchInput&&(9===t||e.shiftKey&&9===t)||document.activeElement===this.$wrapper&&(27===t||"Escape"===e.key)&&this.showAsPopup){this.closeDropbox();return}i&&this[i](e)}},{key:"onEnterPress",value:function(e){e.preventDefault(),this.isOpened()?this.selectFocusedOption():this.openDropbox()}},{key:"onDownArrowPress",value:function(e){e.preventDefault(),this.isOpened()?this.focusOption({direction:"next"}):this.openDropbox()}},{key:"onUpArrowPress",value:function(e){e.preventDefault(),this.isOpened()?this.focusOption({direction:"previous"}):this.openDropbox()}},{key:"onToggleButtonClick",value:function(e){var t=e.target;t.closest(".vscomp-value-tag-clear-button")?this.removeValue(t.closest(".vscomp-value-tag")):t.closest(".toggle-button-child")||this.toggleDropbox()}},{key:"onClearButtonClick",value:function(){this.reset()}},{key:"onOptionsScroll",value:function(){this.setVisibleOptions()}},{key:"onOptionsClick",value:function(e){var t=e.target.closest(".vscomp-option");t&&!l.hasClass(t,"disabled")&&(l.hasClass(t,"group-title")?this.onGroupTitleClick(t):this.selectOption(t,{event:e}))}},{key:"onGroupTitleClick",value:function(e){if(e&&this.multiple&&!this.disableOptionGroupCheckbox){var t=!l.hasClass(e,"selected");this.toggleGroupTitleCheckbox(e,t),this.toggleGroupOptions(e,t)}}},{key:"onDropboxContainerClick",value:function(e){e.target.closest(".vscomp-dropbox")||this.closeDropbox()}},{key:"onDropboxCloseButtonClick",value:function(){this.closeDropbox()}},{key:"onOptionsMouseOver",value:function(e){var t=e.target.closest(".vscomp-option");t&&this.isOpened()&&(l.hasClass(t,"disabled")||l.hasClass(t,"group-title")?this.removeOptionFocus():this.focusOption({$option:t}))}},{key:"onOptionsTouchMove",value:function(){this.removeOptionFocus()}},{key:"onSearch",value:function(e){e.stopPropagation(),this.setSearchValue(e.target.value,!0)}},{key:"onSearchClear",value:function(){this.setSearchValue(""),this.focusSearchInput()}},{key:"onToggleAllOptions",value:function(){this.toggleAllOptions()}},{key:"onResize",value:function(){this.setOptionsContainerHeight(!0)}},{key:"addMutationObserver",value:function(){var e=this;if(this.hasDropboxWrapper){var t=this.$ele;this.mutationObserver=new MutationObserver(function(i){var s=!1,n=!1;i.forEach(function(e){s||(s=d(e.addedNodes).some(function(e){return!!(e===t||e.contains(t))})),n||(n=d(e.removedNodes).some(function(e){return!!(e===t||e.contains(t))}))}),n&&!s&&e.destroy()}),this.mutationObserver.observe(document.querySelector("body"),{childList:!0,subtree:!0})}}},{key:"beforeValueSet",value:function(e){this.toggleAllOptionsClass(!e&&void 0)}},{key:"beforeSelectNewValue",value:function(){var e=this,t=this.getNewOption(),i=t.index;this.newValues.push(t.value),this.setOptionProp(i,"isCurrentNew",!1),this.setOptionProp(i,"isNew",!0),setTimeout(function(){e.setSearchValue(""),e.focusSearchInput()},0)}},{key:"afterRenderWrapper",value:function(){l.addClass(this.$ele,"vscomp-ele"),this.renderSearch(),this.setEleStyles(),this.setDropboxStyles(),this.setOptionsHeight(),this.setVisibleOptions(),this.setOptionsContainerHeight(),this.addEvents(),this.setEleProps(),this.keepAlwaysOpen||this.showAsPopup||this.initDropboxPopover(),this.initialSelectedValue?this.setValueMethod(this.initialSelectedValue,this.silentInitialValueSet):this.autoSelectFirstOption&&this.visibleOptions.length&&this.setValueMethod(this.visibleOptions[0].value,this.silentInitialValueSet),this.showOptionsOnlyOnSearch&&this.setSearchValue("",!1,!0),this.initialDisabled&&this.disable(),this.autofocus&&this.focus()}},{key:"afterRenderOptions",value:function(){var e=this.getVisibleOptions(),t=!this.options.length&&!this.hasServerSearch,i=!t&&!e.length;(!this.allowNewOption||this.hasServerSearch||this.showOptionsOnlyOnSearch)&&l.toggleClass(this.$allWrappers,"has-no-search-results",i),l.toggleClass(this.$allWrappers,"has-no-options",t),this.setOptionAttr(),this.setOptionsPosition(),this.setOptionsTooltip()}},{key:"afterSetOptionsContainerHeight",value:function(e){e&&this.showAsPopup&&this.setVisibleOptions()}},{key:"afterSetSearchValue",value:function(){var e=this;this.hasServerSearch?(clearInterval(this.serverSearchTimeout),this.serverSearchTimeout=setTimeout(function(){e.serverSearch()},this.searchDelay)):this.setVisibleOptionsCount(),this.selectAllOnlyVisible&&this.toggleAllOptionsClass(),this.focusOption({focusFirst:!0})}},{key:"afterSetVisibleOptionsCount",value:function(){this.scrollToTop(),this.setOptionsHeight(),this.setVisibleOptions(),this.updatePosition()}},{key:"afterValueSet",value:function(){this.scrollToTop(),this.setSearchValue(""),this.renderOptions()}},{key:"afterSetOptions",value:function(e){e&&this.setSelectedProp(),this.setOptionsHeight(),this.setVisibleOptions(),this.showOptionsOnlyOnSearch&&this.setSearchValue("",!1,!0),e||this.reset()}},{key:"setProps",value:function(e){var t=this.setDefaultProps(e);this.setPropsFromElementAttr(t);var i=s.convertToBoolean;this.$ele=t.ele,this.dropboxWrapper=t.dropboxWrapper,this.valueKey=t.valueKey,this.labelKey=t.labelKey,this.descriptionKey=t.descriptionKey,this.aliasKey=t.aliasKey,this.optionHeightText=t.optionHeight,this.optionHeight=parseFloat(this.optionHeightText),this.multiple=i(t.multiple),this.hasSearch=i(t.search),this.searchByStartsWith=i(t.searchByStartsWith),this.searchGroup=i(t.searchGroup),this.hideClearButton=i(t.hideClearButton),this.autoSelectFirstOption=i(t.autoSelectFirstOption),this.hasOptionDescription=i(t.hasOptionDescription),this.silentInitialValueSet=i(t.silentInitialValueSet),this.allowNewOption=i(t.allowNewOption),this.markSearchResults=i(t.markSearchResults),this.showSelectedOptionsFirst=i(t.showSelectedOptionsFirst),this.disableSelectAll=i(t.disableSelectAll),this.keepAlwaysOpen=i(t.keepAlwaysOpen),this.showDropboxAsPopup=i(t.showDropboxAsPopup),this.hideValueTooltipOnSelectAll=i(t.hideValueTooltipOnSelectAll),this.showOptionsOnlyOnSearch=i(t.showOptionsOnlyOnSearch),this.selectAllOnlyVisible=i(t.selectAllOnlyVisible),this.alwaysShowSelectedOptionsCount=i(t.alwaysShowSelectedOptionsCount),this.alwaysShowSelectedOptionsLabel=i(t.alwaysShowSelectedOptionsLabel),this.disableAllOptionsSelectedText=i(t.disableAllOptionsSelectedText),this.showValueAsTags=i(t.showValueAsTags),this.disableOptionGroupCheckbox=i(t.disableOptionGroupCheckbox),this.enableSecureText=i(t.enableSecureText),this.setValueAsArray=i(t.setValueAsArray),this.disableValidation=i(t.disableValidation),this.initialDisabled=i(t.disabled),this.required=i(t.required),this.autofocus=i(t.autofocus),this.useGroupValue=i(t.useGroupValue),this.focusSelectedOptionOnOpen=i(t.focusSelectedOptionOnOpen),this.noOptionsText=t.noOptionsText,this.noSearchResultsText=t.noSearchResultsText,this.selectAllText=t.selectAllText,this.searchNormalize=t.searchNormalize,this.searchPlaceholderText=t.searchPlaceholderText,this.searchFormLabel=t.searchFormLabel,this.optionsSelectedText=t.optionsSelectedText,this.optionSelectedText=t.optionSelectedText,this.allOptionsSelectedText=t.allOptionsSelectedText,this.clearButtonText=t.clearButtonText,this.moreText=t.moreText,this.placeholder=t.placeholder,this.position=t.position,this.textDirection=t.textDirection,this.dropboxWidth=t.dropboxWidth,this.tooltipFontSize=t.tooltipFontSize,this.tooltipAlignment=t.tooltipAlignment,this.tooltipMaxWidth=t.tooltipMaxWidth,this.updatePositionThrottle=t.updatePositionThrottle,this.noOfDisplayValues=parseInt(t.noOfDisplayValues),this.zIndex=parseInt(t.zIndex),this.maxValues=parseInt(t.maxValues),this.minValues=parseInt(t.minValues),this.name=this.secureText(t.name),this.additionalClasses=t.additionalClasses,this.popupDropboxBreakpoint=t.popupDropboxBreakpoint,this.popupPosition=t.popupPosition,this.onServerSearch=t.onServerSearch,this.labelRenderer=t.labelRenderer,this.initialSelectedValue=0===t.selectedValue?"0":t.selectedValue,this.emptyValue=t.emptyValue,this.ariaLabelledby=t.ariaLabelledby,this.ariaLabelText=t.ariaLabelText,this.maxWidth=t.maxWidth,this.searchDelay=t.searchDelay,this.selectedValues=[],this.selectedOptions=[],this.newValues=[],this.events={},this.tooltipEnterDelay=200,this.searchValue="",this.searchValueOriginal="",this.isAllSelected=!1,(void 0===t.search&&this.multiple||this.allowNewOption||this.showOptionsOnlyOnSearch)&&(this.hasSearch=!0),this.hasServerSearch="function"==typeof this.onServerSearch,(this.maxValues||this.hasServerSearch||this.showOptionsOnlyOnSearch)&&(this.disableSelectAll=!0,this.disableOptionGroupCheckbox=!0),this.keepAlwaysOpen&&(this.dropboxWrapper="self"),this.showAsPopup=this.showDropboxAsPopup&&!this.keepAlwaysOpen&&window.innerWidth<=parseFloat(this.popupDropboxBreakpoint),this.hasSearchContainer=this.hasSearch||this.multiple&&!this.disableSelectAll,this.optionsCount=this.getOptionsCount(t.optionsCount),this.halfOptionsCount=Math.ceil(this.optionsCount/2),this.optionsHeight=this.getOptionsHeight(),this.uniqueId=this.getUniqueId()}},{key:"setDefaultProps",value:function(e){var t={dropboxWrapper:"self",valueKey:"value",labelKey:"label",descriptionKey:"description",aliasKey:"alias",ariaLabelText:"Options list",optionsCount:5,noOfDisplayValues:50,optionHeight:"40px",noOptionsText:"No options found",noSearchResultsText:"No results found",selectAllText:"Select All",searchNormalize:!1,searchPlaceholderText:"Search...",searchFormLabel:"Search",clearButtonText:"Clear",moreText:"more...",optionsSelectedText:"options selected",optionSelectedText:"option selected",allOptionsSelectedText:"All",placeholder:"Select",position:"bottom left",zIndex:e.keepAlwaysOpen?1:2,tooltipFontSize:"14px",tooltipAlignment:"center",tooltipMaxWidth:"300px",updatePositionThrottle:100,name:"",additionalClasses:"",maxValues:0,showDropboxAsPopup:!0,popupDropboxBreakpoint:"576px",popupPosition:"center",hideValueTooltipOnSelectAll:!0,emptyValue:"",searchDelay:300,focusSelectedOptionOnOpen:!0};return e.hasOptionDescription&&(t.optionsCount=4,t.optionHeight="50px"),Object.assign(t,e)}},{key:"setPropsFromElementAttr",value:function(e){var t=e.ele;Object.keys(i).forEach(function(s){var n=t.getAttribute(s);-1!==b.indexOf(s)&&(""===n||"true"===n)&&(n=!0),n&&(e[i[s]]=n)})}},{key:"setEleProps",value:function(){var e=this.$ele;e.virtualSelect=this,e.value=this.multiple?[]:"",e.name=this.name,e.disabled=!1,e.required=this.required,e.autofocus=this.autofocus,e.multiple=this.multiple,e.form=e.closest("form"),e.reset=n.reset,e.setValue=n.setValueMethod,e.setOptions=n.setOptionsMethod,e.setDisabledOptions=n.setDisabledOptionsMethod,e.setEnabledOptions=n.setEnabledOptionsMethod,e.toggleSelectAll=n.toggleSelectAll,e.isAllSelected=n.isAllSelected,e.addOption=n.addOptionMethod,e.getNewValue=n.getNewValueMethod,e.getDisplayValue=n.getDisplayValueMethod,e.getSelectedOptions=n.getSelectedOptionsMethod,e.getDisabledOptions=n.getDisabledOptionsMethod,e.open=n.openMethod,e.close=n.closeMethod,e.focus=n.focusMethod,e.enable=n.enableMethod,e.disable=n.disableMethod,e.destroy=n.destroyMethod,e.validate=n.validateMethod,e.toggleRequired=n.toggleRequiredMethod,this.hasDropboxWrapper&&(this.$dropboxWrapper.virtualSelect=this)}},{key:"setValueMethod",value:function(e,t){var i,s={},n={},o=[],r=this.multiple,a=e;if(a){if(Array.isArray(a)||(a=[a]),r){var l=this.maxValues;l&&a.length>l&&a.splice(l)}else a.length>1&&(a=[a[0]]);a=a.map(function(e){return e||0===e?e.toString():""}),this.useGroupValue&&(a=this.setGroupOptionsValue(a)),a.forEach(function(e,t){s[e]=!0,n[e]=t}),this.allowNewOption&&a&&this.setNewOptionsFromValue(a)}(this.options.forEach(function(e){!0!==s[e.value]||e.isDisabled||e.isGroupTitle?e.isSelected=!1:(e.isSelected=!0,o.push(e.value))}),r)?(this.hasOptionGroup&&this.setGroupsSelectedProp(),o.sort(function(e,t){return n[e]-n[t]})):o=(function(e){if(Array.isArray(e))return e}(i=o)||function(e,t){var i=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=i){var s,n,o,r,a=[],l=!0,u=!1;try{if(o=(i=i.call(e)).next,0===t){if(Object(i)!==i)return;l=!1}else for(;!(l=(s=o.call(i)).done)&&(a.push(s.value),a.length!==t);l=!0);}catch(e){u=!0,n=e}finally{try{if(!l&&null!=i.return&&(r=i.return(),Object(r)!==r))return}finally{if(u)throw n}}return a}}(i,1)||f(i,1)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],this.beforeValueSet(),this.setValue(o,{disableEvent:t}),this.afterValueSet()}},{key:"setGroupOptionsValue",value:function(e){var t=[],i={},s={};return e.forEach(function(e){s[e]=!0}),this.options.forEach(function(e){var n=e.value,o=!0===s[n];e.isGroupTitle?o&&(i[e.index]=!0):(o||i[e.groupIndex])&&t.push(n)}),t}},{key:"setGroupsSelectedProp",value:function(){var e=this.isAllGroupOptionsSelected.bind(this);this.options.forEach(function(t){t.isGroupTitle&&(t.isSelected=e(t.index))})}},{key:"setOptionsMethod",value:function(e,t){this.setOptions(e),this.afterSetOptions(t)}},{key:"setDisabledOptionsMethod",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setDisabledOptions(e,!0),t||(this.setValueMethod(null),this.toggleAllOptionsClass()),this.setVisibleOptions()}},{key:"setDisabledOptions",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=[];if(e){if(!0===e)t&&this.options.forEach(function(e){return e.isDisabled=!0,i.push(e.value),e});else{i=e.map(function(e){return e.toString()});var s={};i.forEach(function(e){s[e]=!0}),t&&this.options.forEach(function(e){return e.isDisabled=!0===s[e.value],e})}}else t&&this.options.forEach(function(e){return e.isDisabled=!1,e});this.disabledOptions=i}},{key:"setEnabledOptionsMethod",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setEnabledOptions(e),t||(this.setValueMethod(null),this.toggleAllOptionsClass()),this.setVisibleOptions()}},{key:"setEnabledOptions",value:function(e){if(void 0!==e){var t=[];if(!0===e)this.options.forEach(function(e){return e.isDisabled=!1,e});else{var i={};e.forEach(function(e){i[e]=!0}),this.options.forEach(function(e){var s=!0!==i[e.value];return e.isDisabled=s,s&&t.push(e.value),e})}this.disabledOptions=t}}},{key:"setOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=[],n=this.disabledOptions.length,o=this.valueKey,r=this.labelKey,a=this.descriptionKey,l=this.aliasKey,u=this.hasOptionDescription,h=s.getString,d=s.convertToBoolean,f=this.secureText.bind(this),v=this.getAlias.bind(this),m=0,g=!1,y={},b=!1;this.disabledOptions.forEach(function(e){y[e]=!0}),Array.isArray(t)&&t.forEach(function t(S){if("object"!==p(S)){var k;c(k={},o,S),c(k,r,S),S=k}var C=f(h(S[o])),E=f(h(S[r])),w=S.options,_=!!w,A={index:m,value:C,label:E,labelNormalized:e.searchNormalize?s.normalizeString(E).toLowerCase():E.toLowerCase(),alias:v(S[l]),isVisible:d(S.isVisible,!0),isNew:S.isNew||!1,isGroupTitle:_,classNames:S.classNames};if(b||""!==C||(b=!0),n&&(A.isDisabled=!0===y[C]),S.isGroupOption&&(A.isGroupOption=!0,A.groupIndex=S.groupIndex),u&&(A.description=f(h(S[a]))),S.customData&&(A.customData=S.customData),i.push(A),m+=1,_){var O=A.index;g=!0,w.forEach(function(e){e.isGroupOption=!0,e.groupIndex=O,t(e)})}});var S=i.length,k=this.$ele;k.options=i,k.length=S,this.options=i,this.visibleOptionsCount=S,this.lastOptionIndex=S-1,this.newValues=[],this.hasOptionGroup=g,this.hasEmptyValueOption=b,this.setSortedOptions()}},{key:"setServerOptions",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.setOptionsMethod(t,!0);var i=this.selectedOptions,s=this.options,n=!1;if(i.length){var o={};n=!0,s.forEach(function(e){o[e.value]=!0}),i.forEach(function(e){!0!==o[e.value]&&(e.isVisible=!1,s.push(e))}),this.setOptionsMethod(s,!0)}this.allowNewOption&&this.searchValue&&!s.some(function(t){return t.label.toLowerCase()===e.searchValue})&&(n=!0,this.setNewOption()),n?(this.setVisibleOptionsCount(),this.multiple&&this.toggleAllOptionsClass(),this.setValueText()):this.updatePosition(),l.removeClass(this.$allWrappers,"server-searching")}},{key:"setSelectedOptions",value:function(){this.selectedOptions=this.options.filter(function(e){return e.isSelected})}},{key:"setSortedOptions",value:function(){var e=d(this.options);this.showSelectedOptionsFirst&&this.selectedValues.length&&(e=this.hasOptionGroup?this.sortOptionsGroup(e):this.sortOptions(e)),this.sortedOptions=e}},{key:"setVisibleOptions",value:function(){var e=d(this.sortedOptions),t=2*this.optionsCount,i=this.getVisibleStartIndex(),s=this.getNewOption(),n=i+t-1,o=0;s&&(s.visibleIndex=o,o+=1),e=e.filter(function(e){var t=!1;return e.isVisible&&!e.isCurrentNew&&(t=o>=i&&o<=n,e.visibleIndex=o,o+=1),t}),s&&(e=[s].concat(d(e))),this.visibleOptions=e,this.renderOptions()}},{key:"setOptionsPosition",value:function(e){var t=(e||this.getVisibleStartIndex())*this.optionHeight;this.$options.style.transform="translate3d(0, ".concat(t,"px, 0)"),l.setData(this.$options,"top",t)}},{key:"setOptionsTooltip",value:function(){var e=this,t=this.getVisibleOptions(),i=this.hasOptionDescription;t.forEach(function(t){var s=e.$dropboxContainer.querySelector('.vscomp-option[data-index="'.concat(t.index,'"]'));l.setData(s.querySelector(".vscomp-option-text"),"tooltip",t.label),i&&l.setData(s.querySelector(".vscomp-option-description"),"tooltip",t.description)})}},{key:"setValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.disableEvent,n=t.disableValidation;this.hasEmptyValueOption&&""===e||e?Array.isArray(e)?this.selectedValues=d(e):this.selectedValues=[e]:this.selectedValues=[];var o=this.getValue();this.$ele.value=o,this.$hiddenInput.value=this.getInputValue(o),this.isMaxValuesSelected=!!(this.maxValues&&this.maxValues<=this.selectedValues.length),this.toggleAllOptionsClass(),this.setValueText(),l.toggleClass(this.$allWrappers,"has-value",s.isNotEmpty(this.selectedValues)),l.toggleClass(this.$allWrappers,"max-value-selected",this.isMaxValuesSelected),void 0!==n&&n||this.validate(),void 0!==i&&i||l.dispatchEvent(this.$ele,"change",!0)}},{key:"setValueText",value:function(){var e=this.multiple,t=this.selectedValues,i=this.noOfDisplayValues,s=this.showValueAsTags,n=this.$valueText,o=[],r=[],a=t.length,u=0,h=this.isAllSelected&&!this.hasServerSearch&&!this.disableAllOptionsSelectedText&&!s;if(h&&this.hideValueTooltipOnSelectAll)n.innerHTML="".concat(this.allOptionsSelectedText," (").concat(a,")");else{this.getSelectedOptions({fullDetails:!0,keepSelectionOrder:!0}).some(function(e){if(e.isCurrentNew)return!1;if(u>=i)return!0;var t=e.label;if(o.push(t),u+=1,s){var n='<span class="vscomp-value-tag" data-index="'.concat(e.index,'">\n              <span class="vscomp-value-tag-content">').concat(t,'</span>\n              <span class="vscomp-value-tag-clear-button">\n                <i class="vscomp-clear-icon"></i>\n              </span>\n            </span>');r.push(n)}else r.push(t);return!1});var c=a-i;c>0&&r.push('<span class="vscomp-value-tag more-value-count">+ '.concat(c," ").concat(this.moreText,"</span>"));var p=o.join(", ");if(""===p)n.innerHTML=this.placeholder;else if(n.innerHTML=p,e){var d=this.maxValues;if(this.alwaysShowSelectedOptionsCount||l.hasEllipsis(n)||d||s){var f='<span class="vscomp-selected-value-count">'.concat(a,"</span>");if(d&&(f+=' / <span class="vscomp-max-value-count">'.concat(d,"</span>")),h)n.innerHTML="".concat(this.allOptionsSelectedText," (").concat(a,")");else if(s)n.innerHTML=r.join(""),this.$valueTags=n.querySelectorAll(".vscomp-value-tag"),this.setValueTagAttr();else if(!this.alwaysShowSelectedOptionsLabel){var v=1===a?this.optionSelectedText:this.optionsSelectedText;n.innerHTML="".concat(f," ").concat(v)}}else r=[]}}var m="";0===a?m=this.placeholder:s||(m=r.join(", ")),l.setData(n,"tooltip",m),e&&(l.setData(n,"tooltipEllipsisOnly",0===a),s&&this.updatePosition())}},{key:"setSearchValue",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e!==this.searchValueOriginal||i){t||(this.$searchInput.value=e);var s=e.replace(/\\/g,"").toLowerCase().trim();this.searchValue=s,this.searchValueOriginal=e,l.toggleClass(this.$allWrappers,"has-search-value",e),this.afterSetSearchValue()}}},{key:"setVisibleOptionsCount",value:function(){var e,t=0,i=!1,n=this.searchGroup,o=this.showOptionsOnlyOnSearch,r=this.searchByStartsWith,a=this.searchValue;a=this.searchNormalize?s.normalizeString(a):a;var l=this.isOptionVisible.bind(this);this.hasOptionGroup&&(e=this.getVisibleOptionGroupsMapping(a)),this.options.forEach(function(s){var u;s.isCurrentNew||(o&&!a?(s.isVisible=!1,u={isVisible:!1,hasExactOption:!1}):u=l({data:s,searchValue:a,hasExactOption:i,visibleOptionGroupsMapping:e,searchGroup:n,searchByStartsWith:r}),u.isVisible&&(t+=1),i||(i=u.hasExactOption))}),this.allowNewOption&&(a&&!i?(this.setNewOption(),t+=1):this.removeNewOption()),this.visibleOptionsCount=t,this.afterSetVisibleOptionsCount()}},{key:"setOptionProp",value:function(e,t,i){this.options[e]&&(this.options[e][t]=i)}},{key:"setOptionsHeight",value:function(){this.$optionsList.style.height="".concat(this.optionHeight*this.visibleOptionsCount,"px")}},{key:"setOptionsContainerHeight",value:function(e){var t;e?this.showAsPopup&&(this.optionsCount=this.getOptionsCount(),this.halfOptionsCount=Math.ceil(this.optionsCount/2),t=this.getOptionsHeight(),this.optionsHeight=t):(t=this.optionsHeight,this.keepAlwaysOpen&&(l.setStyle(this.$noOptions,"height",t),l.setStyle(this.$noSearchResults,"height",t))),l.setStyle(this.$optionsContainer,"max-height",t),this.afterSetOptionsContainerHeight(e)}},{key:"setNewOption",value:function(e){var t=e||this.searchValueOriginal.trim();if(t){var i=this.getNewOption();if(i){var s=i.index;this.setOptionProp(s,"value",this.secureText(t)),this.setOptionProp(s,"label",this.secureText(t))}else{var n={value:t,label:t};e?(n.isNew=!0,this.newValues.push(t)):n.isCurrentNew=!0,this.addOption(n)}}}},{key:"setSelectedProp",value:function(){var e={};this.selectedValues.forEach(function(t){e[t]=!0}),this.options.forEach(function(t){!0===e[t.value]&&(t.isSelected=!0)})}},{key:"setNewOptionsFromValue",value:function(e){if(e){var t=this.setNewOption.bind(this),i={};this.options.forEach(function(e){i[e.value]=!0}),e.forEach(function(e){e&&!0!==i[e]&&t(e)})}}},{key:"setDropboxWrapperWidth",value:function(){if(!this.showAsPopup){var e=this.dropboxWidth||"".concat(this.$wrapper.offsetWidth,"px");l.setStyle(this.$dropboxContainer,"max-width",e)}}},{key:"setEleStyles",value:function(){var e=this.maxWidth,t={};e&&(t["max-width"]=e),l.setStyles(this.$ele,t)}},{key:"setDropboxStyles",value:function(){var e=this.dropboxWidth,t={},i={"z-index":this.zIndex};e&&(this.showAsPopup?t["max-width"]=e:i.width=e),l.setStyles(this.$dropboxContainer,i),l.setStyles(this.$dropbox,t)}},{key:"setOptionAttr",value:function(){var e=this.$visibleOptions,t=this.options,i="".concat(this.optionHeight,"px"),s=l.setStyle,n=l.getData,o=l.setData;e&&e.length&&e.forEach(function(e){var r=t[n(e,"index")];s(e,"height",i),o(e,"value",r.value)})}},{key:"setValueTagAttr",value:function(){var e=this.$valueTags;if(e&&e.length){var t=l.getData,i=l.setData,s=this.options;e.forEach(function(e){var n=t(e,"index");if(void 0!==n){var o=s[n];i(e,"value",o.value)}})}}},{key:"setScrollTop",value:function(){var e,t=this.selectedValues;if(!this.showSelectedOptionsFirst&&this.focusSelectedOptionOnOpen&&0!==t.length){var i={};t.forEach(function(e){i[e]=!0}),this.options.some(function(t){return!!i[t.value]&&(e=t.visibleIndex,!0)}),e&&(this.$optionsContainer.scrollTop=this.optionHeight*e)}}},{key:"getVisibleOptions",value:function(){return this.visibleOptions||[]}},{key:"getValue",value:function(){return this.multiple?this.useGroupValue?this.getGroupValue():this.selectedValues:this.selectedValues[0]||""}},{key:"getGroupValue",value:function(){var e=[],t={};return this.options.forEach(function(i){if(i.isSelected){var s=i.value;i.isGroupTitle?s&&(t[i.index]=!0,e.push(s)):!0!==t[i.groupIndex]&&e.push(s)}}),e}},{key:"getInputValue",value:function(e){var t=e;return t&&t.length?this.setValueAsArray&&this.multiple&&(t=JSON.stringify(t)):t=this.emptyValue,t}},{key:"getFirstVisibleOptionIndex",value:function(){return Math.ceil(this.$optionsContainer.scrollTop/this.optionHeight)}},{key:"getVisibleStartIndex",value:function(){var e=this.getFirstVisibleOptionIndex()-this.halfOptionsCount;return e<0&&(e=0),e}},{key:"getTooltipAttrText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s={"data-tooltip":e||"","data-tooltip-enter-delay":this.tooltipEnterDelay,"data-tooltip-z-index":this.zIndex,"data-tooltip-font-size":this.tooltipFontSize,"data-tooltip-alignment":this.tooltipAlignment,"data-tooltip-max-width":this.tooltipMaxWidth,"data-tooltip-ellipsis-only":t,"data-tooltip-allow-html":i};return l.getAttributesText(s)}},{key:"getOptionObj",value:function(e){if(e){var t=s.getString,i=this.secureText.bind(this);return{index:e.index,value:i(t(e.value)),label:i(t(e.label)),description:i(t(e.description)),alias:this.getAlias(e.alias),isCurrentNew:e.isCurrentNew||!1,isNew:e.isNew||!1,isVisible:!0}}}},{key:"getNewOption",value:function(){var e=this.options[this.lastOptionIndex];if(e&&e.isCurrentNew)return e}},{key:"getOptionIndex",value:function(e){var t;return this.options.some(function(i){return i.value===e&&(t=i.index,!0)}),t}},{key:"getNewValue",value:function(){var e={};this.newValues.forEach(function(t){e[t]=!0});var t=this.selectedValues.filter(function(t){return!0===e[t]});return this.multiple?t:t[0]}},{key:"getAlias",value:function(e){var t=e;return t&&(t=(t=Array.isArray(t)?t.join(","):t.toString().trim()).toLowerCase()),t||""}},{key:"getDisplayValue",value:function(){var e=[];return this.options.forEach(function(t){t.isSelected&&e.push(t.label)}),this.multiple?e:e[0]||""}},{key:"getSelectedOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fullDetails,i=void 0!==t&&t,s=e.keepSelectionOrder,n=this.valueKey,o=this.labelKey,r=this.selectedValues,a=[];if(this.options.forEach(function(e){if(e.isSelected&&!e.isGroupTitle){if(i)a.push(e);else{var t,s=(c(t={},n,e.value),c(t,o,e.label),t);e.isNew&&(s.isNew=!0),e.customData&&(s.customData=e.customData),a.push(s)}}}),void 0!==s&&s){var l={};r.forEach(function(e,t){l[e]=t}),a.sort(function(e,t){return l[e.value]-l[t.value]})}return this.multiple||i?a:a[0]}},{key:"getDisabledOptions",value:function(){var e=this.valueKey,t=this.labelKey,i=this.disabledOptions,s={},n=[];return i.forEach(function(e){s[e]=!0}),this.options.forEach(function(i){var o,r=i.value,a=i.label;s[r]&&n.push((c(o={},e,r),c(o,t,a),o))}),n}},{key:"getVisibleOptionGroupsMapping",value:function(e){var t=this.options,i={},s=this.isOptionVisible.bind(this);return(t=this.structureOptionGroup(t)).forEach(function(t){i[t.index]=t.options.some(function(t){return s({data:t,searchValue:e}).isVisible})}),i}},{key:"getOptionsCount",value:function(e){var t;if(this.showAsPopup){var i=80*window.innerHeight/100-48;this.hasSearchContainer&&(i-=40),t=Math.floor(i/this.optionHeight)}else t=parseInt(e);return t}},{key:"getOptionsHeight",value:function(){return"".concat(this.optionsCount*this.optionHeight,"px")}},{key:"getSibling",value:function(e,t){var i="next"===t?"nextElementSibling":"previousElementSibling",s=e;do s&&(s=s[i]);while(l.hasClass(s,"disabled")||l.hasClass(s,"group-title"))return s}},{key:"getUniqueId",value:function(){var e=s.getRandomInt(1e4);return document.querySelector("#vscomp-ele-wrapper-".concat(e))?this.getUniqueId():e}},{key:"initDropboxPopover",value:function(){var e={ele:this.$ele,target:this.$dropboxContainer,position:this.position,zIndex:this.zIndex,margin:4,transitionDistance:30,hideArrowIcon:!0,disableManualAction:!0,disableUpdatePosition:!this.hasDropboxWrapper,updatePositionThrottle:this.updatePositionThrottle,afterShow:this.afterShowPopper.bind(this),afterHide:this.afterHidePopper.bind(this)};this.dropboxPopover=new PopoverComponent(e)}},{key:"openDropbox",value:function(e){this.isSilentOpen=e,e?l.setStyle(this.$dropboxContainer,"display","inline-flex"):(l.dispatchEvent(this.$ele,"beforeOpen"),l.setAria(this.$wrapper,"expanded",!0)),this.setDropboxWrapperWidth(),l.removeClass(this.$allWrappers,"closed"),l.changeTabIndex(this.$allWrappers,0),this.dropboxPopover&&!e?this.dropboxPopover.show():this.afterShowPopper()}},{key:"afterShowPopper",value:function(){var e=this.isSilentOpen;this.isSilentOpen=!1,e||(this.moveSelectedOptionsFirst(),this.setScrollTop(),l.addClass(this.$allWrappers,"focused"),this.showAsPopup?(l.addClass(this.$body,"vscomp-popup-active"),this.isPopupActive=!0):this.focusSearchInput(),l.dispatchEvent(this.$ele,"afterOpen"))}},{key:"closeDropbox",value:function(e){if(this.isSilentClose=e,this.keepAlwaysOpen){this.removeOptionFocus();return}e?l.setStyle(this.$dropboxContainer,"display",""):(l.dispatchEvent(this.$ele,"beforeClose"),l.setAria(this.$wrapper,"expanded",!1),l.setAria(this.$wrapper,"activedescendant","")),this.dropboxPopover&&!e?this.dropboxPopover.hide():this.afterHidePopper()}},{key:"afterHidePopper",value:function(){var e=this.isSilentClose;this.isSilentClose=!1,l.removeClass(this.$allWrappers,"focused"),this.removeOptionFocus(),!e&&this.isPopupActive&&(l.removeClass(this.$body,"vscomp-popup-active"),this.isPopupActive=!1),l.addClass(this.$allWrappers,"closed"),e||l.dispatchEvent(this.$ele,"afterClose"),this.focus()}},{key:"moveSelectedOptionsFirst",value:function(){this.showSelectedOptionsFirst&&(this.setSortedOptions(),this.$optionsContainer.scrollTop&&this.selectedValues.length?this.scrollToTop():this.setVisibleOptions())}},{key:"toggleDropbox",value:function(){this.isOpened()?this.closeDropbox():this.openDropbox()}},{key:"updatePosition",value:function(){this.dropboxPopover&&this.isOpened()&&this.$ele.updatePosition()}},{key:"isOpened",value:function(){return!l.hasClass(this.$wrapper,"closed")}},{key:"focusSearchInput",value:function(){var e=this.$searchInput;e&&e.focus()}},{key:"focusOption",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=t.direction,s=t.$option,n=t.focusFirst,o=this.$dropboxContainer.querySelector(".vscomp-option.focused");if(s)e=s;else if(!o||n){var r=this.getFirstVisibleOptionIndex();e=this.$dropboxContainer.querySelector('.vscomp-option[data-visible-index="'.concat(r,'"]')),(l.hasClass(e,"disabled")||l.hasClass(e,"group-title"))&&(e=this.getSibling(e,"next"))}else e=this.getSibling(o,i);e&&e!==o&&(o&&this.toggleOptionFocusedState(o,!1),this.$ariaLiveElem&&(this.$ariaLiveElem.textContent=e.textContent),this.toggleOptionFocusedState(e,!0),this.toggleFocusedProp(l.getData(e,"index"),!0),this.moveFocusedOptionToView(e))}},{key:"moveFocusedOptionToView",value:function(e){var t,i=e||this.$dropboxContainer.querySelector(".vscomp-option.focused");if(i){var s=this.$optionsContainer.getBoundingClientRect(),n=i.getBoundingClientRect(),o=s.top,r=s.bottom,a=s.height,u=n.top,h=n.bottom,c=n.height,p=i.offsetTop,d=l.getData(this.$options,"top","number");o>u?t=p+d:r<h&&(t=p-a+c+d),void 0!==t&&(this.$optionsContainer.scrollTop=t)}}},{key:"removeOptionFocus",value:function(){var e=this.$dropboxContainer.querySelector(".vscomp-option.focused");e&&(this.toggleOptionFocusedState(e,!1),this.toggleFocusedProp(null))}},{key:"selectOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=t.event;if(e){var n=!l.hasClass(e,"selected");if(n){if(this.multiple&&this.isMaxValuesSelected)return}else if(!this.multiple){this.closeDropbox();return}var o=this.selectedValues,r=l.getData(e,"value"),a=l.getData(e,"index","number"),u=l.hasClass(e,"current-new"),h=!1,c=this.lastSelectedOptionIndex;if(this.lastSelectedOptionIndex=null,this.toggleSelectedProp(a,n),n){if(this.multiple)o.push(r),this.toggleAllOptionsClass(),this.toggleGroupOptionsParent(e),i&&i.shiftKey&&(h=!0);else{o.length&&this.toggleSelectedProp(this.getOptionIndex(o[0]),!1),o=[r];var p=this.$dropboxContainer.querySelector(".vscomp-option.selected");p&&this.toggleOptionSelectedState(p,!1),this.closeDropbox(),u||this.setSearchValue("")}this.lastSelectedOptionIndex=a,this.toggleOptionSelectedState(e)}else this.multiple&&(this.toggleOptionSelectedState(e),s.removeItemFromArray(o,r),this.toggleAllOptionsClass(!1),this.toggleGroupOptionsParent(e,!1));u&&this.beforeSelectNewValue(),this.setValue(o),h&&this.selectRangeOptions(c,a)}}},{key:"selectFocusedOption",value:function(){this.selectOption(this.$dropboxContainer.querySelector(".vscomp-option.focused"))}},{key:"selectRangeOptions",value:function(e,t){var i,s,n=this;if("number"==typeof e&&!this.maxValues){var o=this.selectedValues,r=this.hasOptionGroup,a={};if(e<t?(i=e,s=t):(i=t,s=e),this.options.forEach(function(e){if(!e.isDisabled&&!e.isGroupTitle&&e.isVisible&&!e.isSelected){var t=e.index;if(t>i&&t<s){if(r){var n=e.groupIndex;"number"==typeof n&&(a[n]=!0)}e.isSelected=!0,o.push(e.value)}}}),this.toggleAllOptionsClass(),this.setValue(o),(a=Object.keys(a)).length){var l=this.toggleGroupTitleProp.bind(this);a.forEach(function(e){l(parseInt(e))})}setTimeout(function(){n.renderOptions()},0)}}},{key:"toggleAllOptions",value:function(e){if(this.multiple&&!this.disableSelectAll){var t="boolean"==typeof isSelected?e:!l.hasClass(this.$toggleAllCheckbox,"checked"),i=[],s=this.selectAllOnlyVisible;this.options.forEach(function(e){if(!e.isDisabled&&!e.isCurrentNew){var n=e.isVisible,o=e.isSelected;(t||s&&!n&&o)&&(!t||!s||n||o)?(e.isSelected=!0,e.isGroupTitle||i.push(e.value)):e.isSelected=!1}}),this.toggleAllOptionsClass(t),this.setValue(i),this.renderOptions()}}},{key:"toggleAllOptionsClass",value:function(e){if(this.multiple){var t=!1;"boolean"!=typeof e&&(e=this.isAllOptionsSelected()),!e&&this.selectAllOnlyVisible&&(t=this.isAllOptionsSelected(!0)),l.toggleClass(this.$toggleAllCheckbox,"checked",e||t),this.isAllSelected=e}}},{key:"isAllOptionsSelected",value:function(e){var t=!1;return this.options.length&&this.selectedValues.length&&(t=!this.options.some(function(t){return!t.isSelected&&!t.isDisabled&&!t.isGroupTitle&&(!e||t.isVisible)})),t}},{key:"isAllGroupOptionsSelected",value:function(e){var t=!1;return this.options.length&&(t=!this.options.some(function(t){return!t.isSelected&&!t.isDisabled&&!t.isGroupTitle&&t.groupIndex===e})),t}},{key:"toggleGroupOptionsParent",value:function(e,t){if(this.hasOptionGroup&&!this.disableOptionGroupCheckbox&&e){var i=l.getData(e,"groupIndex");void 0!==i&&(i=parseInt(i));var s=this.$options.querySelector('.vscomp-option[data-index="'.concat(i,'"]')),n="boolean"==typeof t?t:this.isAllGroupOptionsSelected(i);this.toggleGroupTitleCheckbox(s,n),this.toggleGroupTitleProp(i,n)}}},{key:"toggleGroupTitleProp",value:function(e,t){var i="boolean"==typeof t?t:this.isAllGroupOptionsSelected(e);this.toggleSelectedProp(e,i)}},{key:"toggleGroupOptions",value:function(e,t){var i=this;if(this.hasOptionGroup&&!this.disableOptionGroupCheckbox&&e){var n=l.getData(e,"index","number"),o=this.selectedValues,r=this.selectAllOnlyVisible,a={},u=s.removeItemFromArray;o.forEach(function(e){a[e]=!0}),this.options.forEach(function(e){if(!e.isDisabled&&e.groupIndex===n){var i=e.value;t&&(!r||e.isVisible)?(e.isSelected=!0,a[i]||o.push(i)):(e.isSelected=!1,a[i]&&u(o,i))}}),this.toggleAllOptionsClass(!!t&&null),this.setValue(o),setTimeout(function(){i.renderOptions()},0)}}},{key:"toggleGroupTitleCheckbox",value:function(e,t){if(e){var i=l.getData(e,"index","number");this.toggleSelectedProp(i,t),this.toggleOptionSelectedState(e,t)}}},{key:"toggleFocusedProp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.focusedOptionIndex&&this.setOptionProp(this.focusedOptionIndex,"isFocused",!1),this.setOptionProp(e,"isFocused",t),this.focusedOptionIndex=e}},{key:"toggleSelectedProp",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.setOptionProp(e,"isSelected",t)}},{key:"scrollToTop",value:function(){var e=!this.isOpened();e&&this.openDropbox(!0),this.$optionsContainer.scrollTop>0&&(this.$optionsContainer.scrollTop=0),e&&this.closeDropbox(!0)}},{key:"reset",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.options.forEach(function(e){e.isSelected=!1}),this.beforeValueSet(!0),this.setValue(null,{disableValidation:e}),this.afterValueSet(),e&&l.removeClass(this.$allWrappers,"has-error"),l.dispatchEvent(this.$ele,"reset")}},{key:"addOption",value:function(e,t){if(e){this.lastOptionIndex+=1;var i=this.getOptionObj(h(h({},e),{},{index:this.lastOptionIndex}));this.options.push(i),this.sortedOptions.push(i),t&&(this.visibleOptionsCount+=1,this.afterSetOptions())}}},{key:"removeOption",value:function(e){(e||0===e)&&(this.options.splice(e,1),this.lastOptionIndex-=1)}},{key:"removeNewOption",value:function(){var e=this.getNewOption();e&&this.removeOption(e.index)}},{key:"sortOptions",value:function(e){return e.sort(function(e,t){var i=e.isSelected||e.isAnySelected,s=t.isSelected||t.isAnySelected;return i||s?i&&(!s||e.index<t.index)?-1:1:0})}},{key:"sortOptionsGroup",value:function(e){var t=this.sortOptions.bind(this),i=this.structureOptionGroup(e);return i.forEach(function(e){var i=e.options;e.isAnySelected=i.some(function(e){return e.isSelected}),e.isAnySelected&&t(i)}),t(i),this.destructureOptionGroup(i)}},{key:"isOptionVisible",value:function(e){var t=e.data,i=e.searchValue,s=e.hasExactOption,n=e.visibleOptionGroupsMapping,o=e.searchGroup,r=e.searchByStartsWith,a=t.value.toLowerCase(),l=this.searchNormalize?t.labelNormalized:t.label.toLowerCase(),u=t.description,h=t.alias,c=r?l.startsWith(i):l.includes(i);return!t.isGroupTitle||o&&c||(c=n[t.index]),r||!h||c||(c=h.includes(i)),r||!u||c||(c=u.toLowerCase().includes(i)),t.isVisible=c,s||(s=l===i||a===i),{isVisible:c,hasExactOption:s}}},{key:"structureOptionGroup",value:function(e){var t=[],i={};return e.forEach(function(e){if(e.isGroupTitle){var s=[];e.options=s,i[e.index]=s,t.push(e)}}),e.forEach(function(e){e.isGroupOption&&i[e.groupIndex].push(e)}),t}},{key:"destructureOptionGroup",value:function(e){var t=[];return e.forEach(function(e){t.push(e),t=t.concat(e.options)}),t}},{key:"serverSearch",value:function(){l.removeClass(this.$allWrappers,"has-no-search-results"),l.addClass(this.$allWrappers,"server-searching"),this.setSelectedOptions(),this.onServerSearch(this.searchValue,this)}},{key:"removeValue",value:function(e){var t=this.selectedValues,i=l.getData(e,"value");s.removeItemFromArray(t,i),this.setValueMethod(t)}},{key:"focus",value:function(){this.$wrapper.focus()}},{key:"enable",value:function(){this.$ele.disabled=!1,this.$ele.removeAttribute("disabled"),this.$hiddenInput.removeAttribute("disabled"),l.setAria(this.$wrapper,"disabled",!1)}},{key:"disable",value:function(){this.$ele.disabled=!0,this.$ele.setAttribute("disabled",""),this.$hiddenInput.setAttribute("disabled",""),l.setAria(this.$wrapper,"disabled",!0)}},{key:"validate",value:function(){if(this.disableValidation)return!0;var e=!1,t=this.selectedValues,i=this.minValues;return this.required&&(s.isEmpty(t)||this.multiple&&i&&t.length<i)&&(e=!0),l.toggleClass(this.$allWrappers,"has-error",e),!e}},{key:"destroy",value:function(){var e=this.$ele;e.virtualSelect=void 0,e.value=void 0,e.innerHTML="",this.hasDropboxWrapper&&(this.$dropboxWrapper.remove(),this.mutationObserver.disconnect()),this.dropboxPopover&&this.dropboxPopover.destroy(),l.removeClass(e,"vscomp-ele")}},{key:"createSecureTextElements",value:function(){this.$secureDiv=document.createElement("div"),this.$secureText=document.createTextNode(""),this.$secureDiv.appendChild(this.$secureText)}},{key:"secureText",value:function(e){return e&&this.enableSecureText?(this.$secureText.nodeValue=e,this.$secureDiv.innerHTML):e}},{key:"toggleRequired",value:function(e){this.required=s.convertToBoolean(e),this.$ele.required=this.required}},{key:"toggleOptionSelectedState",value:function(e,t){var i=t;void 0===i&&(i=!l.hasClass(e,"selected")),l.toggleClass(e,"selected",i),l.setAria(e,"selected",i)}},{key:"toggleOptionFocusedState",value:function(e,t){e&&(l.toggleClass(e,"focused",t),t&&l.setAria(this.$wrapper,"activedescendant",e.id))}}],t=[{key:"init",value:function(e){var t=e.ele;if(t){var i=!1;if("string"==typeof t){var s=(t=document.querySelectorAll(t)).length;if(0===s)return;1===s&&(i=!0)}(void 0===t.length||void 0===t.forEach)&&(t=[t],i=!0);var o=[];return t.forEach(function(t){if(t.virtualSelect){o.push(t.virtualSelect);return}e.ele=t,"SELECT"===t.tagName&&n.setPropsFromSelect(e),o.push(new n(e))}),i?o[0]:o}}},{key:"getAttrProps",value:function(){var e=l.convertPropToDataAttr,t={};return S.forEach(function(e){t[e]=e}),k.forEach(function(i){t[e(i)]=i}),t}},{key:"setPropsFromSelect",value:function(e){var t=e.ele,s=[],n=[],o=function e(t){var i=[];return Array.from(t.children).forEach(function(t){var o=t.value,r={value:o};"OPTGROUP"===t.tagName?(r.label=t.getAttribute("label"),r.options=e(t)):r.label=t.innerHTML,i.push(r),t.disabled&&s.push(o),t.selected&&n.push(o)}),i}(t),r=document.createElement("div");l.setAttrFromEle(t,r,Object.keys(i),b),t.parentNode.insertBefore(r,t),t.remove(),e.ele=r,e.options=o,e.disabledOptions=s,e.selectedValue=n}},{key:"onFormReset",value:function(e){var t=e.target.closest("form");t&&t.querySelectorAll(".vscomp-ele-wrapper").forEach(function(e){e.parentElement.virtualSelect.reset(!0)})}},{key:"onFormSubmit",value:function(e){n.validate(e.target.closest("form"))||e.preventDefault()}},{key:"validate",value:function(e){if(!e)return!0;var t=!1;return e.querySelectorAll(".vscomp-ele-wrapper").forEach(function(e){var i=e.parentElement.virtualSelect.validate();t||i||(t=!0)}),!t}},{key:"reset",value:function(){this.virtualSelect.reset()}},{key:"setValueMethod",value:function(){var e;(e=this.virtualSelect).setValueMethod.apply(e,arguments)}},{key:"setOptionsMethod",value:function(){var e;(e=this.virtualSelect).setOptionsMethod.apply(e,arguments)}},{key:"setDisabledOptionsMethod",value:function(){var e;(e=this.virtualSelect).setDisabledOptionsMethod.apply(e,arguments)}},{key:"setEnabledOptionsMethod",value:function(){var e;(e=this.virtualSelect).setEnabledOptionsMethod.apply(e,arguments)}},{key:"toggleSelectAll",value:function(e){this.virtualSelect.toggleAllOptions(e)}},{key:"isAllSelected",value:function(){return this.virtualSelect.isAllSelected}},{key:"addOptionMethod",value:function(e){this.virtualSelect.addOption(e,!0)}},{key:"getNewValueMethod",value:function(){return this.virtualSelect.getNewValue()}},{key:"getDisplayValueMethod",value:function(){return this.virtualSelect.getDisplayValue()}},{key:"getSelectedOptionsMethod",value:function(e){return this.virtualSelect.getSelectedOptions(e)}},{key:"getDisabledOptionsMethod",value:function(){return this.virtualSelect.getDisabledOptions()}},{key:"openMethod",value:function(){return this.virtualSelect.openDropbox()}},{key:"closeMethod",value:function(){return this.virtualSelect.closeDropbox()}},{key:"focusMethod",value:function(){return this.virtualSelect.focus()}},{key:"enableMethod",value:function(){return this.virtualSelect.enable()}},{key:"disableMethod",value:function(){return this.virtualSelect.disable()}},{key:"destroyMethod",value:function(){return this.virtualSelect.destroy()}},{key:"validateMethod",value:function(){return this.virtualSelect.validate()}},{key:"toggleRequiredMethod",value:function(e){return this.virtualSelect.toggleRequired(e)}},{key:"onResizeMethod",value:function(){document.querySelectorAll(".vscomp-ele-wrapper").forEach(function(e){e.parentElement.virtualSelect.onResize()})}}],e&&m(n.prototype,e),t&&m(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}();document.addEventListener("reset",C.onFormReset),document.addEventListener("submit",C.onFormSubmit),window.addEventListener("resize",C.onResizeMethod),i=C.getAttrProps(),window.VirtualSelect=C,"undefined"!=typeof NodeList&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach)}(),function(){"use strict";function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,i){if(e){if("string"==typeof e)return t(e,i);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?t(e,i):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}var i=function(){var t;function i(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,i)}return t=[{key:"addClass",value:function(t,s){t&&(s=s.split(" "),i.getElements(t).forEach(function(t){var i;(i=t.classList).add.apply(i,e(s))}))}},{key:"removeClass",value:function(t,s){t&&(s=s.split(" "),i.getElements(t).forEach(function(t){var i;(i=t.classList).remove.apply(i,e(s))}))}},{key:"getElements",value:function(e){if(e)return void 0===e.forEach&&(e=[e]),e}},{key:"getMoreVisibleSides",value:function(e){if(!e)return{};var t=e.getBoundingClientRect(),i=window.innerWidth,s=window.innerHeight,n=t.left,o=t.top;return{horizontal:n>i-n-t.width?"left":"right",vertical:o>s-o-t.height?"top":"bottom"}}},{key:"getAbsoluteCoords",value:function(e){if(e){var t=e.getBoundingClientRect(),i=window.pageXOffset,s=window.pageYOffset;return{width:t.width,height:t.height,top:t.top+s,right:t.right+i,bottom:t.bottom+s,left:t.left+i}}}},{key:"getCoords",value:function(e){return e?e.getBoundingClientRect():{}}},{key:"getData",value:function(e,t,i){if(e){var s=e?e.dataset[t]:"";return"number"===i?s=parseFloat(s)||0:"true"===s?s=!0:"false"===s&&(s=!1),s}}},{key:"setData",value:function(e,t,i){e&&(e.dataset[t]=i)}},{key:"setStyle",value:function(e,t,i){e&&(e.style[t]=i)}},{key:"show",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"block";i.setStyle(e,"display",t)}},{key:"hide",value:function(e){i.setStyle(e,"display","none")}},{key:"getHideableParent",value:function(e){for(var t,i=e.parentElement;i;){var s=getComputedStyle(i).overflow;if(-1!==s.indexOf("scroll")||-1!==s.indexOf("auto")){t=i;break}i=i.parentElement}return t}}],function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(i,t),i}(),s=["top","bottom","left","right"].map(function(e){return"position-".concat(e)}),n={top:"rotate(180deg)",left:"rotate(90deg)",right:"rotate(-90deg)"},o=function(){var e;function t(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,t);try{this.setProps(e),this.init()}catch(e){console.warn("Couldn't initiate popper"),console.error(e)}}return e=[{key:"init",value:function(){var e=this.$popperEle;e&&this.$triggerEle&&(i.setStyle(e,"zIndex",this.zIndex),this.setPosition())}},{key:"setProps",value:function(e){var t=(e=this.setDefaultProps(e)).position?e.position.toLowerCase():"auto";if(this.$popperEle=e.$popperEle,this.$triggerEle=e.$triggerEle,this.$arrowEle=e.$arrowEle,this.margin=parseFloat(e.margin),this.offset=parseFloat(e.offset),this.enterDelay=parseFloat(e.enterDelay),this.exitDelay=parseFloat(e.exitDelay),this.showDuration=parseFloat(e.showDuration),this.hideDuration=parseFloat(e.hideDuration),this.transitionDistance=parseFloat(e.transitionDistance),this.zIndex=parseFloat(e.zIndex),this.afterShowCallback=e.afterShow,this.afterHideCallback=e.afterHide,this.hasArrow=!!this.$arrowEle,-1!==t.indexOf(" ")){var i=t.split(" ");this.position=i[0],this.secondaryPosition=i[1]}else this.position=t}},{key:"setDefaultProps",value:function(e){return Object.assign({position:"auto",margin:8,offset:5,enterDelay:0,exitDelay:0,showDuration:300,hideDuration:200,transitionDistance:10,zIndex:1},e)}},{key:"setPosition",value:function(){i.show(this.$popperEle,"inline-flex");var e,t,o,r=window.innerWidth,a=window.innerHeight,l=i.getAbsoluteCoords(this.$popperEle),u=i.getAbsoluteCoords(this.$triggerEle),h=l.width,c=l.height,p=l.top,d=l.right,f=l.bottom,v=l.left,m=u.width,g=u.height,y=u.top,b=u.right,S=u.bottom,k=u.left,C=y-p,E=k-v,w=E,_=C,A=this.position,O=this.secondaryPosition,x=m/2-h/2,D=g/2-c/2,I=this.margin,F=this.transitionDistance,T=window.scrollY-p,V=a+T,L=window.scrollX-v,M=r+L,P=this.offset;P&&(T+=P,V-=P,L+=P,M-=P),"auto"===A&&(A=i.getMoreVisibleSides(this.$triggerEle).vertical);var B={top:{top:_-c-I,left:w+x},bottom:{top:_+g+I,left:w+x},right:{top:_+D,left:w+m+I},left:{top:_+D,left:w-h-I}},$=B[A];if(_=$.top,w=$.left,O&&("top"===O?_=C:"bottom"===O?_=C+g-c:"left"===O?w=E:"right"===O&&(w=E+m-h)),w<L?"left"===A?o="right":w=L+v>b?b-v:L:w+h>M&&("right"===A?o="left":w=M+v<k?k-d:M-h),_<T?"top"===A?o="bottom":_=T+p>S?S-p:T:_+c>V&&("bottom"===A?o="top":_=V+p<y?y-f:V-c),o){var N=B[o];"top"===(A=o)||"bottom"===A?_=N.top:"left"!==A&&"right"!==A||(w=N.left)}"top"===A?(e=_+F,t=w):"right"===A?(e=_,t=w-F):"left"===A?(e=_,t=w+F):(e=_-F,t=w);var R="translate3d(".concat(t,"px, ").concat(e,"px, 0)");if(i.setStyle(this.$popperEle,"transform",R),i.setData(this.$popperEle,"fromLeft",t),i.setData(this.$popperEle,"fromTop",e),i.setData(this.$popperEle,"top",_),i.setData(this.$popperEle,"left",w),i.removeClass(this.$popperEle,s.join(" ")),i.addClass(this.$popperEle,"position-".concat(A)),this.hasArrow){var q=0,H=0,j=w+v,G=_+p,U=this.$arrowEle.offsetWidth/2,z=n[A]||"";"top"===A||"bottom"===A?(q=m/2+k-j)<U?q=U:q>h-U&&(q=h-U):"left"!==A&&"right"!==A||((H=g/2+y-G)<U?H=U:H>c-U&&(H=c-U)),i.setStyle(this.$arrowEle,"transform","translate3d(".concat(q,"px, ").concat(H,"px, 0) ").concat(z))}i.hide(this.$popperEle)}},{key:"resetPosition",value:function(){i.setStyle(this.$popperEle,"transform","none"),this.setPosition()}},{key:"show",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.resetPosition,n=t.data;clearTimeout(this.exitDelayTimeout),clearTimeout(this.hideDurationTimeout),s&&this.resetPosition(),this.enterDelayTimeout=setTimeout(function(){var t=i.getData(e.$popperEle,"left"),s=i.getData(e.$popperEle,"top"),o="translate3d(".concat(t,"px, ").concat(s,"px, 0)"),r=e.showDuration;i.show(e.$popperEle,"inline-flex"),i.getCoords(e.$popperEle),i.setStyle(e.$popperEle,"transitionDuration",r+"ms"),i.setStyle(e.$popperEle,"transform",o),i.setStyle(e.$popperEle,"opacity",1),e.showDurationTimeout=setTimeout(function(){"function"==typeof e.afterShowCallback&&e.afterShowCallback(n)},r)},this.enterDelay)}},{key:"hide",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},s=t.data;clearTimeout(this.enterDelayTimeout),clearTimeout(this.showDurationTimeout),this.exitDelayTimeout=setTimeout(function(){if(e.$popperEle){var t=i.getData(e.$popperEle,"fromLeft"),n=i.getData(e.$popperEle,"fromTop"),o="translate3d(".concat(t,"px, ").concat(n,"px, 0)"),r=e.hideDuration;i.setStyle(e.$popperEle,"transitionDuration",r+"ms"),i.setStyle(e.$popperEle,"transform",o),i.setStyle(e.$popperEle,"opacity",0),e.hideDurationTimeout=setTimeout(function(){i.hide(e.$popperEle),"function"==typeof e.afterHideCallback&&e.afterHideCallback(s)},r)}},this.exitDelay)}},{key:"updatePosition",value:function(){i.setStyle(this.$popperEle,"transitionDuration","0ms"),this.resetPosition();var e=i.getData(this.$popperEle,"left"),t=i.getData(this.$popperEle,"top");i.show(this.$popperEle,"inline-flex"),i.setStyle(this.$popperEle,"transform","translate3d(".concat(e,"px, ").concat(t,"px, 0)"))}}],function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(t.prototype,e),t}();window.PopperComponent=o}(),function(){"use strict";var e=function(){function e(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,e)}return function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e,[{key:"convertToBoolean",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e=!0===e||"true"===e||!1!==e&&"false"!==e&&t}},{key:"removeArrayEmpty",value:function(e){return Array.isArray(e)&&e.length?e.filter(function(e){return!!e}):[]}},{key:"throttle",value:function(e,t){var i,s=0;return function(){for(var n=arguments.length,o=Array(n),r=0;r<n;r++)o[r]=arguments[r];var a=(new Date).getTime(),l=t-(a-s);clearTimeout(i),l<=0?(s=a,e.apply(void 0,o)):i=setTimeout(function(){e.apply(void 0,o)},l)}}}]),Object.defineProperty(e,"prototype",{writable:!1}),e}();function t(e){return function(e){if(Array.isArray(e))return i(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return i(e,t);var s=Object.prototype.toString.call(e).slice(8,-1);return"Object"===s&&e.constructor&&(s=e.constructor.name),"Map"===s||"Set"===s?Array.from(e):"Arguments"===s||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s)?i(e,t):void 0}}(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,s=Array(t);i<t;i++)s[i]=e[i];return s}var s=function(){var i;function s(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,s)}return i=[{key:"addClass",value:function(e,i){e&&(i=i.split(" "),s.getElements(e).forEach(function(e){var s;(s=e.classList).add.apply(s,t(i))}))}},{key:"removeClass",value:function(e,i){e&&(i=i.split(" "),s.getElements(e).forEach(function(e){var s;(s=e.classList).remove.apply(s,t(i))}))}},{key:"hasClass",value:function(e,t){return!!e&&e.classList.contains(t)}},{key:"getElement",value:function(e){return e&&("string"==typeof e?e=document.querySelector(e):void 0!==e.length&&(e=e[0])),e||null}},{key:"getElements",value:function(e){if(e)return void 0===e.forEach&&(e=[e]),e}},{key:"addEvent",value:function(e,t,i){s.addOrRemoveEvent(e,t,i,"add")}},{key:"removeEvent",value:function(e,t,i){s.addOrRemoveEvent(e,t,i,"remove")}},{key:"addOrRemoveEvent",value:function(t,i,n,o){t&&(i=e.removeArrayEmpty(i.split(" "))).forEach(function(e){(t=s.getElements(t)).forEach(function(t){"add"===o?t.addEventListener(e,n):t.removeEventListener(e,n)})})}},{key:"getScrollableParents",value:function(e){if(!e)return[];for(var t=[window],i=e.parentElement;i;){var s=getComputedStyle(i).overflow;-1===s.indexOf("scroll")&&-1===s.indexOf("auto")||t.push(i),i=i.parentElement}return t}},{key:"convertPropToDataAttr",value:function(e){return e?"data-popover-".concat(e).replace(/([A-Z])/g,"-$1").toLowerCase():""}}],function(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(s,i),Object.defineProperty(s,"prototype",{writable:!1}),s}();function n(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}var o,r={27:"onEscPress"},a=["target","position","margin","offset","enterDelay","exitDelay","showDuration","hideDuration","transitionDistance","updatePositionThrottle","zIndex","hideOnOuterClick","showOnHover","hideArrowIcon","disableManualAction","disableUpdatePosition"],l=function(){var t,i;function l(e){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,l);try{this.setProps(e),this.init()}catch(e){console.warn("Couldn't initiate Popover component"),console.error(e)}}return i=[{key:"init",value:function(e){var t=e.ele;if(t){var i=!1;if("string"==typeof t){if(!(t=document.querySelectorAll(t)))return;1===t.length&&(i=!0)}void 0===t.length&&(t=[t],i=!0);var s=[];return t.forEach(function(t){e.ele=t,l.destroy(t),s.push(new l(e))}),i?s[0]:s}}},{key:"destroy",value:function(e){if(e){var t=e.popComp;t&&t.destroy()}}},{key:"showMethod",value:function(){this.popComp.show()}},{key:"hideMethod",value:function(){this.popComp.hide()}},{key:"updatePositionMethod",value:function(){this.popComp.popper.updatePosition()}},{key:"getAttrProps",value:function(){var e=s.convertPropToDataAttr,t={};return a.forEach(function(i){t[e(i)]=i}),t}}],t=[{key:"init",value:function(){this.$popover&&(this.setElementProps(),this.renderArrow(),this.initPopper(),this.addEvents())}},{key:"getEvents",value:function(){var e=[{$ele:document,event:"click",method:"onDocumentClick"},{$ele:document,event:"keydown",method:"onDocumentKeyDown"}];return this.disableManualAction||(e.push({$ele:this.$ele,event:"click",method:"onTriggerEleClick"}),this.showOnHover&&(e.push({$ele:this.$ele,event:"mouseenter",method:"onTriggerEleMouseEnter"}),e.push({$ele:this.$ele,event:"mouseleave",method:"onTriggerEleMouseLeave"}))),e}},{key:"addOrRemoveEvents",value:function(e){var t=this;this.getEvents().forEach(function(i){t.addOrRemoveEvent({action:e,$ele:i.$ele,events:i.event,method:i.method})})}},{key:"addEvents",value:function(){this.addOrRemoveEvents("add")}},{key:"removeEvents",value:function(){this.addOrRemoveEvents("remove"),this.removeScrollEventListeners(),this.removeResizeEventListeners()}},{key:"addOrRemoveEvent",value:function(t){var i=this,n=t.action,o=t.$ele,r=t.events,a=t.method,l=t.throttle;o&&(r=e.removeArrayEmpty(r.split(" "))).forEach(function(t){var r="".concat(a,"-").concat(t),u=i.events[r];u||(u=i[a].bind(i),l&&(u=e.throttle(u,l)),i.events[r]=u),"add"===n?s.addEvent(o,t,u):s.removeEvent(o,t,u)})}},{key:"addScrollEventListeners",value:function(){this.$scrollableElems=s.getScrollableParents(this.$ele),this.addOrRemoveEvent({action:"add",$ele:this.$scrollableElems,events:"scroll",method:"onAnyParentScroll",throttle:this.updatePositionThrottle})}},{key:"removeScrollEventListeners",value:function(){this.$scrollableElems&&(this.addOrRemoveEvent({action:"remove",$ele:this.$scrollableElems,events:"scroll",method:"onAnyParentScroll"}),this.$scrollableElems=null)}},{key:"addResizeEventListeners",value:function(){this.addOrRemoveEvent({action:"add",$ele:window,events:"resize",method:"onResize",throttle:this.updatePositionThrottle})}},{key:"removeResizeEventListeners",value:function(){this.addOrRemoveEvent({action:"remove",$ele:window,events:"resize",method:"onResize"})}},{key:"onAnyParentScroll",value:function(){this.popper.updatePosition()}},{key:"onResize",value:function(){this.popper.updatePosition()}},{key:"onDocumentClick",value:function(e){var t=e.target,i=t.closest(".pop-comp-ele"),s=t.closest(".pop-comp-wrapper");this.hideOnOuterClick&&i!==this.$ele&&s!==this.$popover&&this.hide()}},{key:"onDocumentKeyDown",value:function(e){var t=r[e.which||e.keyCode];t&&this[t](e)}},{key:"onEscPress",value:function(){this.hideOnOuterClick&&this.hide()}},{key:"onTriggerEleClick",value:function(){this.toggle()}},{key:"onTriggerEleMouseEnter",value:function(){this.show()}},{key:"onTriggerEleMouseLeave",value:function(){this.hide()}},{key:"setProps",value:function(t){t=this.setDefaultProps(t),this.setPropsFromElementAttr(t);var i=e.convertToBoolean;this.$ele=t.ele,this.target=t.target,this.position=t.position,this.margin=parseFloat(t.margin),this.offset=parseFloat(t.offset),this.enterDelay=parseFloat(t.enterDelay),this.exitDelay=parseFloat(t.exitDelay),this.showDuration=parseFloat(t.showDuration),this.hideDuration=parseFloat(t.hideDuration),this.transitionDistance=parseFloat(t.transitionDistance),this.updatePositionThrottle=parseFloat(t.updatePositionThrottle),this.zIndex=parseFloat(t.zIndex),this.hideOnOuterClick=i(t.hideOnOuterClick),this.showOnHover=i(t.showOnHover),this.hideArrowIcon=i(t.hideArrowIcon),this.disableManualAction=i(t.disableManualAction),this.disableUpdatePosition=i(t.disableUpdatePosition),this.beforeShowCallback=t.beforeShow,this.afterShowCallback=t.afterShow,this.beforeHideCallback=t.beforeHide,this.afterHideCallback=t.afterHide,this.events={},this.$popover=s.getElement(this.target)}},{key:"setDefaultProps",value:function(e){return Object.assign({position:"auto",margin:8,offset:5,enterDelay:0,exitDelay:0,showDuration:300,hideDuration:200,transitionDistance:10,updatePositionThrottle:100,zIndex:1,hideOnOuterClick:!0,showOnHover:!1,hideArrowIcon:!1,disableManualAction:!1,disableUpdatePosition:!1},e)}},{key:"setPropsFromElementAttr",value:function(e){var t=e.ele;for(var i in o){var s=t.getAttribute(i);s&&(e[o[i]]=s)}}},{key:"setElementProps",value:function(){var e=this.$ele;e.popComp=this,e.show=l.showMethod,e.hide=l.hideMethod,e.updatePosition=l.updatePositionMethod,s.addClass(this.$ele,"pop-comp-ele"),s.addClass(this.$popover,"pop-comp-wrapper")}},{key:"getOtherTriggerPopComp",value:function(){var e,t=this.$popover.popComp;return t&&t.$ele!==this.$ele&&(e=t),e}},{key:"initPopper",value:function(){var e={$popperEle:this.$popover,$triggerEle:this.$ele,$arrowEle:this.$arrowEle,position:this.position,margin:this.margin,offset:this.offset,enterDelay:this.enterDelay,exitDelay:this.exitDelay,showDuration:this.showDuration,hideDuration:this.hideDuration,transitionDistance:this.transitionDistance,zIndex:this.zIndex,afterShow:this.afterShow.bind(this),afterHide:this.afterHide.bind(this)};this.popper=new PopperComponent(e)}},{key:"beforeShow",value:function(){"function"==typeof this.beforeShowCallback&&this.beforeShowCallback(this)}},{key:"beforeHide",value:function(){"function"==typeof this.beforeHideCallback&&this.beforeHideCallback(this)}},{key:"show",value:function(){this.isShown()||(this.isShownForOtherTrigger()?this.showAfterOtherHide():(s.addClass(this.$popover,"pop-comp-disable-events"),this.$popover.popComp=this,this.beforeShow(),this.popper.show({resetPosition:!0}),s.addClass(this.$ele,"pop-comp-active")))}},{key:"hide",value:function(){this.isShown()&&(this.beforeHide(),this.popper.hide(),this.removeScrollEventListeners(),this.removeResizeEventListeners())}},{key:"toggle",value:function(e){void 0===e&&(e=!this.isShown()),e?this.show():this.hide()}},{key:"isShown",value:function(){return s.hasClass(this.$ele,"pop-comp-active")}},{key:"isShownForOtherTrigger",value:function(){var e=this.getOtherTriggerPopComp();return!!e&&e.isShown()}},{key:"showAfterOtherHide",value:function(){var e=this,t=this.getOtherTriggerPopComp();t&&setTimeout(function(){e.show()},t.exitDelay+t.hideDuration+100)}},{key:"afterShow",value:function(){var e=this;this.showOnHover?setTimeout(function(){s.removeClass(e.$popover,"pop-comp-disable-events")},2e3):s.removeClass(this.$popover,"pop-comp-disable-events"),this.disableUpdatePosition||(this.addScrollEventListeners(),this.addResizeEventListeners()),"function"==typeof this.afterShowCallback&&this.afterShowCallback(this)}},{key:"afterHide",value:function(){s.removeClass(this.$ele,"pop-comp-active"),"function"==typeof this.afterHideCallback&&this.afterHideCallback(this)}},{key:"renderArrow",value:function(){if(!this.hideArrowIcon){var e=this.$popover.querySelector(".pop-comp-arrow");e||(this.$popover.insertAdjacentHTML("afterbegin",'<i class="pop-comp-arrow"></i>'),e=this.$popover.querySelector(".pop-comp-arrow")),this.$arrowEle=e}}},{key:"destroy",value:function(){this.removeEvents()}}],n(l.prototype,t),i&&n(l,i),Object.defineProperty(l,"prototype",{writable:!1}),l}();o=l.getAttrProps(),window.PopoverComponent=l}();class a{NO_VALID_CLASS="no-valid";ATTACH_FILE_LABEL_TEXT_CONTENT="One file, up to 20 mb";constructor(e,t={handleChangeValidateInput:e=>{},handleSuccessAttach:e=>{},handleCanceled:e=>{}}){if(this.$root=document.querySelector(`#${e}`),!this.$root){console.error(`You are trying init AttachFile by #${e} node, but this was not found `);return}this.cvInput=this.$root.querySelector("input"),this.fileBody=this.$root.querySelector("[data-attach-file-body]"),this.labelCVFile=this.$root.querySelector("[data-attach-file-resume-add]"),this.infoCVFile=this.$root.querySelector("[data-attach-file-description]"),this.progressUploadCV=this.$root.querySelector("[data-attach-file-progress]"),this.progressUploadCVLine=this.$root.querySelector("[data-attach-file-progress-line]"),this.progressUploadCVPercentValue=this.$root.querySelector("[data-attach-file-percent]"),this.spinnerCVFile=this.$root.querySelector("[data-attach-file-spinner]"),this.successUploadCVFileIcon=this.$root.querySelector("[data-attach-file-success-uploaded]"),this.cancelCVFileIcon=this.$root.querySelector("[data-attach-file-cancel]"),this.trashCVFileIcon=this.$root.querySelector("[data-attach-file-trash]"),this.options=t,this.ATTACH_FILE=null,this.file=null,this.#e()}showElement(e){e.style.display="inline-block"}hideElement(e){e.style.display="none"}cancelCv(){this.options.handleCanceled?.(this.cvInput),this.setInvalidStatus(),this.cvInput.value="",this.ATTACH_FILE=null,this.labelCVFile.textContent="Add Your English CV",this.hideElement(this.progressUploadCVPercentValue),this.hideElement(this.spinnerCVFile),this.hideElement(this.cancelCVFileIcon),this.hideElement(this.trashCVFileIcon),this.hideElement(this.progressUploadCV),this.hideElement(this.successUploadCVFileIcon),this.showElement(this.infoCVFile),this.infoCVFile.textContent=this.ATTACH_FILE_LABEL_TEXT_CONTENT,this.fileBody.style.pointerEvents="auto",this.labelCVFile.classList.remove("owner-file-name"),this.progressUploadCVLine.classList.remove("uploaded")}removeInvalidStatus(){this.$root.classList.remove(this.NO_VALID_CLASS)}setInvalidStatus(){this.$root.classList.add(this.NO_VALID_CLASS)}handleChange(){try{if(this.removeInvalidStatus(),this.infoCVFile.textContent=this.ATTACH_FILE_LABEL_TEXT_CONTENT,!this.cvInput.value.length){this.setInvalidStatus();return}let e=this.cvInput.files[0];this.file=e,this.options.handleChangeValidateInput?.(this.cvInput);let t=new FileReader;this.showElement(this.cancelCVFileIcon),this.showElement(this.progressUploadCV),this.showElement(this.spinnerCVFile),this.showElement(this.progressUploadCVPercentValue),this.fileBody.style.pointerEvents="none",this.labelCVFile.classList.add("owner-file-name"),this.labelCVFile.innerText=e.name,this.infoCVFile.style.display="none",t.onload=()=>{this.options.handleSuccessAttach?.(this.cvInput),this.showElement(this.successUploadCVFileIcon),this.showElement(this.trashCVFileIcon),this.hideElement(this.spinnerCVFile),this.hideElement(this.cancelCVFileIcon),this.ATTACH_FILE=e},t.onprogress=e=>{if(e.lengthComputable){let t=e.loaded/e.total*100;this.progressUploadCVLine.style.width=t+"%",this.progressUploadCVPercentValue.textContent=Math.round(t)+"%",100===t&&this.progressUploadCVLine.classList.add("uploaded")}},t.readAsDataURL(e)}catch(e){console.log("ERROR FILE",e),this.cancelCv(),this.showElement(this.trashCVFileIcon),this.infoCVFile.textContent=e?.message,this.labelCVFile.textContent=this.file?.name||"",this.file=null}}setFile(e){let t=new DataTransfer;t.items.add(e),this.cvInput.files=t.files,this.ATTACH_FILE=e}getFile(){return this.ATTACH_FILE}setSuccessfulyUploadedStatus(e){e&&(this.setFile(e),this.fileBody.style.pointerEvents="none",this.labelCVFile.classList.add("owner-file-name"),this.labelCVFile.innerText=e.name,this.infoCVFile.style.display="none",this.showElement(this.progressUploadCV),this.showElement(this.progressUploadCVPercentValue),this.showElement(this.successUploadCVFileIcon),this.showElement(this.trashCVFileIcon),this.hideElement(this.spinnerCVFile),this.hideElement(this.cancelCVFileIcon),this.progressUploadCVLine.style.width="100%",this.progressUploadCVPercentValue.textContent="100%",this.progressUploadCVLine.classList.add("uploaded"),this.options.handleSuccessAttach?.(this.cvInput))}#e(){this.cvInput?.addEventListener("change",this.handleChange.bind(this)),this.trashCVFileIcon?.addEventListener("click",this.cancelCv.bind(this))}}const l=(e,t)=>t.some(t=>e instanceof t),u=new WeakMap,h=new WeakMap,c=new WeakMap,p=new WeakMap,d=new WeakMap;let f={get(e,t,i){if(e instanceof IDBTransaction){if("done"===t)return h.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return i.objectStoreNames[1]?void 0:i.objectStore(i.objectStoreNames[0])}return v(e[t])},set:(e,t,i)=>(e[t]=i,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function v(i){var s;if(i instanceof IDBRequest)return function(e){let t=new Promise((t,i)=>{let s=()=>{e.removeEventListener("success",n),e.removeEventListener("error",o)},n=()=>{t(v(e.result)),s()},o=()=>{i(e.error),s()};e.addEventListener("success",n),e.addEventListener("error",o)});return t.then(t=>{t instanceof IDBCursor&&u.set(t,e)}).catch(()=>{}),d.set(t,e),t}(i);if(p.has(i))return p.get(i);let n="function"==typeof(s=i)?s!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(t||(t=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(s)?function(...e){return s.apply(m(this),e),v(u.get(this))}:function(...e){return v(s.apply(m(this),e))}:function(e,...t){let i=s.call(m(this),e,...t);return c.set(i,e.sort?e.sort():[e]),v(i)}:(s instanceof IDBTransaction&&function(e){if(h.has(e))return;let t=new Promise((t,i)=>{let s=()=>{e.removeEventListener("complete",n),e.removeEventListener("error",o),e.removeEventListener("abort",o)},n=()=>{t(),s()},o=()=>{i(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",n),e.addEventListener("error",o),e.addEventListener("abort",o)});h.set(e,t)}(s),l(s,e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])))?new Proxy(s,f):s;return n!==i&&(p.set(i,n),d.set(n,i)),n}const m=e=>d.get(e),g=["get","getKey","getAll","getAllKeys","count"],y=["put","add","delete","clear"],b=new Map;function S(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t))return;if(b.get(t))return b.get(t);let i=t.replace(/FromIndex$/,""),s=t!==i,n=y.includes(i);if(!(i in(s?IDBIndex:IDBObjectStore).prototype)||!(n||g.includes(i)))return;let o=async function(e,...t){let o=this.transaction(e,n?"readwrite":"readonly"),r=o.store;return s&&(r=r.index(t.shift())),(await Promise.all([r[i](...t),n&&o.done]))[0]};return b.set(t,o),o}f={...i=f,get:(e,t,s)=>S(e,t)||i.get(e,t,s),has:(e,t)=>!!S(e,t)||i.has(e,t)};class k{name=null;idb=null;constructor(e,t,i){this.name=e,this.idb=function(e,t,{blocked:i,upgrade:s,blocking:n,terminated:o}={}){let r=indexedDB.open(e,t),a=v(r);return s&&r.addEventListener("upgradeneeded",e=>{s(v(r.result),e.oldVersion,e.newVersion,v(r.transaction),e)}),i&&r.addEventListener("blocked",e=>i(e.oldVersion,e.newVersion,e)),a.then(e=>{o&&e.addEventListener("close",()=>o()),n&&e.addEventListener("versionchange",e=>n(e.oldVersion,e.newVersion,e))}).catch(()=>{}),a}(e,t,i),this.setup()}async get(e){return(await this.idb).get(this.name,e)}async set(e,t){return(await this.idb).put(this.name,t,e)}async del(e){return(await this.idb).delete(this.name,e)}async clear(){return(await this.idb).clear(this.name)}async keys(){return(await this.idb).getAllKeys(this.name)}setup(){window[`idb-${this.name}`]=this}}class C{static $spinner=document.querySelector(".spinner");static showSpinner(){C.$spinner.classList.add("show")}static hideSpinner(){C.$spinner.classList.remove("show")}}function E(e){return"string"==typeof e||e instanceof String}function w(e){var t;return"object"==typeof e&&null!=e&&(null==e?void 0:null==(t=e.constructor)?void 0:t.name)==="Object"}const _={NONE:"NONE",LEFT:"LEFT",FORCE_LEFT:"FORCE_LEFT",RIGHT:"RIGHT",FORCE_RIGHT:"FORCE_RIGHT"};function A(e){return e.replace(/([.*+?^=!:${}()|[\]/\\])/g,"\\$1")}function O(e,t){let i;if(t===e)return!0;let s=Array.isArray(t),n=Array.isArray(e);if(s&&n){if(t.length!=e.length)return!1;for(i=0;i<t.length;i++)if(!O(t[i],e[i]))return!1;return!0}if(s!=n)return!1;if(t&&e&&"object"==typeof t&&"object"==typeof e){let s=t instanceof Date,n=e instanceof Date;if(s&&n)return t.getTime()==e.getTime();if(s!=n)return!1;let o=t instanceof RegExp,r=e instanceof RegExp;if(o&&r)return t.toString()==e.toString();if(o!=r)return!1;let a=Object.keys(t);for(i=0;i<a.length;i++)if(!Object.prototype.hasOwnProperty.call(e,a[i]))return!1;for(i=0;i<a.length;i++)if(!O(e[a[i]],t[a[i]]))return!1;return!0}return!!t&&!!e&&"function"==typeof t&&"function"==typeof e&&t.toString()===e.toString()}class x{constructor(e){for(Object.assign(this,e);this.value.slice(0,this.startChangePos)!==this.oldValue.slice(0,this.startChangePos);)--this.oldSelection.start}get startChangePos(){return Math.min(this.cursorPos,this.oldSelection.start)}get insertedCount(){return this.cursorPos-this.startChangePos}get inserted(){return this.value.substr(this.startChangePos,this.insertedCount)}get removedCount(){return Math.max(this.oldSelection.end-this.startChangePos||this.oldValue.length-this.value.length,0)}get removed(){return this.oldValue.substr(this.startChangePos,this.removedCount)}get head(){return this.value.substring(0,this.startChangePos)}get tail(){return this.value.substring(this.startChangePos+this.insertedCount)}get removeDirection(){return!this.removedCount||this.insertedCount?_.NONE:(this.oldSelection.end===this.cursorPos||this.oldSelection.start===this.cursorPos)&&this.oldSelection.end===this.oldSelection.start?_.RIGHT:_.LEFT}}function D(e,t){return new D.InputMask(e,t)}function I(e){if(null==e)throw Error("mask property should be defined");return e instanceof RegExp?D.MaskedRegExp:E(e)?D.MaskedPattern:e===Date?D.MaskedDate:e===Number?D.MaskedNumber:Array.isArray(e)||e===Array?D.MaskedDynamic:D.Masked&&e.prototype instanceof D.Masked?e:D.Masked&&e instanceof D.Masked?e.constructor:e instanceof Function?D.MaskedFunction:(console.warn("Mask not found for mask",e),D.Masked)}function F(e){if(!e)throw Error("Options in not defined");if(D.Masked){if(e.prototype instanceof D.Masked)return{mask:e};let{mask:t,...i}=e instanceof D.Masked?{mask:e}:w(e)&&e.mask instanceof D.Masked?e:{};if(t){let e=t.mask;return{...function e(t,i){return Array.isArray(i)?e(t,(e,t)=>i.includes(t)):Object.entries(t).reduce((e,t)=>{let[s,n]=t;return i(n,s)&&(e[s]=n),e},{})}(t,(e,t)=>!t.startsWith("_")),mask:t.constructor,_mask:e,...i}}}return w(e)?{...e}:{mask:e}}function T(e){if(D.Masked&&e instanceof D.Masked)return e;let t=F(e),i=I(t.mask);if(!i)throw Error("Masked class is not found for provided mask, appropriate module needs to be imported manually before creating mask.");return t.mask===i&&delete t.mask,t._mask&&(t.mask=t._mask,delete t._mask),new i(t)}D.createMask=T;class V{get selectionStart(){let e;try{e=this._unsafeSelectionStart}catch{}return null!=e?e:this.value.length}get selectionEnd(){let e;try{e=this._unsafeSelectionEnd}catch{}return null!=e?e:this.value.length}select(e,t){if(null!=e&&null!=t&&(e!==this.selectionStart||t!==this.selectionEnd))try{this._unsafeSelect(e,t)}catch{}}get isActive(){return!1}}D.MaskElement=V;class L extends V{constructor(e){super(),this.input=e,this._handlers={}}get rootElement(){var e,t,i;return null!=(e=null==(t=(i=this.input).getRootNode)?void 0:t.call(i))?e:document}get isActive(){return this.input===this.rootElement.activeElement}bindEvents(e){Object.keys(e).forEach(t=>this._toggleEventHandler(L.EVENTS_MAP[t],e[t]))}unbindEvents(){Object.keys(this._handlers).forEach(e=>this._toggleEventHandler(e))}_toggleEventHandler(e,t){this._handlers[e]&&(this.input.removeEventListener(e,this._handlers[e]),delete this._handlers[e]),t&&(this.input.addEventListener(e,t),this._handlers[e]=t)}}L.EVENTS_MAP={selectionChange:"keydown",input:"input",drop:"drop",click:"click",focus:"focus",commit:"blur"},D.HTMLMaskElement=L;class M extends L{constructor(e){super(e),this.input=e,this._handlers={}}get _unsafeSelectionStart(){return null!=this.input.selectionStart?this.input.selectionStart:this.value.length}get _unsafeSelectionEnd(){return this.input.selectionEnd}_unsafeSelect(e,t){this.input.setSelectionRange(e,t)}get value(){return this.input.value}set value(e){this.input.value=e}}D.HTMLMaskElement=L;class P extends L{get _unsafeSelectionStart(){let e=this.rootElement,t=e.getSelection&&e.getSelection(),i=t&&t.anchorOffset,s=t&&t.focusOffset;return null==s||null==i||i<s?i:s}get _unsafeSelectionEnd(){let e=this.rootElement,t=e.getSelection&&e.getSelection(),i=t&&t.anchorOffset,s=t&&t.focusOffset;return null==s||null==i||i>s?i:s}_unsafeSelect(e,t){if(!this.rootElement.createRange)return;let i=this.rootElement.createRange();i.setStart(this.input.firstChild||this.input,e),i.setEnd(this.input.lastChild||this.input,t);let s=this.rootElement,n=s.getSelection&&s.getSelection();n&&(n.removeAllRanges(),n.addRange(i))}get value(){return this.input.textContent||""}set value(e){this.input.textContent=e}}D.HTMLContenteditableMaskElement=P,D.InputMask=class{constructor(e,t){this.el=e instanceof V?e:e.isContentEditable&&"INPUT"!==e.tagName&&"TEXTAREA"!==e.tagName?new P(e):new M(e),this.masked=T(t),this._listeners={},this._value="",this._unmaskedValue="",this._saveSelection=this._saveSelection.bind(this),this._onInput=this._onInput.bind(this),this._onChange=this._onChange.bind(this),this._onDrop=this._onDrop.bind(this),this._onFocus=this._onFocus.bind(this),this._onClick=this._onClick.bind(this),this.alignCursor=this.alignCursor.bind(this),this.alignCursorFriendly=this.alignCursorFriendly.bind(this),this._bindEvents(),this.updateValue(),this._onChange()}maskEquals(e){var t;return null==e||(null==(t=this.masked)?void 0:t.maskEquals(e))}get mask(){return this.masked.mask}set mask(e){if(this.maskEquals(e))return;if(!(e instanceof D.Masked)&&this.masked.constructor===I(e)){this.masked.updateOptions({mask:e});return}let t=e instanceof D.Masked?e:T({mask:e});t.unmaskedValue=this.masked.unmaskedValue,this.masked=t}get value(){return this._value}set value(e){this.value!==e&&(this.masked.value=e,this.updateControl(),this.alignCursor())}get unmaskedValue(){return this._unmaskedValue}set unmaskedValue(e){this.unmaskedValue!==e&&(this.masked.unmaskedValue=e,this.updateControl(),this.alignCursor())}get typedValue(){return this.masked.typedValue}set typedValue(e){this.masked.typedValueEquals(e)||(this.masked.typedValue=e,this.updateControl(),this.alignCursor())}get displayValue(){return this.masked.displayValue}_bindEvents(){this.el.bindEvents({selectionChange:this._saveSelection,input:this._onInput,drop:this._onDrop,click:this._onClick,focus:this._onFocus,commit:this._onChange})}_unbindEvents(){this.el&&this.el.unbindEvents()}_fireEvent(e,t){let i=this._listeners[e];i&&i.forEach(e=>e(t))}get selectionStart(){return this._cursorChanging?this._changingCursorPos:this.el.selectionStart}get cursorPos(){return this._cursorChanging?this._changingCursorPos:this.el.selectionEnd}set cursorPos(e){this.el&&this.el.isActive&&(this.el.select(e,e),this._saveSelection())}_saveSelection(){this.displayValue!==this.el.value&&console.warn("Element value was changed outside of mask. Syncronize mask using `mask.updateValue()` to work properly."),this._selection={start:this.selectionStart,end:this.cursorPos}}updateValue(){this.masked.value=this.el.value,this._value=this.masked.value}updateControl(){let e=this.masked.unmaskedValue,t=this.masked.value,i=this.displayValue,s=this.unmaskedValue!==e||this.value!==t;this._unmaskedValue=e,this._value=t,this.el.value!==i&&(this.el.value=i),s&&this._fireChangeEvents()}updateOptions(e){let{mask:t,...i}=e,s=!this.maskEquals(t),n=!O(this.masked,i);s&&(this.mask=t),n&&this.masked.updateOptions(i),(s||n)&&this.updateControl()}updateCursor(e){null!=e&&(this.cursorPos=e,this._delayUpdateCursor(e))}_delayUpdateCursor(e){this._abortUpdateCursor(),this._changingCursorPos=e,this._cursorChanging=setTimeout(()=>{this.el&&(this.cursorPos=this._changingCursorPos,this._abortUpdateCursor())},10)}_fireChangeEvents(){this._fireEvent("accept",this._inputEvent),this.masked.isComplete&&this._fireEvent("complete",this._inputEvent)}_abortUpdateCursor(){this._cursorChanging&&(clearTimeout(this._cursorChanging),delete this._cursorChanging)}alignCursor(){this.cursorPos=this.masked.nearestInputPos(this.masked.nearestInputPos(this.cursorPos,_.LEFT))}alignCursorFriendly(){this.selectionStart===this.cursorPos&&this.alignCursor()}on(e,t){return this._listeners[e]||(this._listeners[e]=[]),this._listeners[e].push(t),this}off(e,t){if(!this._listeners[e])return this;if(!t)return delete this._listeners[e],this;let i=this._listeners[e].indexOf(t);return i>=0&&this._listeners[e].splice(i,1),this}_onInput(e){if(this._inputEvent=e,this._abortUpdateCursor(),!this._selection)return this.updateValue();let t=new x({value:this.el.value,cursorPos:this.cursorPos,oldValue:this.displayValue,oldSelection:this._selection}),i=this.masked.rawInputValue,s=this.masked.splice(t.startChangePos,t.removed.length,t.inserted,t.removeDirection,{input:!0,raw:!0}).offset,n=i===this.masked.rawInputValue?t.removeDirection:_.NONE,o=this.masked.nearestInputPos(t.startChangePos+s,n);n!==_.NONE&&(o=this.masked.nearestInputPos(o,_.NONE)),this.updateControl(),this.updateCursor(o),delete this._inputEvent}_onChange(){this.displayValue!==this.el.value&&this.updateValue(),this.masked.doCommit(),this.updateControl(),this._saveSelection()}_onDrop(e){e.preventDefault(),e.stopPropagation()}_onFocus(e){this.alignCursorFriendly()}_onClick(e){this.alignCursorFriendly()}destroy(){this._unbindEvents(),this._listeners.length=0,delete this.el}};class B{static normalize(e){return Array.isArray(e)?e:[e,new B]}constructor(e){Object.assign(this,{inserted:"",rawInserted:"",skip:!1,tailShift:0},e)}aggregate(e){return this.rawInserted+=e.rawInserted,this.skip=this.skip||e.skip,this.inserted+=e.inserted,this.tailShift+=e.tailShift,this}get offset(){return this.tailShift+this.inserted.length}}D.ChangeDetails=B;class ${constructor(e,t,i){void 0===e&&(e=""),void 0===t&&(t=0),this.value=e,this.from=t,this.stop=i}toString(){return this.value}extend(e){this.value+=String(e)}appendTo(e){return e.append(this.toString(),{tail:!0}).aggregate(e._appendPlaceholder())}get state(){return{value:this.value,from:this.from,stop:this.stop}}set state(e){Object.assign(this,e)}unshift(e){if(!this.value.length||null!=e&&this.from>=e)return"";let t=this.value[0];return this.value=this.value.slice(1),t}shift(){if(!this.value.length)return"";let e=this.value[this.value.length-1];return this.value=this.value.slice(0,-1),e}}class N{constructor(e){this._value="",this._update({...N.DEFAULTS,...e}),this._initialized=!0}updateOptions(e){Object.keys(e).length&&this.withValueRefresh(this._update.bind(this,e))}_update(e){Object.assign(this,e)}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value}reset(){this._value=""}get value(){return this._value}set value(e){this.resolve(e,{input:!0})}resolve(e,t){void 0===t&&(t={input:!0}),this.reset(),this.append(e,t,""),this.doCommit()}get unmaskedValue(){return this.value}set unmaskedValue(e){this.resolve(e,{})}get typedValue(){return this.parse?this.parse(this.value,this):this.unmaskedValue}set typedValue(e){this.format?this.value=this.format(e,this):this.unmaskedValue=String(e)}get rawInputValue(){return this.extractInput(0,this.value.length,{raw:!0})}set rawInputValue(e){this.resolve(e,{raw:!0})}get displayValue(){return this.value}get isComplete(){return!0}get isFilled(){return this.isComplete}nearestInputPos(e,t){return e}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),Math.min(this.value.length,t-e)}extractInput(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),this.value.slice(e,t)}extractTail(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),new $(this.extractInput(e,t),e)}appendTail(e){return E(e)&&(e=new $(String(e))),e.appendTo(this)}_appendCharRaw(e,t){return e?(this._value+=e,new B({inserted:e,rawInserted:e})):new B}_appendChar(e,t,i){let s;void 0===t&&(t={});let n=this.state;if([e,s]=this.doPrepareChar(e,t),(s=s.aggregate(this._appendCharRaw(e,t))).inserted){let e;let o=!1!==this.doValidate(t);if(o&&null!=i){let t=this.state;!0===this.overwrite&&(e=i.state,i.unshift(this.value.length-s.tailShift));let n=this.appendTail(i);(o=n.rawInserted===i.toString())&&n.inserted||"shift"!==this.overwrite||(this.state=t,e=i.state,i.shift(),o=(n=this.appendTail(i)).rawInserted===i.toString()),o&&n.inserted&&(this.state=t)}!o&&(s=new B,this.state=n,i&&e&&(i.state=e))}return s}_appendPlaceholder(){return new B}_appendEager(){return new B}append(e,t,i){let s;if(!E(e))throw Error("value should be string");let n=E(i)?new $(String(i)):i;null!=t&&t.tail&&(t._beforeTailState=this.state),[e,s]=this.doPrepare(e,t);for(let i=0;i<e.length;++i){let o=this._appendChar(e[i],t,n);if(!o.rawInserted&&!this.doSkipInvalid(e[i],t,n))break;s.aggregate(o)}return(!0===this.eager||"append"===this.eager)&&null!=t&&t.input&&e&&s.aggregate(this._appendEager()),null!=n&&(s.tailShift+=this.appendTail(n).tailShift),s}remove(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),this._value=this.value.slice(0,e)+this.value.slice(t),new B}withValueRefresh(e){if(this._refreshing||!this._initialized)return e();this._refreshing=!0;let t=this.rawInputValue,i=this.value,s=e();return this.rawInputValue=t,this.value&&this.value!==i&&0===i.indexOf(this.value)&&this.append(i.slice(this.value.length),{},""),delete this._refreshing,s}runIsolated(e){if(this._isolated||!this._initialized)return e(this);this._isolated=!0;let t=this.state,i=e(this);return this.state=t,delete this._isolated,i}doSkipInvalid(e,t,i){return!!this.skipInvalid}doPrepare(e,t){return void 0===t&&(t={}),B.normalize(this.prepare?this.prepare(e,this,t):e)}doPrepareChar(e,t){return void 0===t&&(t={}),B.normalize(this.prepareChar?this.prepareChar(e,this,t):e)}doValidate(e){return(!this.validate||this.validate(this.value,this,e))&&(!this.parent||this.parent.doValidate(e))}doCommit(){this.commit&&this.commit(this.value,this)}splice(e,t,i,s,n){let o;void 0===s&&(s=_.NONE),void 0===n&&(n={input:!0});let r=e+t,a=this.extractTail(r),l=!0===this.eager||"remove"===this.eager;l&&(s=function(e){switch(e){case _.LEFT:return _.FORCE_LEFT;case _.RIGHT:return _.FORCE_RIGHT;default:return e}}(s),o=this.extractInput(0,r,{raw:!0}));let u=e,h=new B;if(s!==_.NONE&&(u=this.nearestInputPos(e,t>1&&0!==e&&!l?_.NONE:s),h.tailShift=u-e),h.aggregate(this.remove(u)),l&&s!==_.NONE&&o===this.rawInputValue){if(s===_.FORCE_LEFT){let e;for(;o===this.rawInputValue&&(e=this.value.length);)h.aggregate(new B({tailShift:-1})).aggregate(this.remove(e-1))}else s===_.FORCE_RIGHT&&a.unshift()}return h.aggregate(this.append(i,n,a))}maskEquals(e){return this.mask===e}typedValueEquals(e){let t=this.typedValue;return e===t||N.EMPTY_VALUES.includes(e)&&N.EMPTY_VALUES.includes(t)||!!this.format&&this.format(e,this)===this.format(this.typedValue,this)}}N.DEFAULTS={skipInvalid:!0},N.EMPTY_VALUES=[void 0,null,""],D.Masked=N;class R{constructor(e,t){void 0===e&&(e=[]),void 0===t&&(t=0),this.chunks=e,this.from=t}toString(){return this.chunks.map(String).join("")}extend(e){if(!String(e))return;e=E(e)?new $(String(e)):e;let t=this.chunks[this.chunks.length-1],i=t&&(t.stop===e.stop||null==e.stop)&&e.from===t.from+t.toString().length;if(e instanceof $)i?t.extend(e.toString()):this.chunks.push(e);else if(e instanceof R){if(null==e.stop){let t;for(;e.chunks.length&&null==e.chunks[0].stop;)t=e.chunks.shift(),t.from+=e.from,this.extend(t)}e.toString()&&(e.stop=e.blockIndex,this.chunks.push(e))}}appendTo(e){if(!(e instanceof D.MaskedPattern)){let t=new $(this.toString());return t.appendTo(e)}let t=new B;for(let i=0;i<this.chunks.length&&!t.skip;++i){let s;let n=this.chunks[i],o=e._mapPosToBlock(e.value.length),r=n.stop;if(null!=r&&(!o||o.index<=r)){if(n instanceof R||e._stops.indexOf(r)>=0){let i=e._appendPlaceholder(r);t.aggregate(i)}s=n instanceof R&&e._blocks[r]}if(s){let i=s.appendTail(n);i.skip=!1,t.aggregate(i),e._value+=i.inserted;let o=n.toString().slice(i.rawInserted.length);o&&t.aggregate(e.append(o,{tail:!0}))}else t.aggregate(e.append(n.toString(),{tail:!0}))}return t}get state(){return{chunks:this.chunks.map(e=>e.state),from:this.from,stop:this.stop,blockIndex:this.blockIndex}}set state(e){let{chunks:t,...i}=e;Object.assign(this,i),this.chunks=t.map(e=>{let t="chunks"in e?new R:new $;return t.state=e,t})}unshift(e){if(!this.chunks.length||null!=e&&this.from>=e)return"";let t=null!=e?e-this.from:e,i=0;for(;i<this.chunks.length;){let e=this.chunks[i],s=e.unshift(t);if(e.toString()){if(!s)break;++i}else this.chunks.splice(i,1);if(s)return s}return""}shift(){if(!this.chunks.length)return"";let e=this.chunks.length-1;for(;0<=e;){let t=this.chunks[e],i=t.shift();if(t.toString()){if(!i)break;--e}else this.chunks.splice(e,1);if(i)return i}return""}}class q{constructor(e,t){this.masked=e,this._log=[];let{offset:i,index:s}=e._mapPosToBlock(t)||(t<0?{index:0,offset:0}:{index:this.masked._blocks.length,offset:0});this.offset=i,this.index=s,this.ok=!1}get block(){return this.masked._blocks[this.index]}get pos(){return this.masked._blockStartPos(this.index)+this.offset}get state(){return{index:this.index,offset:this.offset,ok:this.ok}}set state(e){Object.assign(this,e)}pushState(){this._log.push(this.state)}popState(){let e=this._log.pop();return e&&(this.state=e),e}bindBlock(){!this.block&&(this.index<0&&(this.index=0,this.offset=0),this.index>=this.masked._blocks.length&&(this.index=this.masked._blocks.length-1,this.offset=this.block.value.length))}_pushLeft(e){for(this.pushState(),this.bindBlock();0<=this.index;--this.index,this.offset=(null==(t=this.block)?void 0:t.value.length)||0){var t;if(e())return this.ok=!0}return this.ok=!1}_pushRight(e){for(this.pushState(),this.bindBlock();this.index<this.masked._blocks.length;++this.index,this.offset=0)if(e())return this.ok=!0;return this.ok=!1}pushLeftBeforeFilled(){return this._pushLeft(()=>{if(!this.block.isFixed&&this.block.value&&(this.offset=this.block.nearestInputPos(this.offset,_.FORCE_LEFT),0!==this.offset))return!0})}pushLeftBeforeInput(){return this._pushLeft(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,_.LEFT),!0})}pushLeftBeforeRequired(){return this._pushLeft(()=>{if(!this.block.isFixed&&(!this.block.isOptional||this.block.value))return this.offset=this.block.nearestInputPos(this.offset,_.LEFT),!0})}pushRightBeforeFilled(){return this._pushRight(()=>{if(!this.block.isFixed&&this.block.value&&(this.offset=this.block.nearestInputPos(this.offset,_.FORCE_RIGHT),this.offset!==this.block.value.length))return!0})}pushRightBeforeInput(){return this._pushRight(()=>{if(!this.block.isFixed)return this.offset=this.block.nearestInputPos(this.offset,_.NONE),!0})}pushRightBeforeRequired(){return this._pushRight(()=>{if(!this.block.isFixed&&(!this.block.isOptional||this.block.value))return this.offset=this.block.nearestInputPos(this.offset,_.NONE),!0})}}class H{constructor(e){Object.assign(this,e),this._value="",this.isFixed=!0}get value(){return this._value}get unmaskedValue(){return this.isUnmasking?this.value:""}get rawInputValue(){return this._isRawInput?this.value:""}get displayValue(){return this.value}reset(){this._isRawInput=!1,this._value=""}remove(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),this._value=this._value.slice(0,e)+this._value.slice(t),this._value||(this._isRawInput=!1),new B}nearestInputPos(e,t){void 0===t&&(t=_.NONE);let i=this._value.length;switch(t){case _.LEFT:case _.FORCE_LEFT:return 0;case _.NONE:case _.RIGHT:case _.FORCE_RIGHT:default:return i}}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),this._isRawInput?t-e:0}extractInput(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=this._value.length),void 0===i&&(i={}),i.raw&&this._isRawInput&&this._value.slice(e,t)||""}get isComplete(){return!0}get isFilled(){return!!this._value}_appendChar(e,t){void 0===t&&(t={});let i=new B;if(this.isFilled)return i;let s=!0===this.eager||"append"===this.eager,n=this.char===e,o=n&&(this.isUnmasking||t.input||t.raw)&&(!t.raw||!s)&&!t.tail;return o&&(i.rawInserted=this.char),this._value=i.inserted=this.char,this._isRawInput=o&&(t.raw||t.input),i}_appendEager(){return this._appendChar(this.char,{tail:!0})}_appendPlaceholder(){let e=new B;return this.isFilled||(this._value=e.inserted=this.char),e}extractTail(){return new $("")}appendTail(e){return E(e)&&(e=new $(String(e))),e.appendTo(this)}append(e,t,i){let s=this._appendChar(e[0],t);return null!=i&&(s.tailShift+=this.appendTail(i).tailShift),s}doCommit(){}get state(){return{_value:this._value,_rawInputValue:this.rawInputValue}}set state(e){this._value=e._value,this._isRawInput=!!e._rawInputValue}}class j{constructor(e){let{parent:t,isOptional:i,placeholderChar:s,displayChar:n,lazy:o,eager:r,...a}=e;this.masked=T(a),Object.assign(this,{parent:t,isOptional:i,placeholderChar:s,displayChar:n,lazy:o,eager:r})}reset(){this.isFilled=!1,this.masked.reset()}remove(e,t){return(void 0===e&&(e=0),void 0===t&&(t=this.value.length),0===e&&t>=1)?(this.isFilled=!1,this.masked.remove(e,t)):new B}get value(){return this.masked.value||(this.isFilled&&!this.isOptional?this.placeholderChar:"")}get unmaskedValue(){return this.masked.unmaskedValue}get rawInputValue(){return this.masked.rawInputValue}get displayValue(){return this.masked.value&&this.displayChar||this.value}get isComplete(){return!!this.masked.value||this.isOptional}_appendChar(e,t){if(void 0===t&&(t={}),this.isFilled)return new B;let i=this.masked.state,s=this.masked._appendChar(e,this.currentMaskFlags(t));return s.inserted&&!1===this.doValidate(t)&&(s.inserted=s.rawInserted="",this.masked.state=i),s.inserted||this.isOptional||this.lazy||t.input||(s.inserted=this.placeholderChar),s.skip=!s.inserted&&!this.isOptional,this.isFilled=!!s.inserted,s}append(e,t,i){return this.masked.append(e,this.currentMaskFlags(t),i)}_appendPlaceholder(){let e=new B;return this.isFilled||this.isOptional||(this.isFilled=!0,e.inserted=this.placeholderChar),e}_appendEager(){return new B}extractTail(e,t){return this.masked.extractTail(e,t)}appendTail(e){return this.masked.appendTail(e)}extractInput(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),this.masked.extractInput(e,t,i)}nearestInputPos(e,t){void 0===t&&(t=_.NONE);let i=this.value.length,s=Math.min(Math.max(e,0),i);switch(t){case _.LEFT:case _.FORCE_LEFT:return this.isComplete?s:0;case _.RIGHT:case _.FORCE_RIGHT:return this.isComplete?s:i;case _.NONE:default:return s}}totalInputPositions(e,t){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),this.value.slice(e,t).length}doValidate(e){return this.masked.doValidate(this.currentMaskFlags(e))&&(!this.parent||this.parent.doValidate(this.currentMaskFlags(e)))}doCommit(){this.masked.doCommit()}get state(){return{_value:this.value,_rawInputValue:this.rawInputValue,masked:this.masked.state,isFilled:this.isFilled}}set state(e){this.masked.state=e.masked,this.isFilled=e.isFilled}currentMaskFlags(e){var t;return{...e,_beforeTailState:(null==e?void 0:null==(t=e._beforeTailState)?void 0:t.masked)||(null==e?void 0:e._beforeTailState)}}}j.DEFAULT_DEFINITIONS={0:/\d/,a:/[\u0041-\u005A\u0061-\u007A\u00AA\u00B5\u00BA\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0\u08A2-\u08AC\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097F\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C33\u0C35-\u0C39\u0C3D\u0C58\u0C59\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D60\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F4\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191C\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19C1-\u19C7\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FCC\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA697\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA78E\uA790-\uA793\uA7A0-\uA7AA\uA7F8-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA80-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uABC0-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]/,"*":/./},D.MaskedRegExp=class extends N{updateOptions(e){super.updateOptions(e)}_update(e){let t=e.mask;t&&(e.validate=e=>e.search(t)>=0),super._update(e)}};class G extends N{constructor(e){super({...G.DEFAULTS,...e,definitions:Object.assign({},j.DEFAULT_DEFINITIONS,null==e?void 0:e.definitions)})}updateOptions(e){super.updateOptions(e)}_update(e){e.definitions=Object.assign({},this.definitions,e.definitions),super._update(e),this._rebuildMask()}_rebuildMask(){let e=this.definitions;this._blocks=[],this._stops=[],this._maskedBlocks={};let t=this.mask;if(!t||!e)return;let i=!1,s=!1;for(let n=0;n<t.length;++n){if(this.blocks){let e=t.slice(n),i=Object.keys(this.blocks).filter(t=>0===e.indexOf(t));i.sort((e,t)=>t.length-e.length);let s=i[0];if(s){let e=T({lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,overwrite:this.overwrite,...F(this.blocks[s]),parent:this});e&&(this._blocks.push(e),this._maskedBlocks[s]||(this._maskedBlocks[s]=[]),this._maskedBlocks[s].push(this._blocks.length-1)),n+=s.length-1;continue}}let o=t[n],r=o in e;if(o===G.STOP_CHAR){this._stops.push(this._blocks.length);continue}if("{"===o||"}"===o){i=!i;continue}if("["===o||"]"===o){s=!s;continue}if(o===G.ESCAPE_CHAR){if(!(o=t[++n]))break;r=!1}let a=r?new j({isOptional:s,lazy:this.lazy,eager:this.eager,placeholderChar:this.placeholderChar,displayChar:this.displayChar,...F(e[o]),parent:this}):new H({char:o,eager:this.eager,isUnmasking:i});this._blocks.push(a)}}get state(){return{...super.state,_blocks:this._blocks.map(e=>e.state)}}set state(e){let{_blocks:t,...i}=e;this._blocks.forEach((e,i)=>e.state=t[i]),super.state=i}reset(){super.reset(),this._blocks.forEach(e=>e.reset())}get isComplete(){return this._blocks.every(e=>e.isComplete)}get isFilled(){return this._blocks.every(e=>e.isFilled)}get isFixed(){return this._blocks.every(e=>e.isFixed)}get isOptional(){return this._blocks.every(e=>e.isOptional)}doCommit(){this._blocks.forEach(e=>e.doCommit()),super.doCommit()}get unmaskedValue(){return this._blocks.reduce((e,t)=>e+=t.unmaskedValue,"")}set unmaskedValue(e){super.unmaskedValue=e}get value(){return this._blocks.reduce((e,t)=>e+=t.value,"")}set value(e){super.value=e}get displayValue(){return this._blocks.reduce((e,t)=>e+=t.displayValue,"")}appendTail(e){return super.appendTail(e).aggregate(this._appendPlaceholder())}_appendEager(){var e;let t=new B,i=null==(e=this._mapPosToBlock(this.value.length))?void 0:e.index;if(null==i)return t;this._blocks[i].isFilled&&++i;for(let e=i;e<this._blocks.length;++e){let i=this._blocks[e]._appendEager();if(!i.inserted)break;t.aggregate(i)}return t}_appendCharRaw(e,t){void 0===t&&(t={});let i=this._mapPosToBlock(this.value.length),s=new B;if(!i)return s;for(let r=i.index;;++r){var n,o;let i=this._blocks[r];if(!i)break;let a=i._appendChar(e,{...t,_beforeTailState:null==(n=t._beforeTailState)?void 0:null==(o=n._blocks)?void 0:o[r]}),l=a.skip;if(s.aggregate(a),l||a.rawInserted)break}return s}extractTail(e,t){void 0===e&&(e=0),void 0===t&&(t=this.value.length);let i=new R;return e===t||this._forEachBlocksInRange(e,t,(e,t,s,n)=>{let o=e.extractTail(s,n);o.stop=this._findStopBefore(t),o.from=this._blockStartPos(t),o instanceof R&&(o.blockIndex=t),i.extend(o)}),i}extractInput(e,t,i){if(void 0===e&&(e=0),void 0===t&&(t=this.value.length),void 0===i&&(i={}),e===t)return"";let s="";return this._forEachBlocksInRange(e,t,(e,t,n,o)=>{s+=e.extractInput(n,o,i)}),s}_findStopBefore(e){let t;for(let i=0;i<this._stops.length;++i){let s=this._stops[i];if(s<=e)t=s;else break}return t}_appendPlaceholder(e){let t=new B;if(this.lazy&&null==e)return t;let i=this._mapPosToBlock(this.value.length);if(!i)return t;let s=i.index,n=null!=e?e:this._blocks.length;return this._blocks.slice(s,n).forEach(i=>{if(!i.lazy||null!=e){var s;let e=i._appendPlaceholder(null==(s=i._blocks)?void 0:s.length);this._value+=e.inserted,t.aggregate(e)}}),t}_mapPosToBlock(e){let t="";for(let i=0;i<this._blocks.length;++i){let s=this._blocks[i],n=t.length;if(e<=(t+=s.value).length)return{index:i,offset:e-n}}}_blockStartPos(e){return this._blocks.slice(0,e).reduce((e,t)=>e+=t.value.length,0)}_forEachBlocksInRange(e,t,i){void 0===t&&(t=this.value.length);let s=this._mapPosToBlock(e);if(s){let e=this._mapPosToBlock(t),n=e&&s.index===e.index,o=s.offset,r=e&&n?e.offset:this._blocks[s.index].value.length;if(i(this._blocks[s.index],s.index,o,r),e&&!n){for(let t=s.index+1;t<e.index;++t)i(this._blocks[t],t,0,this._blocks[t].value.length);i(this._blocks[e.index],e.index,0,e.offset)}}}remove(e,t){void 0===e&&(e=0),void 0===t&&(t=this.value.length);let i=super.remove(e,t);return this._forEachBlocksInRange(e,t,(e,t,s,n)=>{i.aggregate(e.remove(s,n))}),i}nearestInputPos(e,t){if(void 0===t&&(t=_.NONE),!this._blocks.length)return 0;let i=new q(this,e);if(t===_.NONE)return i.pushRightBeforeInput()?i.pos:(i.popState(),i.pushLeftBeforeInput())?i.pos:this.value.length;if(t===_.LEFT||t===_.FORCE_LEFT){if(t===_.LEFT){if(i.pushRightBeforeFilled(),i.ok&&i.pos===e)return e;i.popState()}if(i.pushLeftBeforeInput(),i.pushLeftBeforeRequired(),i.pushLeftBeforeFilled(),t===_.LEFT){if(i.pushRightBeforeInput(),i.pushRightBeforeRequired(),i.ok&&i.pos<=e||(i.popState(),i.ok&&i.pos<=e))return i.pos;i.popState()}return i.ok?i.pos:t===_.FORCE_LEFT?0:(i.popState(),i.ok)?i.pos:(i.popState(),i.ok)?i.pos:0}return t===_.RIGHT||t===_.FORCE_RIGHT?(i.pushRightBeforeInput(),i.pushRightBeforeRequired(),i.pushRightBeforeFilled())?i.pos:t===_.FORCE_RIGHT?this.value.length:(i.popState(),i.ok)?i.pos:(i.popState(),i.ok)?i.pos:this.nearestInputPos(e,_.LEFT):e}totalInputPositions(e,t){void 0===e&&(e=0),void 0===t&&(t=this.value.length);let i=0;return this._forEachBlocksInRange(e,t,(e,t,s,n)=>{i+=e.totalInputPositions(s,n)}),i}maskedBlock(e){return this.maskedBlocks(e)[0]}maskedBlocks(e){let t=this._maskedBlocks[e];return t?t.map(e=>this._blocks[e]):[]}}G.DEFAULTS={lazy:!0,placeholderChar:"_"},G.STOP_CHAR="`",G.ESCAPE_CHAR="\\",G.InputDefinition=j,G.FixedDefinition=H,D.MaskedPattern=G;class U extends G{get _matchFrom(){return this.maxLength-String(this.from).length}constructor(e){super(e)}updateOptions(e){super.updateOptions(e)}_update(e){let{to:t=this.to||0,from:i=this.from||0,maxLength:s=this.maxLength||0,autofix:n=this.autofix,...o}=e;this.to=t,this.from=i,this.maxLength=Math.max(String(t).length,s),this.autofix=n;let r=String(this.from).padStart(this.maxLength,"0"),a=String(this.to).padStart(this.maxLength,"0"),l=0;for(;l<a.length&&a[l]===r[l];)++l;o.mask=a.slice(0,l).replace(/0/g,"\\0")+"0".repeat(this.maxLength-l),super._update(o)}get isComplete(){return super.isComplete&&!!this.value}boundaries(e){let t="",i="",[,s,n]=e.match(/^(\D*)(\d*)(\D*)/)||[];return n&&(t="0".repeat(s.length)+n,i="9".repeat(s.length)+n),[t=t.padEnd(this.maxLength,"0"),i=i.padEnd(this.maxLength,"9")]}doPrepareChar(e,t){let i;if(void 0===t&&(t={}),[e,i]=super.doPrepareChar(e.replace(/\D/g,""),t),!this.autofix||!e)return[e,i];let s=String(this.from).padStart(this.maxLength,"0"),n=String(this.to).padStart(this.maxLength,"0"),o=this.value+e;if(o.length>this.maxLength)return["",i];let[r,a]=this.boundaries(o);return Number(a)<this.from?[s[o.length-1],i]:Number(r)>this.to?"pad"===this.autofix&&o.length<this.maxLength?["",i.aggregate(this.append(s[o.length-1]+e,t))]:[n[o.length-1],i]:[e,i]}doValidate(e){let t=this.value,i=t.search(/[^0]/);if(-1===i&&t.length<=this._matchFrom)return!0;let[s,n]=this.boundaries(t);return this.from<=Number(n)&&Number(s)<=this.to&&super.doValidate(e)}}D.MaskedRange=U;class z extends G{constructor(e){let{mask:t,pattern:i,...s}={...z.DEFAULTS,...e};super({...s,mask:E(t)?t:i})}updateOptions(e){super.updateOptions(e)}_update(e){let{mask:t,pattern:i,blocks:s,...n}={...z.DEFAULTS,...e},o=Object.assign({},z.GET_DEFAULT_BLOCKS());e.min&&(o.Y.from=e.min.getFullYear()),e.max&&(o.Y.to=e.max.getFullYear()),e.min&&e.max&&o.Y.from===o.Y.to&&(o.m.from=e.min.getMonth()+1,o.m.to=e.max.getMonth()+1,o.m.from===o.m.to&&(o.d.from=e.min.getDate(),o.d.to=e.max.getDate())),Object.assign(o,this.blocks,s),Object.keys(o).forEach(t=>{let i=o[t];!("autofix"in i)&&"autofix"in e&&(i.autofix=e.autofix)}),super._update({...n,mask:E(t)?t:i,blocks:o})}doValidate(e){let t=this.date;return super.doValidate(e)&&(!this.isComplete||this.isDateExist(this.value)&&null!=t&&(null==this.min||this.min<=t)&&(null==this.max||t<=this.max))}isDateExist(e){return this.format(this.parse(e,this),this).indexOf(e)>=0}get date(){return this.typedValue}set date(e){this.typedValue=e}get typedValue(){return this.isComplete?super.typedValue:null}set typedValue(e){super.typedValue=e}maskEquals(e){return e===Date||super.maskEquals(e)}}z.GET_DEFAULT_BLOCKS=()=>({d:{mask:U,from:1,to:31,maxLength:2},m:{mask:U,from:1,to:12,maxLength:2},Y:{mask:U,from:1900,to:9999}}),z.DEFAULTS={mask:Date,pattern:"d{.}`m{.}`Y",format:(e,t)=>{if(!e)return"";let i=String(e.getDate()).padStart(2,"0"),s=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return[i,s,n].join(".")},parse:(e,t)=>{let[i,s,n]=e.split(".").map(Number);return new Date(n,s-1,i)}},D.MaskedDate=z;class W extends N{constructor(e){super({...W.DEFAULTS,...e}),this.currentMask=void 0}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),"mask"in e&&(this.compiledMasks=Array.isArray(e.mask)?e.mask.map(e=>T({overwrite:this._overwrite,eager:this._eager,skipInvalid:this._skipInvalid,...F(e)})):[])}_appendCharRaw(e,t){void 0===t&&(t={});let i=this._applyDispatch(e,t);return this.currentMask&&i.aggregate(this.currentMask._appendChar(e,this.currentMaskFlags(t))),i}_applyDispatch(e,t,i){void 0===e&&(e=""),void 0===t&&(t={}),void 0===i&&(i="");let s=t.tail&&null!=t._beforeTailState?t._beforeTailState._value:this.value,n=this.rawInputValue,o=t.tail&&null!=t._beforeTailState?t._beforeTailState._rawInputValue:n,r=n.slice(o.length),a=this.currentMask,l=new B,u=null==a?void 0:a.state;if(this.currentMask=this.doDispatch(e,{...t},i),this.currentMask){if(this.currentMask!==a){if(this.currentMask.reset(),o){let e=this.currentMask.append(o,{raw:!0});l.tailShift=e.inserted.length-s.length}r&&(l.tailShift+=this.currentMask.append(r,{raw:!0,tail:!0}).tailShift)}else u&&(this.currentMask.state=u)}return l}_appendPlaceholder(){let e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendPlaceholder()),e}_appendEager(){let e=this._applyDispatch();return this.currentMask&&e.aggregate(this.currentMask._appendEager()),e}appendTail(e){let t=new B;return e&&t.aggregate(this._applyDispatch("",{},e)),t.aggregate(this.currentMask?this.currentMask.appendTail(e):super.appendTail(e))}currentMaskFlags(e){var t,i;return{...e,_beforeTailState:(null==(t=e._beforeTailState)?void 0:t.currentMaskRef)===this.currentMask&&(null==(i=e._beforeTailState)?void 0:i.currentMask)||e._beforeTailState}}doDispatch(e,t,i){return void 0===t&&(t={}),void 0===i&&(i=""),this.dispatch(e,this,t,i)}doValidate(e){return super.doValidate(e)&&(!this.currentMask||this.currentMask.doValidate(this.currentMaskFlags(e)))}doPrepare(e,t){void 0===t&&(t={});let[i,s]=super.doPrepare(e,t);if(this.currentMask){let e;[i,e]=super.doPrepare(i,this.currentMaskFlags(t)),s=s.aggregate(e)}return[i,s]}doPrepareChar(e,t){void 0===t&&(t={});let[i,s]=super.doPrepareChar(e,t);if(this.currentMask){let e;[i,e]=super.doPrepareChar(i,this.currentMaskFlags(t)),s=s.aggregate(e)}return[i,s]}reset(){var e;null==(e=this.currentMask)||e.reset(),this.compiledMasks.forEach(e=>e.reset())}get value(){return this.currentMask?this.currentMask.value:""}set value(e){super.value=e}get unmaskedValue(){return this.currentMask?this.currentMask.unmaskedValue:""}set unmaskedValue(e){super.unmaskedValue=e}get typedValue(){return this.currentMask?this.currentMask.typedValue:""}set typedValue(e){let t=String(e);this.currentMask&&(this.currentMask.typedValue=e,t=this.currentMask.unmaskedValue),this.unmaskedValue=t}get displayValue(){return this.currentMask?this.currentMask.displayValue:""}get isComplete(){var e;return!!(null==(e=this.currentMask)?void 0:e.isComplete)}get isFilled(){var e;return!!(null==(e=this.currentMask)?void 0:e.isFilled)}remove(e,t){let i=new B;return this.currentMask&&i.aggregate(this.currentMask.remove(e,t)).aggregate(this._applyDispatch()),i}get state(){var e;return{...super.state,_rawInputValue:this.rawInputValue,compiledMasks:this.compiledMasks.map(e=>e.state),currentMaskRef:this.currentMask,currentMask:null==(e=this.currentMask)?void 0:e.state}}set state(e){let{compiledMasks:t,currentMaskRef:i,currentMask:s,...n}=e;t&&this.compiledMasks.forEach((e,i)=>e.state=t[i]),null!=i&&(this.currentMask=i,this.currentMask.state=s),super.state=n}extractInput(e,t,i){return this.currentMask?this.currentMask.extractInput(e,t,i):""}extractTail(e,t){return this.currentMask?this.currentMask.extractTail(e,t):super.extractTail(e,t)}doCommit(){this.currentMask&&this.currentMask.doCommit(),super.doCommit()}nearestInputPos(e,t){return this.currentMask?this.currentMask.nearestInputPos(e,t):super.nearestInputPos(e,t)}get overwrite(){return this.currentMask?this.currentMask.overwrite:this._overwrite}set overwrite(e){this._overwrite=e}get eager(){return this.currentMask?this.currentMask.eager:this._eager}set eager(e){this._eager=e}get skipInvalid(){return this.currentMask?this.currentMask.skipInvalid:this._skipInvalid}set skipInvalid(e){this._skipInvalid=e}maskEquals(e){return Array.isArray(e)?this.compiledMasks.every((t,i)=>{if(!e[i])return;let{mask:s,...n}=e[i];return O(t,n)&&t.maskEquals(s)}):super.maskEquals(e)}typedValueEquals(e){var t;return!!(null==(t=this.currentMask)?void 0:t.typedValueEquals(e))}}W.DEFAULTS=void 0,W.DEFAULTS={dispatch:(e,t,i,s)=>{if(!t.compiledMasks.length)return;let n=t.rawInputValue,o=t.compiledMasks.map((o,r)=>{let a=t.currentMask===o,l=a?o.value.length:o.nearestInputPos(o.value.length,_.FORCE_LEFT);return o.rawInputValue!==n?(o.reset(),o.append(n,{raw:!0})):a||o.remove(l),o.append(e,t.currentMaskFlags(i)),o.appendTail(s),{index:r,weight:o.rawInputValue.length,totalInputPositions:o.totalInputPositions(0,Math.max(l,o.nearestInputPos(o.value.length,_.FORCE_LEFT)))}});return o.sort((e,t)=>t.weight-e.weight||t.totalInputPositions-e.totalInputPositions),t.compiledMasks[o[0].index]}},D.MaskedDynamic=W,D.MaskedEnum=class extends G{updateOptions(e){super.updateOptions(e)}_update(e){let{enum:t,...i}=e;t&&(i.mask="*".repeat(t[0].length),this.enum=t),super._update(i)}doValidate(e){return this.enum.some(e=>e.indexOf(this.unmaskedValue)>=0)&&super.doValidate(e)}},D.MaskedFunction=class extends N{updateOptions(e){super.updateOptions(e)}_update(e){super._update({...e,validate:e.mask})}};class K extends N{constructor(e){super({...K.DEFAULTS,...e})}updateOptions(e){super.updateOptions(e)}_update(e){super._update(e),this._updateRegExps()}_updateRegExps(){let e="^"+(this.allowNegative?"[+|\\-]?":""),t=(this.scale?"("+A(this.radix)+"\\d{0,"+this.scale+"})?":"")+"$";this._numberRegExp=RegExp(e+"\\d*"+t),this._mapToRadixRegExp=RegExp("["+this.mapToRadix.map(A).join("")+"]","g"),this._thousandsSeparatorRegExp=RegExp(A(this.thousandsSeparator),"g")}_removeThousandsSeparators(e){return e.replace(this._thousandsSeparatorRegExp,"")}_insertThousandsSeparators(e){let t=e.split(this.radix);return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,this.thousandsSeparator),t.join(this.radix)}doPrepareChar(e,t){void 0===t&&(t={}),e=this._removeThousandsSeparators(this.scale&&this.mapToRadix.length&&(t.input&&t.raw||!t.input&&!t.raw)?e.replace(this._mapToRadixRegExp,this.radix):e);let[i,s]=super.doPrepareChar(e,t);return e&&!i&&(s.skip=!0),!i||this.allowPositive||this.value||"-"===i||s.aggregate(this._appendChar("-")),[i,s]}_separatorsCount(e,t){void 0===t&&(t=!1);let i=0;for(let s=0;s<e;++s)this._value.indexOf(this.thousandsSeparator,s)===s&&(++i,t&&(e+=this.thousandsSeparator.length));return i}_separatorsCountFromSlice(e){return void 0===e&&(e=this._value),this._separatorsCount(this._removeThousandsSeparators(e).length,!0)}extractInput(e,t,i){return void 0===e&&(e=0),void 0===t&&(t=this.value.length),[e,t]=this._adjustRangeWithSeparators(e,t),this._removeThousandsSeparators(super.extractInput(e,t,i))}_appendCharRaw(e,t){if(void 0===t&&(t={}),!this.thousandsSeparator)return super._appendCharRaw(e,t);let i=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,s=this._separatorsCountFromSlice(i);this._value=this._removeThousandsSeparators(this.value);let n=super._appendCharRaw(e,t);this._value=this._insertThousandsSeparators(this._value);let o=t.tail&&t._beforeTailState?t._beforeTailState._value:this._value,r=this._separatorsCountFromSlice(o);return n.tailShift+=(r-s)*this.thousandsSeparator.length,n.skip=!n.rawInserted&&e===this.thousandsSeparator,n}_findSeparatorAround(e){if(this.thousandsSeparator){let t=e-this.thousandsSeparator.length+1,i=this.value.indexOf(this.thousandsSeparator,t);if(i<=e)return i}return -1}_adjustRangeWithSeparators(e,t){let i=this._findSeparatorAround(e);i>=0&&(e=i);let s=this._findSeparatorAround(t);return s>=0&&(t=s+this.thousandsSeparator.length),[e,t]}remove(e,t){void 0===e&&(e=0),void 0===t&&(t=this.value.length),[e,t]=this._adjustRangeWithSeparators(e,t);let i=this.value.slice(0,e),s=this.value.slice(t),n=this._separatorsCount(i.length);this._value=this._insertThousandsSeparators(this._removeThousandsSeparators(i+s));let o=this._separatorsCountFromSlice(i);return new B({tailShift:(o-n)*this.thousandsSeparator.length})}nearestInputPos(e,t){if(!this.thousandsSeparator)return e;switch(t){case _.NONE:case _.LEFT:case _.FORCE_LEFT:{let i=this._findSeparatorAround(e-1);if(i>=0){let s=i+this.thousandsSeparator.length;if(e<s||this.value.length<=s||t===_.FORCE_LEFT)return i}break}case _.RIGHT:case _.FORCE_RIGHT:{let t=this._findSeparatorAround(e);if(t>=0)return t+this.thousandsSeparator.length}}return e}doValidate(e){let t=!!this._removeThousandsSeparators(this.value).match(this._numberRegExp);if(t){let e=this.number;t=t&&!isNaN(e)&&(null==this.min||this.min>=0||this.min<=this.number)&&(null==this.max||this.max<=0||this.number<=this.max)}return t&&super.doValidate(e)}doCommit(){if(this.value){let e=this.number,t=e;null!=this.min&&(t=Math.max(t,this.min)),null!=this.max&&(t=Math.min(t,this.max)),t!==e&&(this.unmaskedValue=this.format(t,this));let i=this.value;this.normalizeZeros&&(i=this._normalizeZeros(i)),this.padFractionalZeros&&this.scale>0&&(i=this._padFractionalZeros(i)),this._value=i}super.doCommit()}_normalizeZeros(e){let t=this._removeThousandsSeparators(e).split(this.radix);return t[0]=t[0].replace(/^(\D*)(0*)(\d*)/,(e,t,i,s)=>t+s),e.length&&!/\d$/.test(t[0])&&(t[0]=t[0]+"0"),t.length>1&&(t[1]=t[1].replace(/0*$/,""),t[1].length||(t.length=1)),this._insertThousandsSeparators(t.join(this.radix))}_padFractionalZeros(e){if(!e)return e;let t=e.split(this.radix);return t.length<2&&t.push(""),t[1]=t[1].padEnd(this.scale,"0"),t.join(this.radix)}doSkipInvalid(e,t,i){void 0===t&&(t={});let s=0===this.scale&&e!==this.thousandsSeparator&&(e===this.radix||e===K.UNMASKED_RADIX||this.mapToRadix.includes(e));return super.doSkipInvalid(e,t,i)&&!s}get unmaskedValue(){return this._removeThousandsSeparators(this._normalizeZeros(this.value)).replace(this.radix,K.UNMASKED_RADIX)}set unmaskedValue(e){super.unmaskedValue=e}get typedValue(){return this.parse(this.unmaskedValue,this)}set typedValue(e){this.rawInputValue=this.format(e,this).replace(K.UNMASKED_RADIX,this.radix)}get number(){return this.typedValue}set number(e){this.typedValue=e}get allowNegative(){return null!=this.min&&this.min<0||null!=this.max&&this.max<0}get allowPositive(){return null!=this.min&&this.min>0||null!=this.max&&this.max>0}typedValueEquals(e){return(super.typedValueEquals(e)||K.EMPTY_VALUES.includes(e)&&K.EMPTY_VALUES.includes(this.typedValue))&&!(0===e&&""===this.value)}}K.UNMASKED_RADIX=".",K.EMPTY_VALUES=[...N.EMPTY_VALUES,0],K.DEFAULTS={mask:Number,radix:",",thousandsSeparator:"",mapToRadix:[K.UNMASKED_RADIX],min:Number.MIN_SAFE_INTEGER,max:Number.MAX_SAFE_INTEGER,scale:2,normalizeZeros:!0,padFractionalZeros:!1,parse:Number,format:e=>e.toLocaleString("en-US",{useGrouping:!1,maximumFractionDigits:20})},D.MaskedNumber=K;const Y={MASKED:"value",UNMASKED:"unmaskedValue",TYPED:"typedValue"};function Z(e,t,i){void 0===t&&(t=Y.MASKED),void 0===i&&(i=Y.MASKED);let s=T(e);return e=>s.runIsolated(s=>(s[t]=e,s[i]))}D.PIPE_TYPE=Y,D.createPipe=Z,D.pipe=function(e,t,i,s){return Z(t,i,s)(e)};try{globalThis.IMask=D}catch{}const J=[{label:"A1",value:"4"},{label:"A2",value:"5"},{label:"B1",value:"6"},{label:"B2",value:"7"},{label:"C1",value:"8"},{label:"C2",value:"9"}],X=[{label:"1",value:"1"},{label:"2",value:"2"},{label:"3",value:"3"},{label:"4",value:"4"}],Q="Invalid date of birth",ee="Invalid phone",et="Required field",ei={mask:Date,pattern:"YYYY.MM.DD",lazy:!1,blocks:{YYYY:{mask:D.MaskedRange,from:1932,to:2090,placeholderChar:"Y"},MM:{mask:D.MaskedRange,from:1,to:12,placeholderChar:"M"},DD:{mask:D.MaskedRange,from:1,to:31,placeholderChar:"D"}},format:function(e){let t=e.getDate(),i=e.getMonth()+1;return t<10&&(t="0"+t),i<10&&(i="0"+i),e.getFullYear()+"."+i+"."+t},parse:function(e){let t=e.split("."),i=parseInt(t[0],10),s=parseInt(t[1],10)-1,n=parseInt(t[2],10);return new Date(i,s,n)}};class es{static NO_VALID_CLASS="no-valid";static FORM_HIDE_CLASS="hide";options={initFormData:null,handleSubmit:async(e,t)=>{},setValueOnInit:(e,t)=>{},watch:(e,t)=>{},customValidateFields:(e,t={isNotRequiredButMustValidate:!1,configurationErrorHandling:{isEmpty:!0,error:0,errorMessage:""}})=>{}};constructor(e,t={handleSubmit:async(e,t)=>{},setValueOnInit:(e,t)=>{},watch:(e,t)=>{},customValidateFields:(e,t={isNotRequiredButMustValidate:!1,configurationErrorHandling:{isEmpty:!0,error:0,errorMessage:""}})=>{},initFormData:null}){if(this.$form=document.querySelector(`#${e}`),!this.$form)return;this.options=t,this.#t(),this.options.initFormData&&this.initForm(this.options.initFormData)}static getRequireFieldBlock(e){if(e.classList.contains("_require"))return e;let t=e.closest("._require");return t}static setSuccessRequire(e){let t=es.getRequireFieldBlock(e);t||(t=es.getValidateFieldBlock(e)),t&&t.setAttribute("data-success","")}static isInvalidFormat(e,t){return!(t||["image/jpeg","image/png","image/webp","application/msword","application/pdf","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain"]).includes(e.type)}static isInvalidSize(e,t=20){return e.size>1048576*t||0===e.size}static removeSuccessRequire(e){let t=es.getRequireFieldBlock(e);t&&t.removeAttribute("data-success")}static cancelError(e){let t=es.getRequireFieldBlock(e);if(t||(t=es.getValidateFieldBlock(e)),!t)return;let i=t.querySelector(".fields-block__no-valid-message");t.classList.contains(es.NO_VALID_CLASS)&&t.classList.remove(es.NO_VALID_CLASS),es.setSuccessRequire(e),i&&(i.style.display="none")}static setError(e,t){let i=es.getRequireFieldBlock(e);if(i||(i=es.getValidateFieldBlock(e)),!i)return;let s=i.querySelector(".fields-block__no-valid-message");!i.classList.contains(es.NO_VALID_CLASS)&&(i.classList.add(es.NO_VALID_CLASS),es.removeSuccessRequire(e),s&&(s.style.display="block",s.textContent=t??""))}static emailTest(e){return!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e.value)}hide(){this.$form.classList.add(es.FORM_HIDE_CLASS)}show(){this.$form.classList.remove(es.FORM_HIDE_CLASS)}static hideFormById(e){let t=document.querySelector(`#${e}`);t&&t.classList.add(es.FORM_HIDE_CLASS)}static showFormById(e){let t=document.querySelector(`#${e}`);t&&t.classList.remove(es.FORM_HIDE_CLASS)}static toggleShowHideFormById(e){let t=document.querySelector(`#${e}`);t&&t.classList.toggle(es.FORM_HIDE_CLASS)}static setConfigurationErrorMessage(e,t){Object.entries(e).forEach(([i])=>{"errorMessage"===i&&(e[i]=t||"")}),e.isEmpty=!1,e.errors=++e.errors}validateFields(e){let t={errors:0,isEmpty:!1,errorMessage:""};return e.forEach(e=>{es.cancelError(e);let i=e.classList.contains("_validate")||!e.closest("._require");if(!e.value.length&&!i)return t.errors=++t.errors,t.isEmpty=!0,t.errorMessage="Required field",this.options?.customValidateFields&&this.options?.customValidateFields(e,{isNotRequiredButMustValidate:i,configurationErrorHandling:t}),{error:t.errors,errorMessage:t.errorMessage,isEmpty:t.isEmpty};if(!e.value&&i)return t.errorMessage="",t.errors=0,this.options?.customValidateFields&&this.options?.customValidateFields(e,{isNotRequiredButMustValidate:i,configurationErrorHandling:t}),{error:t.errors,errorMessage:t.errorMessage,isEmpty:t.isEmpty};if("radio"===e.type){let s=es.getRequireFieldBlock(e);if(!s)return;let n=Array.from(s.querySelectorAll("input")).some(e=>e.checked);n||i||(t.isEmpty=!0,t.errors=++t.errors,t.errorMessage="")}if("checkbox"===e.type){let s=es.getRequireFieldBlock(e);if(!s)return;let n=Array.from(s.querySelectorAll("input")).some(e=>e.checked);n||i||(t.isEmpty=!0,t.errors=++t.errors,t.errorMessage="")}if("email"!==e.type||(es.emailTest(e)&&(t.isEmpty=!1,t.errors=++t.errors,t.errorMessage="Invalid email"),e.value.length||i||(t.isEmpty=!0,t.errors=++t.errors,t.errorMessage=et)),"file"===e.type){let s=e.files[0];s||(t.isEmpty=!0),s||i?es.isInvalidFormat(s)?(t.isEmpty=!1,t.errors=++t.errors,t.errorMessage="Invalid format"):es.isInvalidSize(s)&&(t.isEmpty=!1,t.errors=++t.errors,t.errorMessage="File is too large"):(t.errors=++t.errors,t.errorMessage="")}this.options?.customValidateFields&&this.options?.customValidateFields(e,{isNotRequiredButMustValidate:i,configurationErrorHandling:t})}),{error:t.errors,errorMessage:t.errorMessage,isEmpty:t.isEmpty}}static getValidateFieldBlock(e){if(e.classList.contains("_field"))return e;let t=e.closest("._field");return t}static setEmpty(e){let t=es.getRequireFieldBlock(e);t||(t=es.getValidateFieldBlock(e)),t&&t.setAttribute("data-empty","")}static notEmpty(e){let t=es.getRequireFieldBlock(e);t||(t=es.getValidateFieldBlock(e)),t&&t.removeAttribute("data-empty")}handleValidateInput(e){let{error:t,errorMessage:i,isEmpty:s}=this.validateFields([e]);return t?es.setError(e,i):es.cancelError(e),s?es.setEmpty(e):es.notEmpty(e),{error:t,errorMessage:i}}initForm(e,t){if(!t)return;let i=e.querySelector("input");if(e.classList.contains("fields-block__textarea")&&(i=e.querySelector("textarea")),!i)return;let s=i.name,n=t?.[s]||"";if(!n)return;if(i.classList.contains("vscomp-hidden-input")){let e=i.closest(".vscom-custom-select");e.setValue(n),es.setSuccessRequire(i),this.options?.setValueOnInit?.(i);return}if("tel"===i.type){this.options?.setValueOnInit?.(i,n),es.setSuccessRequire(i);return}if("file"===i.type){this.options?.setValueOnInit?.(i);return}let o=this.$form.querySelectorAll(`[name="${s}"`);if(1===o.length){o[0].value=n,"checkbox"===o[0].type&&(o[0].checked=!0),this.options?.setValueOnInit?.(i),es.setSuccessRequire(i);return}if(o.length>1){let e="radio"===o[0].type;e&&o.forEach(e=>{e.value===n&&(e.checked=!0,es.setSuccessRequire(e))});return}}#t(){this.$form.querySelectorAll("input").forEach(e=>{if(!e.classList.contains("vscomp-search-input"))switch(e.type){case"checkbox":case"radio":e.addEventListener("change",()=>{this.options?.watch?.(e.name,e.value),this.handleValidateInput(e)});break;case"hidden":let t=e.classList.contains("vscomp-hidden-input");if(!t)break;let i=e.closest(".vscom-custom-select");i.addEventListener("change",()=>{if(i.classList.contains("_after-prefetch")){i.classList.remove("_after-prefetch");return}let e=i.querySelector('input[type="hidden"]');this.handleValidateInput(e)});break;default:this.options?.watch&&e.addEventListener("input",()=>this.options?.watch?.(e.name,e.value)),e.addEventListener("blur",()=>{this.options?.watch?.(e.name,e.value),this.handleValidateInput(e)})}}),this.$form.querySelectorAll("textarea").forEach(e=>e.addEventListener("blur",()=>this.handleValidateInput(e)))}}class en extends es{ACTIVE_FORM_STEP_CLASS="form__step-active";ACTIVE_PROGRESS_STEP_CLASS="progressbar-step-active";options={currentStep:0,handleSuccessNextStep:async(e,t)=>{},handleSubmit:async(e,t)=>{},setValueOnInit:(e,t)=>{},customValidateByStep:e=>{},watch:(e,t)=>{},initFormData:null};constructor(e,t={currentStep:0,handleSuccessNextStep:async(e,t)=>{},handleSubmit:async(e,t)=>{},watch:(e,t)=>{},setValueOnInit:(e,t)=>{},customValidateFields:(e,t={isNotRequiredButMustValidate:!1,configurationErrorHandling:{isEmpty:!0,error:0,errorMessage:""}})=>{},initFormData:null}){let{handleSubmit:i,setValueOnInit:s,watch:n,...o}=t;if(super(e,{handleSubmit:i,setValueOnInit:s,watch:n,initFormData:null}),!this.$form)return;this.$steps=[...this.$form.querySelectorAll("[data-step]")],this.$progressSteps=[...this.$form.querySelectorAll(".progressbar-step")],this.options={...o,watch:n,handleSubmit:i,setValueOnInit:s},this.currentStep=this.options?.currentStep??this.$steps.findIndex(e=>e.classList.contains(this.ACTIVE_FORM_STEP_CLASS)),this.options?.currentStep<0&&(this.currentStep=0,this.$steps[this.currentStep].classList.add(this.ACTIVE_FORM_STEP_CLASS)),this.#i(),t.initFormData&&this.initMultiForm(t.initFormData)}renderSteps(){this.$steps.forEach((e,t)=>{e.classList.toggle(this.ACTIVE_FORM_STEP_CLASS,t===this.currentStep)})}renderProgress(){this.$progressSteps.length&&this.$progressSteps.forEach((e,t)=>{e.classList.toggle(this.ACTIVE_PROGRESS_STEP_CLASS,t===this.currentStep)})}getRequireInputsByStep(e){let t=this.$form.querySelector(`[data-step="${e}"]`),i=t.querySelectorAll("._require");return i}getAllFieldsByStep(e){let t=this.$form.querySelector(`[data-step="${e}"]`),i=t.querySelectorAll("._field");return i}async handleSteps(e){let t=e.target;if(!t.matches("[data-btn]"))return;let i=0,s=t.dataset.btn;function n(e){let t=e.querySelector("input");return(e.classList.contains("fields-block__textarea")&&(t=e.querySelector("textarea")),t)?t:null}let o=async e=>{let t={},i=0,s=this.getAllFieldsByStep(e+1),o=this.getValidateMultiForm();if(s.forEach(e=>{let t=n(e);if(!t)return;let{error:s}=this.handleValidateInput(t);i+=s,o=!i}),!o)return{data:t,isValid:!1};function r(e,i=(e,t)=>!0){let s=e.name,n=e.value;if("radio"===e.type){let n=e.closest("._field"),o=n.querySelectorAll("input"),r=Array.from(o).find(e=>e.checked),a=i(s,r.value);if(!a)return;t[s]=r.value;return}if("file"===e.type){let n=i(s,e.files[0]);if(!n)return;t[s]=e.files[0];return}let o=i(s,n);o&&(t[s]=n)}let a=(e,t)=>{try{let i=this.options.customValidateByStep?.(e,t);return i??!0}catch(e){return!1}};return s.forEach(e=>{if(e.classList.contains("_require")){let t=n(e);t&&r(t,a)}else{let t=n(e);r(t,()=>!0)}}),{data:t,isValid:!0}};if("submit"===s){let{isValid:e,data:t}=await o(this.currentStep);if(!e)return;await this.options.handleSubmit?.(t,this.currentStep);return}if("next"===s){let{isValid:e,data:t}=await o(this.currentStep);if(!e)return;await this.options.handleSuccessNextStep?.(t,this.currentStep),i=1}"prev"===s&&(i=-1),this.currentStep+=i,this.renderSteps(),this.renderProgress()}getValidateMultiForm(){let e=this.$form.querySelector(`[data-step="${this.currentStep+1}"]`);return function(){let t=e.querySelectorAll("._require"),i=Array.from(t).every(e=>e.hasAttribute("data-success"));return i}()}initMultiForm(e,t){e&&this.$steps.forEach((t,i)=>{let s=this.getAllFieldsByStep(i+1);s.forEach(t=>this.initForm(t,e))})}#i(){this.$form.addEventListener("click",this.handleSteps.bind(this)),this.renderSteps(),this.renderProgress()}}const eo=e=>{let t=document.querySelector(e);if(!t)return null;let i=D(t,ei);return i};var er={};er=r("3HEWM");const ea=e=>{let t=document.querySelector(e);if(!t)return{phoneIti:null,phoneInput:null};let i=(function(e){return e&&e.__esModule?e.default:e})(er)(t,{utilsScript:"https://cdn.jsdelivr.net/npm/intl-tel-input@18.1.1/build/js/utils.js",allowDropdown:!0,autoHideDialCode:!1,autoPlaceholder:"aggressive",customPlaceholder:null,dropdownContainer:null,formatOnDisplay:!0,geoIpLookup:async function(e){let t=await fetch("https://ipinfo.io");console.log("req",t),e("ua")},hiddenInput:"",initialCountry:"auto",localizedCountries:null,nationalMode:!1,onlyCountries:[],placeholderNumberType:"MOBILE",preferredCountries:["hu"],excludeCountries:["ru"],separateDialCode:!1});return i.promise.then(()=>{let e=D(t,{mask:"+000000000000",placeholderChar:"_",lazy:!1});function i(){let i=t.getAttribute("placeholder"),s="+";if(i&&i.length){let e=i.replaceAll("-"," ");s=`+${e.replace(/\D+/g,"").split("").map(()=>"0").join("")}`}e.updateOptions({mask:i?s:"+000000000000"})}i(),t.addEventListener("input",i)}),{input:e,phoneIti:i}};class el{static async sendUserData(e){let t=new FormData;return Object.entries(e).forEach(([i,s])=>{if(e[i]instanceof File){t.append(i,s);return}if("object"==typeof e[i]){t.append(i,JSON.stringify(s));return}t.append(i,s)}),new Promise((e,i)=>{setTimeout(()=>{e(t)},3e3)})}}class eu{static ROOT_NODE_BY_ID="#informations-stepper";static ACTIVE_CLASS="informations-stepper__item-active";static HIDE_ROOT_NODE_CLASS="hide";static informationStepsRoot=document.querySelector(eu.ROOT_NODE_BY_ID);constructor(e={handleContinueBtnClick:()=>{},handleCancelBtnClick:()=>{}}){if(!eu){console.error("Not found informationStepsRoot");return}this.options=e,this.informationSteps=eu.informationStepsRoot.querySelectorAll(".informations-stepper__item"),this.#e()}deleteActiveInformationSteps(){this.informationSteps.forEach(e=>e.classList.remove(eu.ACTIVE_CLASS))}activeInformationStep(e){e.classList.add(eu.ACTIVE_CLASS)}static hide(){eu.informationStepsRoot.classList.add(eu.HIDE_ROOT_NODE_CLASS)}static show(){eu.informationStepsRoot.classList.remove(eu.HIDE_ROOT_NODE_CLASS)}static toggleShowHide(){eu.informationStepsRoot.classList.toggle(eu.HIDE_ROOT_NODE_CLASS)}handleInformationSteps(e){let t=e.target;if(!t.matches("[data-btn]"))return;let i=t.dataset.btn;if("continue"===i){this.options.handleContinueBtnClick?.();return}if("cancel"===i){this.options.handleCancelBtnClick?.();return}}getContinueInformationStep(){return this.informationSteps[0]}getExpiresInformationStep(){return this.informationSteps[1]}getSuccessInformationStep(){return this.informationSteps[2]}#e(){eu.informationStepsRoot.addEventListener("click",this.handleInformationSteps.bind(this))}}function eh(){es.toggleShowHideFormById("form"),eu.toggleShowHide()}const ec=e=>{let t=Date.now();return(t-e)/6e4>=30};class ep{showClass="open";constructor({id:e,closeId:t}){if(!e)throw Error(`Not found modal by this id: ${e}`);if(!t)throw Error(`Not found elem id for close modal: ${t}`);this.$modal=document.querySelector(`#${e}`),this.$closeElem=this.$modal.querySelector(`#${t}`),this.#e()}show(){this.$modal.classList.add(this.showClass)}hide(){this.$modal.classList.remove(this.showClass)}toggle(){this.$modal.classList.toggle(this.showClass,!this.$modal.classList.contains(this.showClass))}#e(){this.$closeElem.addEventListener("click",this.hide.bind(this))}}function ed(e,{isNotRequiredButMustValidate:t,configurationErrorHandling:i}){if("text"!==e.type||e.matches("[data-date-of-birth]")||(e.value.length||t?i.isEmpty=!1:(++i.errors,i.invalidField=e,i.isEmpty=!0,i.errorMessage=et)),e.matches("[data-date-of-birth]")){let s=new Date,n=new Date("1952-12-01"),o=e.value;if(t&&"YYYY.MM.DD"===o){i.isEmpty=!0;return}10!==o.length?(i.isEmpty=!0,i.errors=++i.errors,i.invalidField=e,i.errorMessage=et):i.isEmpty=!1,(o.includes("M")||o.includes("D")||o.includes("Y"))&&(i.isEmpty=!1,i.invalidField=e,i.errors=++i.errors,i.errorMessage=Q),(new Date(o)>s||new Date(o)<n)&&(i.isEmpty=!1,i.invalidField=e,i.errors=++i.errors,i.errorMessage=Q)}if(e.matches("[data-age]")){let s=parseInt(e.value);if(isNaN(s)&&(s=0),t&&0===s){i.isEmpty=!0,i.errors=0,i.errorMessage="";return}0===s?(i.isEmpty=!0,i.invalidField=e,i.errors=++i.errors,i.errorMessage=et):i.isEmpty=!1}if(e.matches("[data-input-tel]")){let t=e.value;t.includes("_")&&(i.isEmpty=!1,i.invalidField=e,i.errors=++i.errors,i.errorMessage=ee),/^[^0-9]*$/.test(t)?(i.isEmpty=!0,i.invalidField=e,i.errors=++i.errors,i.errorMessage=et):i.isEmpty=!1;return}if(e.matches("[data-input-tel]")){let s=e.value,n=s.split(" ")[1];if(/^[^0-9]*$/.test(n)){if(t)return;i.isEmpty=!0,i.invalidField=e,i.errors=++i.errors,i.errorMessage=et;return}n.includes("_")&&(i.isEmpty=!1,i.invalidField=e,i.errors=++i.errors,i.errorMessage=ee);return}if("checkbox"===e.type||e.matches("[data-checkbox-privacy-policy]")){let s=e.checked;if(t)return;s?i.isEmpty=!0:(i.isEmpty=!0,i.invalidField=e,i.errors=++i.errors,i.errorMessage="")}}async function ef(){let e=document.querySelector(".form"),t=e.querySelector("#form"),i=new eu({handleContinueBtnClick:()=>{eh()}}),s=localStorage.getItem(`FORM_STEP-${window.location.pathname}`),n=new k("userInfo",1,{upgrade(e){e.createObjectStore("userInfo")}});if(!function(e){let t=document.querySelector(".btn-reset-form");console.log("btnResetModal",t),t.addEventListener("click",async()=>{await e.del("info"),localStorage.removeItem(`FORM_STEP-${window.location.pathname}`),window.location.reload()})}(n),!t){console.error(`Not found form: ${t}`);return}let o=null,r=0;if(s){let e=JSON.parse(s),a=ec(e.created_date),l=i.getContinueInformationStep(),u=i.getExpiresInformationStep(),h=i.getSuccessInformationStep();if(e.isFullyRegistrationSuccess){i.deleteActiveInformationSteps(),i.activeInformationStep(h),eh(),t.remove();return}a?(i.deleteActiveInformationSteps(),i.activeInformationStep(u),await n.del("info"),eh(),t.remove()):(i.deleteActiveInformationSteps(),i.activeInformationStep(l),r=e.step,o=await n.get("info"),eh())}let l={user:o,step:r};async function u(e){let s=e.user,n=e.step,o=window["idb-userInfo"],{_phoneInput:r,phoneIti:l}=ea("#mobile-number"),u=t.querySelector("#education-select"),h=t.querySelector("#english-level-select"),c=t.querySelector("#year-select");VirtualSelect.init({ele:h,multiple:!1,search:!1,required:!0,hideClearButton:!0,name:"english-level",placeholder:"English level",options:J,showDropboxAsPopup:!1}),VirtualSelect.init({ele:u,multiple:!1,search:!1,required:!1,hideClearButton:!0,name:"education-institution",placeholder:"Educational Institution",options:[],allowNewOption:!0,showDropboxAsPopup:!1}),VirtualSelect.init({ele:c,multiple:!1,search:!1,required:!0,hideClearButton:!0,name:"year",placeholder:"Year",options:X,showDropboxAsPopup:!1});let p=new a("upload-file",{handleChangeValidateInput:e=>{let{error:t,errorMessage:i}=d.handleValidateInput(e);if(t)throw Error(i)},handleSuccessAttach:e=>{es.setSuccessRequire(e)},handleCanceled:e=>{es.removeSuccessRequire(e)}}),d=new en("form",{currentStep:n||0,customValidateFields:ed,handleSuccessNextStep:async(e,t)=>{let i=await o.get("info");await o.set("info",{...i,...e}),i=await o.get("info"),localStorage.setItem(`FORM_STEP-${window.location.pathname}`,JSON.stringify({created_date:Date.now(),step:t+1,isFullyRegistrationSuccess:!1})),C.showSpinner();try{await el.sendUserInfo(i)}catch(e){}finally{C.hideSpinner()}},handleSubmit:async(e,s)=>{let n=await o.get("info");await o.set("info",{...n,...e}),n=await o.get("info"),localStorage.setItem(`FORM_STEP-${window.location.pathname}`,JSON.stringify({created_date:Date.now(),step:s,isFullyRegistrationSuccess:!1})),C.showSpinner();try{await el.sendUserData(n);let e=i.getSuccessInformationStep();i.deleteActiveInformationSteps(),i.activeInformationStep(e),eh(),t.remove(),localStorage.setItem(`FORM_STEP-${window.location.pathname}`,JSON.stringify({created_date:Date.now(),step:s,isFullyRegistrationSuccess:!0})),await o.del("info"),alert(JSON.stringify(n,null,4)),window.confetti()}catch(e){console.log("error",e)}finally{C.hideSpinner()}},setValueOnInit:(e,t)=>{if("tel"===e.type&&l.setNumber(t),"file"===e.type){let t=s?.[e.name]||null;t&&p.setSuccessfulyUploadedStatus(t)}},initFormData:s});eo("#date-of-birth")}console.log("init"),await u(l)}!function(){let e=document.createElement("canvas");document.body.appendChild(e),window.confetti.create(e,{resize:!0,useWorker:!0})}(),ef(),function(){let e=document.querySelector(".btn-modal");if(!e)throw Error("Something went wrong");let t=new ep({id:"modal",closeId:"modal-close-btn"});e.addEventListener("click",t.toggle.bind(t))}();